<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[å¤§åŽ‚é¢è¯•é¢˜è®°å½•]]></title>
    <url>%2F2018%2F03%2F17%2F%E9%9D%A2%E8%AF%95%E6%80%BB%E7%BB%93%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘è¿™ä¸¤å‘¨åœ¨é¢è¯•ï¼Œå…¶ä¸­é¢äº†ä¸€éƒ¨åˆ†å¤§åŽ‚ï¼Œåœ¨é¢è¯•ä¸­çŸ¥é“äº†è‡ªå·±çš„ä¸è¶³ï¼Œä¹Ÿä¸ºæŽ¥ä¸‹æ¥çš„å­¦ä¹ æŒ‡æ˜Žäº†ä¸€ä¸ªæ˜Žç¡®çš„æ–¹å‘ï¼ŒçŽ°å°†ä¸€éƒ¨åˆ†è¿˜è®°å¾—çš„é—®é¢˜è´´å‡ºæ¥åˆ†äº«ç»™å¤§å®¶ã€‚ é˜¿é‡Œé«˜å¾·äº‹ä¸šéƒ¨ï¼š 1ã€ä½ ä»¬çŽ°åœ¨ç”¨çš„jdkæ˜¯å“ªä¸ªç‰ˆæœ¬ï¼Ÿjdk1.8éƒ½æœ‰å“ªäº›æ–°ç‰¹æ€§ï¼Ÿ 2ã€å¦‚æžœä¸€ä¸ªçº¿ç¨‹çš„cpuå æœ‰çŽ‡å¾ˆé«˜ï¼Œæ€Žä¹ˆè§£å†³ï¼Ÿ 3ã€volatileå…³é”®å­—è®²ä¸€ä¸‹ï¼Ÿå¹³æ—¶æœ‰ç”¨è¿‡å—ï¼Ÿæ€Žä¹ˆè§£å†³çš„ï¼Ÿ 4ã€ä½ éƒ½è¯»è¿‡å“ªäº›æºç ï¼Ÿ 5ã€hadoopçš„shuffleè¿‡ç¨‹è®²ä¸€ä¸‹ï¼Ÿ 6ã€ä½ è¯»è¿‡ã€Šæ·±å…¥javaè™šæ‹Ÿæœºã€‹ï¼Œè®²ä¸€ä¸‹jvmä¸»è¦æ˜¯ç”±å“ªå‡ å—æž„æˆçš„ï¼ŸCMSåžƒåœ¾å›žæ”¶å™¨äº†è§£å—ï¼Ÿ ä½ ä»¬é¡¹ç›®ä¸­ç”¨è¿‡ä»€ä¹ˆæ•°æ®åº“ï¼Ÿåœ¨sqlä¸­ä½¿ç”¨in å…³é”®å­—ä¹‹åŽç´¢å¼•è¿˜æœ‰æ•ˆå—ï¼Ÿ 8ã€è®²ä¸€ä¸‹éžèšé›†ç´¢å¼•å’Œèšé›†ç´¢å¼•çš„åŒºåˆ«ï¼Ÿ 9ã€å¹³æ—¶ç”¨è¿‡é«˜å¾·åœ°å›¾å—ï¼Ÿæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿä½ è§‰å¾—æ˜¯ä»€ä¹ˆå¯¼è‡´çš„ï¼Ÿ 10ã€å‡è®¾æœ‰ä¸€ä¸ªäºŒå‰æ ‘,å·²çŸ¥Aã€Bä¸¤ä¸ªèŠ‚ç‚¹å’Œä»–ä»¬è‡ªå·±çš„çˆ¶èŠ‚ç‚¹ï¼Œæ‰¾åˆ°ä»–ä»¬æ‰€æœ‰çš„å…±åŒçˆ¶èŠ‚ç‚¹ã€‚å¦‚ä½•å®žçŽ°ï¼Ÿ 11ã€å†™ä»£ç æ¥å®žçŽ°ä½ è‡ªå·±è®²è¿°çš„æ–¹æ³•ï¼Ÿ 12ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨innodbè¿™ä¸ªå­˜å‚¨å¼•æ“Žï¼Ÿ 13ã€è®²ä¸€ä¸‹javaç±»åŠ è½½æ–¹å¼ï¼ŸåŒäº²å§”æ´¾æ¨¡åž‹ï¼Ÿå¦‚ä½•æ‰“ç ´åŒäº²å§”æ´¾æ¨¡åž‹ï¼Ÿ 14ã€ä½ å†™pythonçˆ¬è™«çš„æ—¶å€™é‡åˆ°äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿæ€Žä¹ˆè§£å†³çš„ï¼Ÿ æ€»çš„æ¥è¯´é˜¿é‡Œçš„é¢è¯•ä½“éªŒæ˜¯è¿™äº›å¤§åŽ‚é‡Œè¾¹æœ€å¥½çš„ï¼Œå¯¹æŽ¥äººå¯¹é¢è¯•è€…ä¹Ÿå¾ˆä¸Šå¿ƒï¼Œä¸è¿‡æˆ‘ç¬¬ä¸€è½®é¢è¯•å°±è¿Ÿåˆ°äº†ðŸ˜‚é˜¿é‡Œçš„é—®é¢˜æ›´åŠ çµæ´»ä¸€äº›ï¼Œçœ‹ä¸­é¢è¯•è€…ä¸´åœºåº”å˜ï¼Œè§£å†³é—®é¢˜çš„èƒ½åŠ›ã€‚åŒæ—¶éœ€è¦åšå¥½æ‰‹å†™ç®—æ³•é¢˜çš„å‡†å¤‡ã€‚ç›®å‰è¿˜ä¸çŸ¥é“æœ‰æ²¡æœ‰äºŒè½®ï¼Œè‹¥æœ‰è¿˜ä¼šæ›´æ–°ã€‚ äº¬ä¸œï¼š äº¬ä¸œä¸€ä¸‹åˆé¢äº†ä¸‰è½®ï¼Œç¬¬ä¸€è½®ã€ç¬¬äºŒè½®æŠ€æœ¯ã€ç¬¬ä¸‰è½®bossã€‚äº¬ä¸œé—®çš„æé—®æ¯”è¾ƒå…¨é¢ï¼Œjavaçš„å„ä¸ªæ–¹å‘éƒ½é—®åˆ°äº†ï¼Œjvmã€è®¾è®¡æ¨¡å¼ã€çº¿ç¨‹æ± ã€hashmapæºç ã€springã€mysqlå­˜å‚¨å¼•æ“Žã€ç´¢å¼•çš„åŽŸç†ç­‰ç­‰ã€‚ç›®å‰è¿˜åœ¨ç­‰äº¬ä¸œèµ°æµç¨‹ã€‚ ä¾¿åˆ©èœ‚ï¼š 1ã€synchronizedå’Œvolatileçš„åŒºåˆ«ï¼Ÿ 2ã€mysqlçš„äº‹ç‰©éš”ç¦»çº§åˆ«ï¼Ÿ 3ã€è®²ä¸€è®²hashmapï¼Ÿ&nbsp; 4ã€å‡è®¾hashmapçš„ä¸­é“¾è¡¨ç»“æž„ä¸è¦äº†ï¼Œåªä¿ç•™æ•°ç»„ç»“æž„ï¼Œå½“putåˆ°hashmapçš„æ—¶å€™äº§ç”Ÿå†²çªäº†ï¼Œå°†å†²çªçš„entrysetå­˜åˆ°æ•°ç»„ç©ºä½™çš„åœ°æ–¹ã€‚é—®ï¼šè¿™ç§æ–¹å¼æœ‰ä»€ä¹ˆä¸å¥½ï¼Ÿ 5ã€å‡è®¾å®šä¹‰ä¸€ä¸ªæ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„é‡Œè¾¹å…¨éƒ¨éƒ½æ˜¯å­˜å‚¨çš„æ•°å­—ï¼Œä¸”å…¶ä¸­æœ‰ä¸€ä¸ªæ•°å­—å‡ºçŽ°çš„æ¬¡æ•°æ¯”å…¶ä»–æ•°å­—å‡ºçŽ°çš„æ¬¡æ•°åŠ èµ·æ¥è¿˜å¤šï¼Œæ€Žä¹ˆæ‰¾åˆ°è¿™ä¸ªæ•°å­—ï¼Ÿæ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘ï¼Ÿç©ºé—´å¤æ‚åº¦æ˜¯å¤šå°‘ï¼Ÿ 6ã€javaä¸­æœ€å¤§çš„åŸºæœ¬ç±»åž‹æ˜¯64ä½çš„ï¼Œé‚£ä¹ˆå¦‚ä½•å°†ä¸¤ä¸ª128ä½çš„æ•°è¿›è¡ŒåŠ å‡è¿ç®—ï¼Ÿ 7ã€çº¿ç¨‹æ± è®²ä¸€ä¸‹ï¼Ÿ 8ã€å¹´è½»ä»£ä¸ºä»€ä¹ˆä¸ç”¨æ ‡è®°-æ•´ç†ç®—æ³•ï¼Ÿ 9ã€å‡è®¾ä¸€ä¸ªå­—æ®µå·²ç»åŠ äº†ç´¢å¼•ï¼Œé‚£ä¹ˆå¯¹è¿™ä¸ªå­—æ®µä½¿ç”¨likeçš„æ—¶å€™ï¼Œè¿™æ—¶ç´¢å¼•è¿˜æœ‰æ•ˆå—? ä¾¿åˆ©èœ‚é¢äº†ä¸¤è½®ï¼Œè¿˜æœ‰å¾ˆå¤šé—®é¢˜è®°ä¸èµ·æ¥äº† é“¾å®¶ 1ã€ç®€å•åšä¸€ä¸‹è‡ªæˆ‘ä»‹ç» 2ã€ ç”¨è¿‡å“ªäº›javaçš„apiï¼Œé›†åˆæ¡†æž¶ï¼Ÿ Listã€setã€mapï¼Ÿ 3ã€çŸ¥é“arrayListæ‰©å®¹çš„åŽŸç†å—ï¼Ÿ 4ã€è®²ä¸€ä¸‹jvmçš„ç›¸å…³å†…å®¹ï¼Ÿ&nbsp; 5ã€Hashmapçš„çº¿ç¨‹ä¸å®‰å…¨ä½“çŽ°åœ¨å“ªäº›åœ°æ–¹ï¼Ÿ 6ã€jvmè°ƒä¼˜éƒ½æœ‰å“ªäº›å‚æ•°ï¼Ÿ 7ã€è¯´æ˜Žæ—¶å€™ç”¨ç´¢å¼•ï¼Ÿå»ºç«‹ç´¢å¼•çš„æ—¶å€™éœ€è¦è€ƒè™‘äº›ä»€ä¹ˆï¼Ÿ 8ã€Synchronizedå’ŒStatic SynchronizedåŒºåˆ« ï¼Ÿ 9ã€å¦‚ä½•è§£å†³sessionå…±äº«çš„é—®é¢˜ï¼Ÿ 10ã€æœ‰ç”¨è¿‡spring cloudå—ï¼Ÿè®²ä¸€ä¸‹ï¼Ÿ 11ã€å½“ä¸€ä¸ªçº¿ç¨‹è¿›å…¥ä¸€ä¸ªå¯¹è±¡çš„ä¸€ä¸ªsynchronizedæ–¹æ³•åŽï¼Œå…¶å®ƒçº¿ç¨‹æ˜¯å¦å¯è¿›å…¥æ­¤å¯¹è±¡çš„å…¶å®ƒæ–¹æ³•? 12ã€å¦‚ä½•åœæ­¢ä¸€ä¸ªçº¿ç¨‹ï¼Ÿ å‰©ä¸‹çš„è®°ä¸å¾—äº†]]></content>
      <categories>
        <category>java</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[æµ…æžjavaè¯­è¨€ä¸­é”æœºåˆ¶]]></title>
    <url>%2F2018%2F03%2F17%2F%E6%B5%85%E6%9E%90java%E8%AF%AD%E8%A8%80%E4%B8%AD%E9%94%81%E6%9C%BA%E5%88%B6%2F</url>
    <content type="text"><![CDATA[æµ…æžjavaè¯­è¨€ä¸­é”æœºåˆ¶ å¤šä»»åŠ¡å¹¶å‘å·²ç»æ˜¯è®¡ç®—æœºä¸­ä¸å¯ç¼ºå°‘çš„ä¸€éƒ¨åˆ†äº†ï¼Œå¾ˆå¤šæ—¶å€™è®©è®¡ç®—æœºåŒä¸€æ—¶åˆ»åšå‡ ä»¶äº‹ï¼Œä¸ä»…ä»…æ˜¯å› ä¸ºè¿ç®—èƒ½åŠ›æé«˜äº†ï¼Œè¿˜æœ‰ä¸€ä¸ªé‡è¦åŽŸå› å°±æ˜¯cpuçš„è¿ç®—é€Ÿåº¦å’Œå­˜å‚¨ã€é€šä¿¡å­ç³»ç»Ÿé€Ÿåº¦å·®å¼‚å¤ªå¤§ã€‚æ‰€ä»¥ä¸å¾—ä¸â€œåŽ‹æ¦¨â€è¿ç®—èƒ½åŠ›ã€‚ è€ŒåŽ‹æ¦¨è¿ç®—èƒ½åŠ›å°±ä¸å¾—ä¸ç”¨åˆ°å¤šçº¿ç¨‹ï¼Œåœ¨å•çº¿ç¨‹çš„æƒ…å†µä¸‹è¿ç®—çŽ¯å¢ƒè¾ƒä¸ºç®€å•ï¼Œè€Œåˆ°äº†å¤šçº¿ç¨‹æƒ…å†µä¸‹åˆ™ä¼šäº§ç”Ÿå¾ˆå¤šæ„æƒ³ä¸åˆ°çš„ç»“æžœã€‚è¦ä¿è¯åœ¨å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹å„ä¸ªçº¿ç¨‹â€œç›¸å®‰æ— äº‹â€çš„è¿è¡Œï¼Œåˆ™å¿…é¡»ç”¨åˆ°é”æœºåˆ¶ã€‚ javaå†…å­˜æ¨¡åž‹åœ¨è®²é”æœºåˆ¶ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»å…ˆäº†è§£jvmçš„å†…å­˜æ¨¡åž‹ã€‚ æ¨¡åž‹å›¾å¦‚ä¸‹ javaçº¿ç¨‹è¯»å†™æ•°æ®æ˜¯ç›´æŽ¥è¯»å†™å·¥ä½œå†…å­˜ä¸­çš„æ•°æ®ï¼Œå·¥ä½œå†…å­˜å¯èƒ½å¹¶éžæ˜¯ç‰©ç†å†…å­˜ï¼Œä¸ºäº†æ€§èƒ½å¾ˆå¤§å¯èƒ½æ˜¯é«˜é€Ÿç¼“å­˜å’Œå¯„å­˜å™¨ã€‚çº¿ç¨‹é—´é€šä¿¡å¿…é¡»é€šè¿‡å†…å†…å­˜æ¥å®žçŽ°ã€‚å‡è®¾åˆå§‹å€¼x = 0ï¼Œ ç„¶åŽçº¿ç¨‹Aå°†xå€¼ä¿®æ”¹ä¸º1ï¼Œ é‚£ä¹ˆBè¦çŸ¥é“æ­¤æ—¶Aä¿®æ”¹è¿‡åŽçš„å€¼å°±å¿…é¡»æ˜¯Açº¿ç¨‹å…ˆå°†å€¼ä»Žå·¥ä½œå†…å­˜ä¸­å†™å…¥åˆ°ä¸»å†…å­˜ï¼Œç„¶åŽçº¿ç¨‹Bå†ä»Žä¸»å†…å­˜ä¸­è¯»å–xçš„å€¼ï¼Œå¦‚æ­¤å®Œæˆçº¿ç¨‹é—´çš„é€šä¿¡â€“å…±äº«å†…å­˜çš„æ–¹å¼ã€‚ JVMå†…å­˜æ¨¡åž‹å›´ç»•ä¸‰ä¸ªç‚¹è¿›è¡Œï¼š åŽŸå­æ€§ã€å¯è§æ€§ã€æœ‰åºæ€§ã€‚ åŽŸå­æ€§ï¼šä¸å¯åˆ†å‰²ï¼Œjavaä¸­çš„åŸºæœ¬ç±»åž‹çš„è¯»å†™åŸºæœ¬å¯ä»¥è®¤ä¸ºæ˜¯åŽŸå­æ“ä½œï¼Œå¦‚æžœè¦åœ¨æ›´å¤§èŒƒå›´å†…ä¿è¯åŽŸå­æ€§ï¼Œå¯ä»¥æ˜¯ç”¨synchronizedæ¥ä¿è¯åŽŸå­æ€§ã€‚ å¯è§æ€§ï¼šå½“ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹å…±äº«å˜é‡çš„å€¼ï¼Œå…¶ä»–çº¿ç¨‹èƒ½å¤Ÿç«‹å³å¾—çŸ¥è¿™ä¸ªå˜åŒ–ã€‚volatileã€synchronizedã€finaléƒ½èƒ½å¤Ÿä¿è¯å†…å­˜å¯è§æ€§ã€‚volatileèƒ½å¤Ÿä¿è¯ä¸€ä¸ªè¢«ä¿®æ”¹ä¹‹åŽç«‹å³åŒæ­¥åˆ°ä¸»å†…å­˜ä¸­ï¼Œç„¶åŽå…¶ä»–çº¿ç¨‹ä½¿ç”¨åˆ°è¢«volatileä¿®é¥°çš„å˜é‡æ—¶ï¼Œå¿…é¡»å…ˆä»Žä¸»å†…å­˜ä¸­åŒæ­¥åˆ°å·¥ä½œå†…å­˜ä¸­ã€‚synchronizedä¿è¯å¯è§æ€§æ˜¯ä¸€ä¸ªçº¿ç¨‹unlockæ—¶ï¼Œå¿…é¡»å°†ä¿®æ”¹çš„å€¼åŒæ­¥åˆ°ä¸»å†…å­˜ä¸­ï¼Œä¸‹ä¸€ä¸ªèŽ·å–åˆ°lockçš„çº¿ç¨‹å¿…é¡»å…ˆåŒæ­¥ä¸»å†…å­˜æ•°æ®ï¼Œä»Žè€Œä¿è¯å¯è§æ€§ã€‚ æœ‰åºæ€§ï¼šå¦‚æžœåœ¨æœ¬çº¿ç¨‹å†…è§‚å¯Ÿï¼Œæ‰€æœ‰æ“ä½œéƒ½æ˜¯æœ‰åºçš„ï¼›å¦‚æžœåœ¨å¦å¤–ä¸€ä¸ªçº¿ç¨‹ä¸­è§‚å¯Ÿå¦ä¸€ä¸ªçº¿ç¨‹ï¼Œæ‰€æœ‰æ“ä½œéƒ½æ˜¯æ— åºçš„ã€‚ å‰é¢åŠå¥æ„æ€æ˜¯åœ¨åŒä¸€ä¸ªçº¿ç¨‹å†…è¡¨çŽ°ä¸ºä¸²è¡Œçš„è¯­ä¹‰ï¼ŒåŽåŠå¥æ˜¯â€œæŒ‡ä»¤é‡æŽ’åºâ€çŽ°è±¡å’Œâ€œå·¥ä½œå†…å­˜ä¸Žä¸»å†…å­˜ä¹‹é—´å»¶è¿Ÿâ€çŽ°è±¡ã€‚ å…ˆè¡Œå‘ç”Ÿï¼šæŒ‡çš„æ˜¯å¦‚æžœAå…ˆè¡Œå‘ç”ŸäºŽBï¼Œé‚£ä¹ˆæ“ä½œAçš„å½±å“èƒ½å¤Ÿè¢«æ“ä½œBè§‚å¯Ÿåˆ°ï¼Œâ€œå½±å“â€åŒ…æ‹¬ä¿®æ”¹äº†å…±äº«å†…å­˜å˜é‡çš„å€¼ã€å‘é€çš„æ¶ˆæ¯ã€è°ƒç”¨æ–¹æ³•ç­‰ã€‚ç”±äºŽä¼˜åŒ–é‡æŽ’åºçš„åŽŸå› ï¼Œæ“ä½œä¹‹é—´çš„æ—¶é—´ä¸Šå…ˆåŽæ‰§è¡Œå’Œâ€œå…ˆè¡Œå‘ç”Ÿâ€å¹¶æ²¡æœ‰å…³ç³»ã€‚ volatile éœ€è¦æ³¨æ„çš„æ˜¯volatileå¹¶ä¸æ˜¯é”ï¼Œå®ƒæ˜¯jvmæä¾›çš„æœ€è½»é‡çº§çš„åŒæ­¥æœºåˆ¶ã€‚å¤§å¤šæ•°äººå¯¹volatileçš„åŽŸç†å’Œä½¿ç”¨å¹¶ä¸æ¸…æ¥šã€‚volatileä¸»è¦å…·å¤‡ä¸¤ä¸ªç‰¹æ€§ï¼š ä¿è¯å†…å­˜å¯è§æ€§ ç¦æ­¢æŒ‡ä»¤é‡æŽ’åº å†…å­˜å¯è§æ€§è¢«volatileä¿®é¥°çš„å˜é‡ï¼Œè¢«çº¿ç¨‹ä¿®æ”¹ä¹‹åŽä¼šç«‹å³ä»Žå·¥ä½œå†…å­˜ä¸­åŒæ­¥åˆ°ä¸»å†…å­˜ä¸­ï¼Œçº¿ç¨‹è‹¥è¦è¯»è¢«volatileä¿®é¥°çš„å˜é‡åˆ™å¿…é¡»å…ˆä»Žä¸»å†…å­˜ä¸­åŒæ­¥æœ€æ–°çš„å€¼ï¼Œè¿™æ ·å°±ä¿è¯äº†çº¿ç¨‹ä¹‹é—´å˜é‡çš„åŒæ­¥ã€‚ä½†æ˜¯çº¿ç¨‹ä¹‹é—´å˜é‡çš„å€¼å¹¶éžç«‹å³åŒæ­¥çš„ï¼Œå„ä¸ªçº¿ç¨‹ä¹‹é—´çš„å€¼å¯èƒ½å­˜åœ¨ä¸ä¸€è‡´çš„æƒ…å†µï¼Œä½†æ˜¯ç”±äºŽæ¯ä¸€æ¬¡è¯»çš„æ—¶å€™éƒ½ä»Žä¸»å†…å­˜ä¸­æ›´æ–°ï¼Œå› æ­¤ä¹Ÿä¸è®¤ä¸ºå­˜æœ‰ä¸ä¸€è‡´çš„æƒ…å†µã€‚ ä½†æ˜¯ç”±äºŽvolatileåªèƒ½ä¿è¯å¯è§æ€§ï¼Œå¹¶ä¸ä¿è¯åŽŸå­æ€§ï¼Œæ‰€ä»¥åœ¨ä¸ç¬¦åˆä¸‹é¢çš„ä¸¤ç§æƒ…å†µè¿˜æ˜¯éœ€è¦é€šè¿‡åŠ é”æ¥ä¿è¯åŽŸå­æ€§ã€‚ è¿ç®—ç»“æžœå¹¶ä¸ä¾èµ–å½“å‰å€¼ ä¾‹å¦‚ï¼š a++ ã€ b += 3 å˜é‡ä¸éœ€è¦å‚åŠ å…¶ä»–çŠ¶æ€å˜é‡å…±åŒå‚ä¸Žä¸å˜çº¦æŸã€‚ ä¾‹å¦‚ï¼š low &lt; up ç¦æ­¢æŒ‡ä»¤é‡æŽ’åº çŽ°ä»£cpuä¸ºäº†æé«˜æ‰§è¡Œæ•ˆçŽ‡ï¼Œä¸€ä¸ªæŒ‡ä»¤çš„æ‰§è¡Œè¢«åˆ†æˆï¼šå–æŒ‡ã€è¯‘ç ã€è®¿å­˜ã€æ‰§è¡Œã€å†™å›žã€ç­‰è‹¥å¹²ä¸ªé˜¶æ®µã€‚ç„¶åŽï¼Œå¤šæ¡æŒ‡ä»¤å¯ä»¥åŒæ—¶å­˜åœ¨äºŽæµæ°´çº¿ä¸­ï¼ŒåŒæ—¶è¢«æ‰§è¡Œã€‚ä½†æ˜¯æ— è®ºæ€Žæ ·é‡æŽ’åºå¿…é¡»è¦æ»¡è¶³as-if-serialè¯­ä¹‰ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨å•çº¿ç¨‹çš„æƒ…å†µä¸‹ç¼–ç¨‹å¹¶ä¸éœ€è¦è€ƒè™‘ä»£ç æ‰§è¡Œé¡ºåºçš„é—®é¢˜ï¼Œå› ä¸ºæ— è®ºæ€Žæ ·æŽ’åºï¼Œæœ€åŽæ‰§è¡Œçš„ç»“æžœæ€»æ˜¯å’Œé¡ºåºæ‰§è¡Œçš„ç»“æžœä¸€è‡´ã€‚ ç¦æ­¢é‡æŽ’åºæ—¶å€™é€šè¿‡å†…å­˜å±éšœæ¥å®žçŽ°çš„ï¼Œå³æ˜¯è¯´é‡æŽ’åºæ—¶ä¸èƒ½è®²åŽé¢çš„æŒ‡ä»¤é‡æŽ’åºåˆ°å†…å­˜å±éšœä¹‹å‰çš„ä½ç½®ã€‚è‹¥åªæœ‰ä¸€ä¸ªcpuè®¿é—®å†…å­˜æ—¶å¹¶ä¸éœ€è¦å†…å­˜å±éšœï¼Œè‹¥å¤šä¸ªcpuè®¿é—®å†…å­˜æ—¶ï¼Œå¹¶ä¸”ä¸€ä¸ªæ­£åœ¨è§‚å¯Ÿå¦å¤–ä¸€ä¸ªæ—¶ï¼Œå°±éœ€è¦å†…å­˜å±éšœæ¥ä¿è¯ä¸€è‡´æ€§ã€‚ ä¸‹é¢æ‘˜è‡ªã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹ï¼š â€œè§‚å¯ŸåŠ å…¥volatileå…³é”®å­—å’Œæ²¡æœ‰åŠ å…¥volatileå…³é”®å­—æ—¶æ‰€ç”Ÿæˆçš„æ±‡ç¼–ä»£ç å‘çŽ°ï¼ŒåŠ å…¥volatileå…³é”®å­—æ—¶ï¼Œä¼šå¤šå‡ºä¸€ä¸ªlockå‰ç¼€æŒ‡ä»¤â€lockå‰ç¼€æŒ‡ä»¤å®žé™…ä¸Šç›¸å½“äºŽä¸€ä¸ªå†…å­˜å±éšœï¼ˆä¹Ÿæˆå†…å­˜æ …æ ï¼‰ï¼Œå†…å­˜å±éšœä¼šæä¾›3ä¸ªåŠŸèƒ½ï¼š 1ã€å®ƒç¡®ä¿æŒ‡ä»¤é‡æŽ’åºæ—¶ä¸ä¼šæŠŠå…¶åŽé¢çš„æŒ‡ä»¤æŽ’åˆ°å†…å­˜å±éšœä¹‹å‰çš„ä½ç½®ï¼Œä¹Ÿä¸ä¼šæŠŠå‰é¢çš„æŒ‡ä»¤æŽ’åˆ°å†…å­˜å±éšœçš„åŽé¢ï¼›å³åœ¨æ‰§è¡Œåˆ°å†…å­˜å±éšœè¿™å¥æŒ‡ä»¤æ—¶ï¼Œåœ¨å®ƒå‰é¢çš„æ“ä½œå·²ç»å…¨éƒ¨å®Œæˆï¼› 2ï¼‰å®ƒä¼šå¼ºåˆ¶å°†å¯¹ç¼“å­˜çš„ä¿®æ”¹æ“ä½œç«‹å³å†™å…¥ä¸»å­˜ï¼› 3ï¼‰å¦‚æžœæ˜¯å†™æ“ä½œï¼Œå®ƒä¼šå¯¼è‡´å…¶ä»–CPUä¸­å¯¹åº”çš„ç¼“å­˜è¡Œæ— æ•ˆã€‚ synchronized synchronizedæ˜¯æˆ‘ä»¬æœ€å¸¸ä½¿ç”¨çš„åŠ é”æ–¹å¼ï¼Œä¹Ÿæ˜¯å®˜æ–¹æŽ¨èçš„æ–¹å¼ã€‚ synchronizedæœ€å¸¸ç”¨çš„äº’æ–¥æœ‰æ®µï¼Œsynchronizedç»è¿‡ç¼–è¯‘ä¹‹åŽï¼Œä¼šåœ¨åŒæ­¥å—å‰åŽåˆ†åˆ«å½¢æˆmonitorenterå’Œmonitorexitä¸¤ä¸ªå­—èŠ‚ç æŒ‡ä»¤ã€‚è¿™ä¸¤ä¸ªæŒ‡ä»¤éƒ½éœ€è¦æ˜Žç¡®æŒ‡å®šä¸€ä¸ªå¼•ç”¨ç±»åž‹çš„å¯¹è±¡å‚æ•°æ¥ç¡®å®šéœ€è¦é”å®šå’Œè§£é”çš„å¯¹è±¡ã€‚ æ ¹æ®è™šæ‹Ÿæœºçš„è§„èŒƒè¦æ±‚ï¼Œåœ¨æ‰§è¡ŒmonitorenteræŒ‡ä»¤æ—¶ï¼Œé¦–å…ˆè¦å°è¯•èŽ·å–å¯¹è±¡çš„é”ï¼Œå¦‚æžœå¯¹è±¡æ²¡æœ‰è¢«é”å®šï¼Œæˆ–è€…å½“å‰çº¿ç¨‹å·²ç»æ‹¥æœ‰é‚£ä¸ªå¯¹è±¡çš„é”ï¼ŒæŠŠé”çš„è®¡æ•°å™¨åŠ 1ï¼Œç›¸åº”çš„ï¼Œå¦‚æžœæ‰§è¡ŒmonitorexitæŒ‡ä»¤å°±ä¼šå°†é”è®¡æ•°å™¨å‡1ï¼Œå½“è®¡æ•°å™¨ä¸º0æ—¶ï¼Œé”å°±è¢«é‡Šæ”¾ã€‚å¦‚æžœèŽ·å–å¯¹è±¡é”å¤±è´¥ï¼Œé‚£ä¹ˆå½“å‰çº¿ç¨‹å°±è¦ä¸€ç›´é˜»å¡žç­‰å¾…ï¼Œç›´åˆ°å¯¹è±¡é”è¢«å¦å¤–ä¸€ä¸ªçº¿ç¨‹é‡Šæ”¾ä¸ºæ­¢ã€‚åŒæ—¶Synchronizedé”æ˜¯å¯é‡å…¥çš„ï¼Œå‡è®¾å¯¹è±¡personæœ‰ä¸¤ä¸ªè¢«Synchronizedä¿®é¥°çš„åŒæ­¥æ–¹æ³•Mã€Nï¼Œå½“çº¿ç¨‹æ‰§è¡Œå®ŒMä¹‹åŽè¿˜å¯ä»¥æŽ¥ç€æ‰§è¡ŒNï¼Œæ‰€ä»¥è¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šé¿å…äº†æ­»é”ï¼Œ å¦‚ä½•ä¿è¯å¯è§æ€§ï¼Ÿ å½“ä¸€ä¸ªçº¿ç¨‹é‡Šæ”¾é”çš„æ—¶å€™ï¼Œå°†è‡ªå·±ä¿®æ”¹çš„æ•°æ®ä»Žå·¥ä½œå†…å­˜æ›´æ–°åˆ°ä¸»å†…å­˜ä¸­ï¼ŒèŽ·å–é”é‚£ä¸ªçº¿ç¨‹ä¹Ÿä¼šå…ˆå°†ä¸»å†…å­˜ä¸­çš„æ•°æ®åŒæ­¥åˆ°ä¸»æœºçš„å·¥ä½œå†…å­˜ä¸­ï¼Œå¦‚æ­¤å°±ä¿è¯äº†å†…å­˜å¯è§æ€§ã€‚ è‡ªæ—‹é” Javaçš„çº¿ç¨‹æ˜¯æ˜ å°„åˆ°æ“ä½œç³»ç»Ÿçš„åŽŸç”Ÿçº¿ç¨‹ä¹‹ä¸Šçš„ï¼Œå¦‚æžœè¦é˜»å¡žæˆ–å”¤é†’ä¸€ä¸ªçº¿ç¨‹ï¼Œéƒ½éœ€è¦æ“ä½œç³»ç»Ÿæ¥å¸®å¿™å®Œæˆï¼Œè¿™å°±éœ€è¦ä»Žç”¨æˆ·æ€è½¬æ¢åˆ°æ ¸å¿ƒæ€ä¸­ï¼Œå› æ­¤çŠ¶æ€è£…æ¢éœ€è¦è€—è´¹å¾ˆå¤šçš„å¤„ç†å™¨æ—¶é—´ï¼Œå¯¹äºŽä»£ç ç®€å•çš„åŒæ­¥å—çŠ¶æ€è½¬æ¢æ¶ˆè€—çš„æ—¶é—´æœ‰å¯èƒ½æ¯”ç”¨æˆ·ä»£ç æ‰§è¡Œçš„æ—¶é—´è¿˜è¦é•¿ã€‚ é‚£ä¹ˆå°±å¯ä»¥é‡‡ç”¨è‡ªæ—‹é”çš„æ–¹å¼ï¼Œå‡è®¾è¿™ä¸ªæ—¶å€™æœ‰Açº¿ç¨‹æŒæœ‰é”ï¼ŒBçº¿ç¨‹ç­‰å¾…é”ï¼Œè‹¥æ˜¯Açº¿ç¨‹æŒæœ‰é”çš„æ—¶é—´å¹¶ä¸é•¿ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™Bçº¿ç¨‹ä¸ä¼šè¢«é˜»å¡žè€Œæ˜¯é‡‡ç”¨â€œå¿™ç­‰â€çš„æ–¹å¼ç­‰å¾…é”è¢«é‡Šæ”¾ã€‚ä»Žè€Œé¿å…äº†æ“ä½œç³»ç»Ÿåˆ‡æ¢ç”¨æˆ·æ€ã€å†…æ ¸æ€çš„æ¶ˆè€—ã€‚ å¸¦æ¥çš„é—®é¢˜ï¼š1ã€å¯èƒ½å ç”¨å¤ªå¤šcpuèµ„æºï¼š è‹¥æ˜¯Açº¿ç¨‹åœ¨çŸ­æ—¶é—´å†…å¹¶ä¸é‡Šæ”¾é”ï¼Œé‚£ä¹ˆè¿™ç§æ–¹å¼å¯èƒ½å ç”¨å¤ªå¤šcpuæ—¶é—´ï¼Œå¯¼è‡´cpuèµ„æºæµªè´¹ã€‚å› æ­¤jvmæœ‰ä¸€ä¸ªé»˜è®¤è‡ªæ—‹æ¬¡æ•°é™åˆ¶ï¼ˆé»˜è®¤æ˜¯10æ¬¡ï¼Œå¯ä»¥ä½¿ç”¨-XX:PreBlockSpinæ¥æ›´æ”¹ï¼‰ï¼Œè‹¥è¿˜æ˜¯æ²¡æœ‰èŽ·å–åˆ°é”ï¼Œé‚£å°±åº”è¯¥ä½¿ç”¨ä¼ ç»Ÿçš„æ–¹å¼åŽ»æŒ‚èµ·çº¿ç¨‹äº†ã€‚ 2ã€æ­»é”é—®é¢˜ å‡è®¾æœ‰æœ‰ä¸€ä¸ªçº¿ç¨‹è¿è¡Œåœ¨ä¸€ä¸ªå¤„ç†å™¨ä¸Šï¼Œ è€Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹æƒ³èŽ·å–è¿™ä¸ªå¤„ç†å™¨çš„é”ï¼Œ é‚£ä¹ˆä»–å°†ä¸€ç›´æŒæœ‰è¿™ä¸ªcpuè¿›è¡Œè‡ªæ—‹æ“ä½œï¼Œä½ çš„çº¿ç¨‹ä»£ç åˆ™æ°¸è¿œæ— æ³•èŽ·å¾—æœºä¼šé‡Šæ”¾é”ï¼ŒäºŽæ˜¯é™·å…¥æ­»é”ã€‚ è‡ªé€‚åº”è‡ªæ—‹ åœ¨jdk1.6ä¸­å¼•å…¥äº†è‡ªé€‚åº”çš„è‡ªæ—‹é”ã€‚è‡ªé€‚åº”æ„å‘³ç€è‡ªæ—‹çš„æ—¶é—´ä¸åœ¨å›ºå®šäº†ï¼Œè€Œæ˜¯ç”±å‰ä¸€æ¬¡åœ¨åŒä¸€ä¸ªé”ä¸Šçš„è‡ªæ—‹æ—¶é—´åŠé”çš„æ‹¥æœ‰è€…çš„çŠ¶æ€æ¥å®žçŽ°ã€‚å¦‚æžœåœ¨åŒä¸€ä¸ªé”å¯¹è±¡åˆšåˆšæˆåŠŸèŽ·å–åˆ°äº†é”ï¼Œå¹¶ä¸”æŒæœ‰é”çš„çº¿ç¨‹æ­£åœ¨è¿è¡Œä¸­ï¼Œé‚£ä¹ˆjvmä¹…è®¤ä¸ºè¿™æ¬¡ä¹Ÿèƒ½å¤ŸèŽ·å–æˆåŠŸï¼Œé‚£ä¹ˆä¹…å¯èƒ½å¤šå°è¯•å‡ æ¬¡æ¥èŽ·å–ï¼Œæ¯”æ–¹è¯´50æ¬¡ã€‚è‹¥æ˜¯å¯¹äºŽæŸä¸€ä¸ªé”ï¼Œè‡ªé€‚åº”é”å¾ˆå°‘æˆåŠŸè¿‡ï¼Œé‚£ä¹ˆjvmå¯èƒ½å°±å¿½ç•¥æŽ‰è‡ªæ—‹çš„è¿‡ç¨‹è€Œç›´æŽ¥æŒ‚èµ·ã€‚ é”æ¶ˆé™¤ é”æ¶ˆé™¤æ˜¯Javaè™šæ‹Ÿæœºåœ¨JITç¼–è¯‘æ˜¯ï¼Œé€šè¿‡å¯¹è¿è¡Œä¸Šä¸‹æ–‡çš„æ‰«æï¼ŒåŽ»é™¤ä¸å¯èƒ½å­˜åœ¨å…±äº«èµ„æºç«žäº‰çš„é”ï¼Œé€šè¿‡é”æ¶ˆé™¤ï¼Œå¯ä»¥èŠ‚çœæ¯«æ— æ„ä¹‰çš„è¯·æ±‚é”æ—¶é—´ã€‚ åœ¨åŠ¨æ€ç¼–è¯‘åŒæ­¥å—çš„æ—¶å€™ï¼ŒJITç¼–è¯‘å™¨å¯ä»¥å€ŸåŠ©ä¸€ç§è¢«ç§°ä¸ºé€ƒé€¸åˆ†æžï¼ˆEscape Analysisï¼‰çš„æŠ€æœ¯æ¥åˆ¤æ–­åŒæ­¥å—æ‰€ä½¿ç”¨çš„é”å¯¹è±¡æ˜¯å¦åªèƒ½å¤Ÿè¢«ä¸€ä¸ªçº¿ç¨‹è®¿é—®è€Œæ²¡æœ‰è¢«å‘å¸ƒåˆ°å…¶ä»–çº¿ç¨‹ã€‚å¦‚æžœåŒæ­¥å—æ‰€ä½¿ç”¨çš„é”å¯¹è±¡é€šè¿‡è¿™ç§åˆ†æžè¢«è¯å®žåªèƒ½å¤Ÿè¢«ä¸€ä¸ªçº¿ç¨‹è®¿é—®ï¼Œé‚£ä¹ˆJITç¼–è¯‘å™¨åœ¨ç¼–è¯‘è¿™ä¸ªåŒæ­¥å—çš„æ—¶å€™å¹¶ä¸ç”Ÿæˆsynchronizedæ‰€è¡¨ç¤ºçš„é”çš„ç”³è¯·ä¸Žé‡Šæ”¾å¯¹åº”çš„æœºå™¨ç ï¼Œè€Œä»…ç”ŸæˆåŽŸä¸´ç•ŒåŒºä»£ç å¯¹åº”çš„æœºå™¨ç ï¼Œè¿™å°±é€ æˆäº†è¢«åŠ¨æ€ç¼–è¯‘çš„å­—èŠ‚ç å°±åƒæ˜¯ä¸åŒ…å«monitorenterï¼ˆç”³è¯·é”ï¼‰å’Œmonitorexitï¼ˆé‡Šæ”¾é”ï¼‰è¿™ä¸¤ä¸ªå­—èŠ‚ç æŒ‡ä»¤ä¸€æ ·ï¼Œå³æ¶ˆé™¤äº†é”çš„ä½¿ç”¨ã€‚è¿™ç§ç¼–è¯‘å™¨ä¼˜åŒ–å°±è¢«ç§°ä¸ºé”æ¶ˆé™¤ï¼ˆLock Elisionï¼‰ï¼Œå®ƒä½¿å¾—ç‰¹å®šæƒ…å†µä¸‹æˆ‘ä»¬å¯ä»¥å®Œå…¨æ¶ˆé™¤é”çš„å¼€é”€ã€‚ ç¤ºæ„å›¾ï¼š é”ç²—åŒ– é”ç²—åŒ–ï¼ˆLock Coarsening/Lock Mergingï¼‰æ˜¯JITç¼–è¯‘å™¨å¯¹å†…éƒ¨é”çš„å…·ä½“å®žçŽ°æ‰€åšçš„ä¸€ç§ä¼˜åŒ–ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬åŠ é”ä¼šå°½é‡é”ä½æ›´å°çš„ä»£ç å—ï¼Œ è¿™æ ·ä½¿å¾—éœ€è¦åŒæ­¥çš„æ“ä½œæ•°é‡å°½å¯èƒ½å°ï¼Œå¦‚æžœå­˜åœ¨ç«žäº‰é‚£ä¹ˆä¹Ÿèƒ½å°½å¿«æ‹¿åˆ°é”ã€‚åœ¨é€šå¸¸æƒ…å†µä¸‹è¿™éƒ½æ˜¯æ­£ç¡®çš„ï¼Œä½†æ˜¯å¦‚æžœåå¤å¯¹åŒä¸€ä¸ªå¯¹è±¡åŠ é”ï¼Œç”šè‡³åŠ é”æ“ä½œå‡ºçŽ°åœ¨äº†å¾ªçŽ¯ä½“ä¸­ï¼Œé¢‘ç¹çš„è¿›è¡Œäº’æ–¥æ“ä½œä¹Ÿä¼šå¯¼è‡´ä¸å¿…è¦çš„æ€§èƒ½æŸè€—ã€‚å¦‚æžœè™šæ‹ŸæœºæŽ¢æµ‹åˆ°æœ‰è¿™æ ·çš„æƒ…å†µçš„è¯ï¼Œä¼šæŠŠåŠ é”åŒæ­¥çš„èŒƒå›´æ‰©å±•åˆ°æ•´ä¸ªæ“ä½œåºåˆ—çš„å¤–éƒ¨ï¼Œè¿™æ ·çš„ä¸€ä¸ªé”èŒƒå›´æ‰©å±•çš„æ“ä½œå°±ç§°ä¹‹ä¸ºé”ç²—åŒ–ã€‚ åå‘é” å®ƒçš„ç›®çš„æ˜¯æ¶ˆé™¤æ•°æ®åœ¨æ— ç«žäº‰æƒ…å†µä¸‹çš„åŒæ­¥åŽŸè¯­ï¼Œè¿›ä¸€æ­¥æé«˜ç¨‹åºæ€§èƒ½ã€‚å¦‚æžœè¯´è½»é‡çº§é”æ˜¯åœ¨æ— ç«žäº‰çš„æƒ…å†µä¸‹ä½¿ç”¨CASæ“ä½œåŽ»æ¶ˆé™¤åŒæ­¥ä½¿ç”¨çš„äº’æ–¥é‡ï¼Œé‚£åå‘é”å°±æ˜¯åœ¨æ— ç«žäº‰çš„æƒ…å†µä¸‹æŠŠæ•´ä¸ªåŒæ­¥éƒ½æ¶ˆé™¤æŽ‰ï¼Œè¿žCASéƒ½ä¸åšã€‚ åå‘é”ä¼šåå‘äºŽç¬¬ä¸€ä¸ªèŽ·å¾—å®ƒçš„çº¿ç¨‹ï¼Œå¦‚æžœåœ¨æŽ¥ä¸‹æ¥çš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œè¯¥é”æ²¡æœ‰è¢«å…¶ä»–çš„çº¿ç¨‹èŽ·å–ï¼Œåˆ™æŒæœ‰åå‘é”çš„çº¿ç¨‹å°†æ°¸è¿œä¸éœ€è¦åŒæ­¥ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œé”ä¸ä»…ä¸å­˜åœ¨å¤šçº¿ç¨‹ç«žäº‰ï¼Œè€Œä¸”æ€»æ˜¯ç”±åŒä¸€çº¿ç¨‹å¤šæ¬¡èŽ·å¾—ï¼Œä¸ºäº†è®©çº¿ç¨‹èŽ·å¾—é”çš„ä»£ä»·æ›´ä½Žè€Œå¼•å…¥äº†åå‘é”ã€‚ å½“é”å¯¹è±¡ç¬¬ä¸€æ¬¡è¢«çº¿ç¨‹èŽ·å–çš„æ—¶å€™ï¼Œçº¿ç¨‹ä½¿ç”¨CASæ“ä½œæŠŠè¿™ä¸ªé”çš„çº¿ç¨‹IDè®°å½•å†å¯¹è±¡Mark Wordä¹‹ä¸­ï¼ŒåŒæ—¶ç½®åå‘æ ‡å¿—ä½1ã€‚ä»¥åŽè¯¥çº¿ç¨‹åœ¨è¿›å…¥å’Œé€€å‡ºåŒæ­¥å—æ—¶ä¸éœ€è¦è¿›è¡ŒCASæ“ä½œæ¥åŠ é”å’Œè§£é”ï¼Œåªéœ€è¦ç®€å•åœ°æµ‹è¯•ä¸€ä¸‹å¯¹è±¡å¤´çš„Mark Wordé‡Œæ˜¯å¦å­˜å‚¨ç€æŒ‡å‘å½“å‰çº¿ç¨‹çš„åå‘é”ã€‚å¦‚æžœæµ‹è¯•æˆåŠŸï¼Œè¡¨ç¤ºçº¿ç¨‹å·²ç»èŽ·å¾—äº†é” å‚è€ƒï¼š -ã€Šæ·±å…¥ç†è§£javaè™šæ‹Ÿæœºã€‹ http://blog.csdn.net/u013256816/article/details/51008443 https://segmentfault.com/a/1190000009828216 https://www.jianshu.com/p/dfbe0ebfec95 http://www.importnew.com/19472.html http://traxexer.iteye.com/blog/1846344 http://www.broadview.com.cn/article/789]]></content>
      <categories>
        <category>java</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ä»Žè¾“å…¥URLåˆ°é¡µé¢åŠ è½½å®Œæˆçš„è¿‡ç¨‹ä¸­éƒ½å‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…ï¼Ÿ]]></title>
    <url>%2F2018%2F01%2F14%2F%E5%AE%8C%E6%95%B4%E6%8F%8F%E8%BF%B0%E4%B8%80%E6%AC%A1URL%E8%AE%BF%E9%97%AE%E5%88%B0%E9%A1%B5%E9%9D%A2%E5%8A%A0%E8%BD%BD%E5%88%B0%E5%BA%95%E9%83%BD%E7%BB%8F%E5%8E%86%E4%BA%86%E4%BA%9B%E4%BB%80%E4%B9%88%2F</url>
    <content type="text"><![CDATA[ä»Žè¾“å…¥URLåˆ°é¡µé¢åŠ è½½å®Œæˆçš„è¿‡ç¨‹ä¸­éƒ½å‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…ï¼Ÿ å¹³æ—¶æˆ‘ä»¬æ€»æ˜¯ä¹ æƒ¯äº†è¾“å…¥ä¸€ä¸ªç½‘å€ï¼Œç„¶åŽå°±é™é™çš„ç­‰å¾…ç€å„ç§æ¼‚äº®çš„ç½‘é¡µå±•ç¤ºåœ¨æˆ‘ä»¬çš„é¢å‰ï¼Œä½†æ˜¯å¯èƒ½å¤§å¤šæ•°äººéƒ½æ²¡æœ‰å…³æ³¨è¿™å…¶ä¸­éƒ½ç»åŽ†äº†å“ªäº›ä»€ä¹ˆã€‚ä¸‹é¢å¤§è‡´åšä¸€ä¸ªæ€»ç»“ã€‚ ä¸€ã€é¦–å…ˆç®€å•ä»‹ç»ä¸€ä¸‹OSIä¸ƒå±‚æ¨¡åž‹ï¼š å¼€æ”¾å¼ç³»ç»Ÿäº’è”é€šä¿¡å‚è€ƒæ¨¡åž‹ï¼ˆè‹±è¯­ï¼šOpen System Interconnection Reference Modelï¼Œç¼©å†™ä¸º OSIï¼‰ï¼Œç®€ç§°ä¸ºOSIæ¨¡åž‹ï¼ˆOSI modelï¼‰ï¼Œä¸€ç§æ¦‚å¿µæ¨¡åž‹ï¼Œç”±å›½é™…æ ‡å‡†åŒ–ç»„ç»‡ï¼ˆISOï¼‰æå‡ºï¼Œä¸€ä¸ªè¯•å›¾ä½¿å„ç§è®¡ç®—æœºåœ¨ä¸–ç•ŒèŒƒå›´å†…äº’è¿žä¸ºç½‘ç»œçš„æ ‡å‡†æ¡†æž¶ã€‚ å…¶ä¸­å„å±‚çš„è¯¦ç»†å†…å®¹å¤§å®¶å¯ä»¥å‚è€ƒç»´åŸºç™¾ç§‘ OSIæ˜¯ä¸€ä¸ªç†æƒ³çš„åˆ†å±‚æ¨¡åž‹ï¼Œå¾ˆå°‘æœ‰å®Œå…¨éµå®ˆè¿™æ ·çš„åˆ†å±‚ï¼Œåªä¼šä½¿ç”¨å…¶ä¸­çš„å‡ å±‚è€Œå·²ã€‚ äºŒã€ä»Žè®¿é—®googleè¯´èµ·è¿™é‡Œå°±ä¸è®¨è®ºæˆ‘ä»¬ä¼Ÿå¤§çš„é˜²ç«é•¿åŸŽäº†ï¼Œä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜ï¼Œè¿™æ˜¯åŸºæœ¬æŠ€èƒ½ å½“ä½ å•å‡»å›žè½¦é”®ï¼Œå°±æ„å‘³ç€ä½ éœ€è¦å‘googleçš„æœåŠ¡å™¨å‘é€ä¸€æ¬¡ç½‘é¡µè¯·æ±‚çš„æ•°æ®åŒ…ã€‚ä¸‹é¢ä»Žæ¶‰åŠåˆ°çš„åè®®æˆ–è€…æœåŠ¡è¯´èµ·ã€‚ 1ã€DNSåè®® å½“æˆ‘ä»¬è¦è®¿é—®https://www.google.co.jp/æ—¶ï¼Œå¿…é¡»è¦çŸ¥é“ipåœ°å€ï¼Œä½†è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¹¶ä¸çŸ¥é“ipæ˜¯å¤šå°‘ã€‚DNSæœåŠ¡å°±å¯ä»¥å¸®æˆ‘ä»¬é€šè¿‡åŸŸåæ‰¾åˆ°ipåœ°å€ã€‚å®ƒæ˜¯ä¸€ä¸ªå­˜å‚¨ç€ipå’ŒåŸŸåæ˜ å°„çš„åˆ†å¸ƒå¼æ•°æ®åº“ã€‚GFWå…¶ä¸­å°±æœ‰é€šè¿‡dnsæ±¡æŸ“å’ŒdnsåŠ«æŒçš„æ–¹å¼ä½¿å¾—æˆ‘ä»¬æ— æ³•è®¿é—®åˆ°å›½å¤–çš„æŸäº›â€œfdâ€ç½‘ç«™ã€‚ è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œipå’ŒåŸŸåå¹¶éžä¸€å¯¹ä¸€çš„å…³ç³»ã€‚è€Œæ˜¯å¤šå¯¹å¤šï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªipå¯ä»¥ç»‘å®šå¤šä¸ªåŸŸåï¼Œä¸€ä¸ªåŸŸåä¹Ÿå¯ä»¥ç»‘å®šå¤šä¸ªipï¼Œä½†åŒä¸€æ—¶åˆ»åªèƒ½æ˜¯ä¸€å¯¹ä¸€çš„ã€‚ okï¼ŒçŽ°åœ¨æˆ‘ä»¬æœ‰äº†ipåœ°å€ã€‚ 2ã€ å­ç½‘æŽ©ç  å…¨ä¸–ç•Œè¿™ä¹ˆå¤šè®¡ç®—æœºï¼Œå½“ç„¶ä¸å¯èƒ½éƒ½åœ¨åŒä¸€ä¸ªå­ç½‘é‡Œã€‚é‚£è¿™ä¸ªæ—¶å€™å°±éœ€è¦ç¡®è®¤googleæœåŠ¡å™¨å’Œæˆ‘ä»¬æœ¬æœºæ˜¯å¦åœ¨åœ¨åŒä¸€ä¸ªå­ç½‘é‡Œï¼Œè¿™é‡Œç”¨åˆ°äº†å­ç½‘æŽ©ç ã€‚ å­ç½‘æŽ©ç å’Œipåœ°å€ä¸€æ ·ï¼Œéƒ½æ˜¯32ä½çš„äºŒè¿›åˆ¶æ•°ï¼Œé€šå¸¸ç”¨4æ®µå¼è¡¨ç¤ºï¼Œç½‘ç»œä½å…¨ä¸º1ï¼Œä¸»æœºä½å…¨ä¸º0ã€‚å°†æˆ‘ä»¬çš„ç›®æ ‡åœ°å€å’Œæœ¬æœºåœ°å€åˆ†åˆ«ä¸Žå­ç½‘æŽ©ç æŒ‰ä½åšandæ“ä½œã€‚å¦‚æžœæœ€ç»ˆç»“æžœç›¸åŒé‚£ä¹ˆåœ¨åŒä¸€å­ç½‘ä¸­ã€‚ä¸éœ€è¦å°†æ•°æ®åŒ…è½¬å‘åˆ°ç½‘å…³ã€‚å¦åˆ™ï¼Œå°†æ•°æ®åŒ…è½¬å‘åˆ°ç½‘å…³å¤„ç†ã€‚ ä¾‹å¦‚ï¼š DNS: 255.255.255.0 ä¸»æœºipï¼š10.20.0.121 googleï¼š216.239.34.10 æ˜Žæ˜¾ä¸åœ¨åŒä¸€ä¸ªå­ç½‘ä¸­ 3ã€http/httpsåè®® æµè§ˆå™¨è®¿é—®ç½‘é¡µä½¿ç”¨çš„æ˜¯httpåè®®ï¼Œåœ¨OSIåè®®ä¸­å±žäºŽåº”ç”¨å±‚åè®®ã€‚ httpè¯·æ±‚çš„æŠ¥æ–‡æ ¼å¼ï¼š å¤´éƒ¨ï¼ˆrequest line + headerï¼‰ + æ•°æ®ï¼ˆdataï¼‰ å…¶ä¸­çš„è¯·æ±‚è¡Œï¼ˆrequest lineï¼‰åŒ…æ‹¬è¯·æ±‚æ–¹æ³•å­—æ®µã€URLå­—æ®µå’ŒHTTPåè®®çš„ç‰ˆæœ¬ä¸‰ä¸ªå­—æ®µç»„æˆ GET/index.html HTTP/1.1 ç›®å‰å¤§å¤šæ•°HTTPè¯·æ±‚ä½¿ç”¨çš„æ˜¯é•¿è¿žæŽ¥ï¼ˆHTTP/1.1é»˜è®¤keep-aliveä¸ºtrueï¼‰ï¼Œè€Œé•¿è¿žæŽ¥æ„å‘³ç€ï¼Œä¸€ä¸ªTCPçš„socketåœ¨å½“å‰è¯·æ±‚ç»“æŸåŽï¼Œå¦‚æžœæ²¡æœ‰æ–°çš„è¯·æ±‚åˆ°æ¥ï¼Œsocketä¸ä¼šç«‹é©¬é‡Šæ”¾ï¼Œè€Œæ˜¯ç­‰timeoutåŽå†é‡Šæ”¾ã€‚ è¯·æ±‚æ–¹æ³•å­—æ®µæœ‰ï¼šGETã€POSTã€HEADã€PUTã€DELETEã€TRACE, è¿™äº›å­—æ®µåœ¨REST fulé£Žæ ¼ä¸­èƒ½å¤Ÿè¢«å……åˆ†åˆ©ç”¨ï¼Œè€Œä¸åœ¨ä½¿ç”¨URLæ¥è¡¨è¾¾ç›®çš„åŠ¨ä½œã€‚ ç±»ä¼¼ä¸‹é¢çš„å†…å®¹ï¼š 123456789101112131415alt-svc:hq=":443"; ma=2592000; quic=51303431; quic=51303339; quic=51303338; quic=51303337; quic=51303335,quic=":443"; ma=2592000; v="41,39,38,37,35"cache-control:private, max-age=0content-encoding:brcontent-type:text/html; charset=UTF-8date:Thu, 18 Jan 2018 10:37:50 GMTexpires:-1p3p:CP="This is not a P3P policy! See g.co/p3phelp for more info."server:gwsset-cookie:1P_JAR=2018-01-18-10; expires=Sat, 17-Feb-2018 10:37:50 GMT; path=/; domain=.google.co.jpset-cookie:NID=*, 20-Jul-2018 10:37:50 GMT; path=/; domain=.google.co.jp; HttpOnlystatus:200strict-transport-security:max-age=3600x-frame-options:SAMEORIGINx-xss-protection:1; mode=blockRequest Headers 4ã€tcpã€udpåè®® tcpåè®®æ˜¯è¾“å…¥ä¼ è¾“å±‚çš„åè®®ï¼Œä¸»è¦ä½œç”¨æ˜¯å»ºç«‹ç«¯å£åˆ°ç«¯å£çš„é€šä¿¡ï¼ŒåŒæ—¶ä¿è¯æ•°æ®çš„æ­£ç¡®ä¼ è¾“å’Œå·®é”™å¤„ç†ã€‚ åŒæ—¶å’ŒtcpåŒå‡ºäºŽä¼ è¾“å±‚åè®®çš„è¿˜æœ‰udpï¼ˆç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼‰ï¼Œè¿™ä¸ªåè®®æ¯”è¾ƒç®€å•ï¼Œä¸ä¿è¯æ•°æ®çš„å¯é æ€§ï¼Œæ•°æ®ä¸€æ—¦å‘å‡ºæ— æ³•çŸ¥é“å¯¹æ–¹æ˜¯å¦æ”¶åˆ°ã€‚ä½†æ˜¯ä¼˜ç‚¹æ˜¯è¿‡ç¨‹ç®€å•ï¼ŒèŠ‚çœèµ„æºã€‚ æ— è®ºæ˜¯tcpè¿˜æ˜¯udpåè®®ï¼Œhttpçš„æ•°æ®åŒ…éƒ½æ˜¯åŠ å…¥åˆ°ä»–ä»¬çš„æ•°æ®æ®µä¸­ã€‚ ä¸‰æ¬¡æ¡æ‰‹é—®é¢˜ï¼šæ‰€è°“ä¸‰æ¬¡æ¡æ‰‹ï¼ˆThree-Way Handshakeï¼‰å³å»ºç«‹TCPè¿žæŽ¥ï¼Œå°±æ˜¯æŒ‡å»ºç«‹ä¸€ä¸ªTCPè¿žæŽ¥æ—¶ï¼Œéœ€è¦å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯æ€»å…±å‘é€3ä¸ªåŒ…ä»¥ç¡®è®¤è¿žæŽ¥çš„å»ºç«‹ã€‚åœ¨socketç¼–ç¨‹ä¸­ï¼Œè¿™ä¸€è¿‡ç¨‹ç”±å®¢æˆ·ç«¯æ‰§è¡Œconnectæ¥è§¦å‘ã€‚ ï¼ˆ1ï¼‰ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šClientå°†æ ‡å¿—ä½SYNç½®ä¸º1ï¼Œéšæœºäº§ç”Ÿä¸€ä¸ªå€¼seq=Jï¼Œå¹¶å°†è¯¥æ•°æ®åŒ…å‘é€ç»™Serverï¼ŒClientè¿›å…¥SYN_SENTçŠ¶æ€ï¼Œç­‰å¾…Serverç¡®è®¤ã€‚ ï¼ˆ2ï¼‰ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šServeræ”¶åˆ°æ•°æ®åŒ…åŽç”±æ ‡å¿—ä½SYN=1çŸ¥é“Clientè¯·æ±‚å»ºç«‹è¿žæŽ¥ï¼ŒServerå°†æ ‡å¿—ä½SYNå’ŒACKéƒ½ç½®ä¸º1ï¼Œack=J+1ï¼Œéšæœºäº§ç”Ÿä¸€ä¸ªå€¼seq=Kï¼Œå¹¶å°†è¯¥æ•°æ®åŒ…å‘é€ç»™Clientä»¥ç¡®è®¤è¿žæŽ¥è¯·æ±‚ï¼ŒServerè¿›å…¥SYN_RCVDçŠ¶æ€ã€‚ ï¼ˆ3ï¼‰ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šClientæ”¶åˆ°ç¡®è®¤åŽï¼Œæ£€æŸ¥ackæ˜¯å¦ä¸ºJ+1ï¼ŒACKæ˜¯å¦ä¸º1ï¼Œå¦‚æžœæ­£ç¡®åˆ™å°†æ ‡å¿—ä½ACKç½®ä¸º1ï¼Œack=K+1ï¼Œå¹¶å°†è¯¥æ•°æ®åŒ…å‘é€ç»™Serverï¼ŒServeræ£€æŸ¥ackæ˜¯å¦ä¸ºK+1ï¼ŒACKæ˜¯å¦ä¸º1ï¼Œå¦‚æžœæ­£ç¡®åˆ™è¿žæŽ¥å»ºç«‹æˆåŠŸï¼ŒClientå’ŒServerè¿›å…¥ESTABLISHEDçŠ¶æ€ï¼Œå®Œæˆä¸‰æ¬¡æ¡æ‰‹ï¼ŒéšåŽClientä¸ŽServerä¹‹é—´å¯ä»¥å¼€å§‹ä¼ è¾“æ•°æ®äº†ã€‚ ç™½è¯ä¸€ç‚¹å°±æ˜¯ï¼š ä¸»æœºï¼š ä½ å¥½ï¼Œæˆ‘æƒ³è®¤è¯†ä½  æœåŠ¡å™¨ï¼šå¥½çš„ï¼Œæˆ‘ä¹Ÿæƒ³è®¤è¯†ä½  ä¸»æœºï¼šå¾ˆé«˜å…´è®¤è¯†ä½  é‚£ä¸ºä»€ä¹ˆä¸€å®šè¦ä¸‰æ¬¡æ¡æ‰‹è€Œä¸æ˜¯ä¸¤æ¬¡å‘¢ï¼Ÿ æˆ‘ä»¬å‡è®¾æœ‰ä¸‹é¢çš„è¿™ç§æƒ…å†µï¼š å½“å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œä½†æ˜¯ç”±äºŽæ­¤æ—¶ç½‘ç»œæ‹¥å¡žè¿™ä¸ªåŒ…æš‚æ—¶æ²¡æœ‰åˆ°è¾¾æœåŠ¡å™¨ï¼Œ å®¢æˆ·ç«¯ç­‰å¾…è¶…æ—¶ä¹‹åŽåˆé‡æ–°å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œæ­¤æ—¶æœåŠ¡å™¨ç«¯æŽ¥æ”¶åˆ°äº†ï¼Œå¹¶æ­£ç¡®åº”ç­”ï¼ŒåŒæ–¹å¼€å§‹é€šä¿¡ï¼Œé€šä¿¡ç»“æŸåŽé‡Šæ”¾socketè¿žæŽ¥ã€‚ä½†è¿™ä¸ªæ—¶å€™ï¼Œé‚£ä¸ªè¢«æ‹¥å¡žçš„è¿žæŽ¥æ­¤æ—¶åˆ°è¾¾äº†æœåŠ¡å™¨ï¼Œå¦‚ä½•tcpæ˜¯é‡‡ç”¨ä¸¤æ¬¡æ¡æ‰‹çš„æ–¹å¼ï¼Œé‚£ä¹ˆæ­¤æ—¶æœåŠ¡å™¨ä»¥ä¸ºå®¢æˆ·ç«¯åˆå‘èµ·äº†ä¸€ä¸ªè¿žæŽ¥è¯·æ±‚ï¼Œç„¶åŽè¿”å›žç¡®è®¤è¯·æ±‚ï¼Œæ­¤æ—¶è¿žæŽ¥å°±å·²ç»å»ºç«‹å¥½äº†ã€‚æœåŠ¡å™¨çŠ¶æ€ä¸ºESTABLISHEDï¼Œç­‰å¾…ç€å®¢æˆ·ç«¯å‘é€æ•°æ®ï¼Œä½†ç”±äºŽæ­¤æ—¶å®¢æˆ·ç«¯è¿›å…¥äº†closeçŠ¶æ€ï¼Œå°†å¯¼è‡´æœåŠ¡å™¨ç­‰å¾…ä¸‹åŽ»ï¼Œæµªè´¹èµ„æºã€‚ å››æ¬¡æŒ¥æ‰‹ï¼š é¦–å…ˆéœ€è¦çŸ¥é“çš„æ˜¯tcpæ˜¯å…¨åŒå·¥é€šä¿¡çš„ï¼Œé‚£ä¹ˆå…³é—­å°±åªèƒ½ä¸€ä¸ªä¸€ä¸ªå…³é—­ã€‚ å½“å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éœ€è¦å…³é—­socketæ—¶ï¼ˆsocketç¿»è¯‘æˆå¥—æŽ¥å­—å¹¶ä¸æ°å½“ï¼ŒæŠŠå®ƒå½“åšâ€œæ’åº§â€ä¹Ÿè®¸æ›´å®¹æ˜“ç†è§£ï¼‰ï¼Œå…·ä½“çš„æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å‡è®¾è¿™ä¸ªæ—¶å€™clientå‘èµ·è¯·æ±‚ä¸­æ–­çš„è¯·æ±‚ï¼Œä¹Ÿå°±æ˜¯å‘é€FinæŠ¥æ–‡ï¼Œå‘Šè¯‰serverï¼šâ€œæˆ‘æ²¡æœ‰æ•°æ®å‘ç»™ä½ äº†ï¼Œä½†å¦‚æžœä½ è¿˜æœ‰æ•°æ®è¦å‘ç»™æˆ‘ï¼Œé‚£å°±å…ˆä¸ç”¨å…³é—­socketï¼Œå‘é€å®Œæ¯•åœ¨å‘Šè¯‰æˆ‘â€ï¼Œæ­¤æ—¶clientå¤„äºŽFIN_WAIT1ã€‚ å½“serveræŽ¥æ”¶åˆ°äº†ä¹‹åŽå‘é€ackç»™clientï¼šâ€œä½ çš„è¯·æ±‚æˆ‘æ”¶åˆ°äº†ï¼Œä½†æ˜¯æˆ‘è¿˜æ²¡æœ‰å‡†å¤‡å¥½ï¼Œè¯·ç»§ç»­ç­‰æˆ‘æ¶ˆæ¯â€æ­¤æ—¶clientè¿›å…¥FIN_WAIT2çŠ¶æ€ã€‚ å½“serverç«¯ç¡®è®¤æ•°æ®å‘é€å®Œæ¯•äº†ï¼Œå°±å‘Šè¯‰clientï¼šâ€œå¥½äº†ï¼Œæˆ‘è¿™è¾¹æ•°æ®å‘å®Œäº†ï¼Œå‡†å¤‡å¥½å…³é—­è¿žæŽ¥äº†â€ã€‚ ä½†æ˜¯è¿™ä¸ªæ—¶å€™clientå¹¶ä¸ç›¸ä¿¡ç½‘ç»œï¼Œæ€•serverç«¯ä¸çŸ¥é“è¦å…³é—­ï¼Œæ‰€ä»¥è¿›å…¥TIME_WAIT,å¦‚æžœserverç«¯æ²¡æœ‰æ”¶åˆ°ackåˆ™å¯ä»¥é‡ä¼ ï¼Œserverç«¯æ”¶åˆ°ackåŽå°±çŸ¥é“å¯ä»¥æ–­å¼€äº†ï¼Œclientç­‰å¾…2MSL(æœ€å¤§æŠ¥æ–‡æ®µç”Ÿå­˜æ—¶é—´)ä¹‹åŽè¿˜æ²¡æœ‰æ”¶åˆ°å›žå¤ï¼Œé‚£ä¹ˆä¹…è®¤ä¸ºserverç«¯æ­£å¸¸å…³é—­äº†ï¼Œclientä¹Ÿå¯ä»¥å…³é—­äº†ã€‚ åœ¨è¿™é‡Œéœ€è¦æ³¨æ„æœ€åŽclientç­‰å¾…2MSL(æœ€å¤§æŠ¥æ–‡æ®µç”Ÿå­˜æ—¶é—´)ï¼Œè™½ç„¶æŒ‰é“ç†ï¼Œå››ä¸ªæŠ¥æ–‡éƒ½å‘é€å®Œæ¯•ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æŽ¥è¿›å…¥CLOSEçŠ¶æ€äº†ï¼Œä½†æ˜¯æˆ‘ä»¬å¿…é¡»å‡è±¡ç½‘ç»œæ˜¯ä¸å¯é çš„ï¼Œæœ‰å¯ä»¥æœ€åŽä¸€ä¸ªACKä¸¢å¤±ã€‚æ‰€ä»¥TIME_WAITçŠ¶æ€å°±æ˜¯ç”¨æ¥é‡å‘å¯èƒ½ä¸¢å¤±çš„ACKæŠ¥æ–‡ã€‚ 5ã€IPåè®®ï¼Œç½‘ç»œå±‚ åœ¨ä¸ƒå±‚ç½‘ç»œåˆ†å±‚ä¸­ï¼Œç½‘ç»œå±‚æ˜¯æœ€å¤æ‚çš„ã€‚è´Ÿè´£ä¸»æœºåˆ°ä¸»æœºé—´çš„é€šä¿¡ï¼Œå…¶ä¸­ipåè®®æ˜¯æœ€é‡è¦çš„ã€‚ è®¡ç®—æœºè‹¥åœ¨åŒä¸€ä¸ªå­ç½‘é‡Œè¾¹ï¼Œå®Œå…¨å¯ä»¥åªéœ€è¦macåœ°å€å°±å¯ä»¥é€šä¿¡ï¼Œä¸»æœºAæƒ³å’Œä¸»æœºBé€šä¿¡ï¼Œé‚£ä¹ˆåªéœ€è¦å°†è¯·æ±‚å¹¿æ’­åˆ°æ•´ä¸ªå­ç½‘ï¼Œç„¶åŽå„å°è®¡ç®—æœºæ‹¿å‡ºç›®çš„macåœ°å€å’Œè‡ªå·±çš„macåœ°å€ç›¸å¯¹æ¯”ï¼Œå¦‚æžœç›¸åŒï¼Œä¸¤å°ä¸»æœºè¿›è¡Œé€šä¿¡ã€‚ä½†æ˜¯è®¡ç®—æœºéå¸ƒå…¨ä¸–ç•Œï¼Œä¸å¯èƒ½éƒ½åœ¨ä¸€ä¸ªå­ç½‘é‡Œè¾¹ï¼Œè‹¥åœ¨å…¶ä»–å­ç½‘é‡Œè¾¹æ€Žä¹ˆåŠžå‘¢ï¼Ÿ è¿™ä¸ªæ—¶å€™å°±å¿…é¡»ç”¨åˆ°ipåœ°å€äº†ã€‚ç”±äºŽipåœ°å€åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯ç½‘ç»œæ®µï¼Œä¸€éƒ¨åˆ†æ˜¯ä¸»æœºæ®µã€‚ç½‘ç»œæ®µå†³å®šå¤„äºŽå“ªä¸€ä¸ªå­ç½‘ï¼Œä¸»æœºæ®µå†³å®šæ˜¯å­ç½‘çš„é‚£ä¸€å°æœºå™¨ã€‚å½“æˆ‘ä»¬è¦è®¿é—®googleçš„æœåŠ¡å™¨ipæ˜¯216.239.34.10æ—¶ï¼Œç”±äºŽä¸åœ¨åŒä¸€ä¸ªå­ç½‘ä¸­ï¼Œéœ€è¦å°†æ•°æ®æŠ¥è½¬å‘ç»™ç½‘å…³ï¼Œç„¶åŽå†é€šè¿‡å¤æ‚çš„è·¯ç”±ï¼Œæœ€ç»ˆåˆ°è¾¾æœåŠ¡å™¨ã€‚ ipæŠ¥æ–‡å°†tcpçš„æŠ¥æ–‡åµŒå…¥åœ¨æ•°æ®å—ä¸­ 6ã€ARPåè®®ã€ä»¥å¤ªç½‘åè®® æœ€åŽï¼Œipæ•°æ®åŒ…åµŒå…¥åˆ°ä»¥å¤ªç½‘æ•°æ®æŠ¥ï¼Œä»¥å¤ªç½‘æ•°æ®åŒ…éœ€è¦è®¾ç½®é€šä¿¡åŒæ–¹çš„macåœ°å€ï¼Œå‘é€æ–¹ä¸ºæœ¬æœºçš„macåœ°å€ï¼ŒæŽ¥æ”¶æ–¹ç½‘å¡216.239.34.1çš„macåœ°å€éœ€è¦ç”¨ARPåè®®å¾—åˆ°ã€‚ æˆ‘ä»¬éœ€è¦ä¸€ç§æœºåˆ¶ï¼Œèƒ½å¤Ÿä»ŽIPåœ°å€å¾—åˆ°MACåœ°å€ã€‚è¿™é‡Œåˆå¯ä»¥åˆ†æˆä¸¤ç§æƒ…å†µã€‚ç¬¬ä¸€ç§æƒ…å†µï¼Œå¦‚æžœä¸¤å°ä¸»æœºä¸åœ¨åŒä¸€ä¸ªå­ç½‘ç»œï¼Œé‚£ä¹ˆäº‹å®žä¸Šæ²¡æœ‰åŠžæ³•å¾—åˆ°å¯¹æ–¹çš„MACåœ°å€ï¼Œåªèƒ½æŠŠæ•°æ®åŒ…ä¼ é€åˆ°ä¸¤ä¸ªå­ç½‘ç»œè¿žæŽ¥å¤„çš„â€ç½‘å…³â€ï¼ˆgatewayï¼‰ï¼Œè®©ç½‘å…³åŽ»å¤„ç†ã€‚ ç¬¬äºŒç§æƒ…å†µï¼Œå¦‚æžœä¸¤å°ä¸»æœºåœ¨åŒä¸€ä¸ªå­ç½‘ç»œï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç”¨ARPåè®®ï¼Œå¾—åˆ°å¯¹æ–¹çš„MACåœ°å€ã€‚ARPåè®®ä¹Ÿæ˜¯å‘å‡ºä¸€ä¸ªæ•°æ®åŒ…ï¼ˆåŒ…å«åœ¨ä»¥å¤ªç½‘æ•°æ®åŒ…ä¸­ï¼‰ï¼Œå…¶ä¸­åŒ…å«å®ƒæ‰€è¦æŸ¥è¯¢ä¸»æœºçš„IPåœ°å€ï¼Œåœ¨å¯¹æ–¹çš„MACåœ°å€è¿™ä¸€æ ï¼Œå¡«çš„æ˜¯FF:FF:FF:FF:FF:FFï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªâ€å¹¿æ’­â€åœ°å€ã€‚å®ƒæ‰€åœ¨å­ç½‘ç»œçš„æ¯ä¸€å°ä¸»æœºï¼Œéƒ½ä¼šæ”¶åˆ°è¿™ä¸ªæ•°æ®åŒ…ï¼Œä»Žä¸­å–å‡ºIPåœ°å€ï¼Œä¸Žè‡ªèº«çš„IPåœ°å€è¿›è¡Œæ¯”è¾ƒã€‚å¦‚æžœä¸¤è€…ç›¸åŒï¼Œéƒ½åšå‡ºå›žå¤ï¼Œå‘å¯¹æ–¹æŠ¥å‘Šè‡ªå·±çš„MACåœ°å€ï¼Œå¦åˆ™å°±ä¸¢å¼ƒè¿™ä¸ªåŒ…ã€‚ æ€»ä¹‹ï¼Œæœ‰äº†ARPåè®®ä¹‹åŽï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°åŒä¸€ä¸ªå­ç½‘ç»œå†…çš„ä¸»æœºMACåœ°å€ï¼Œå¯ä»¥æŠŠæ•°æ®åŒ…å‘é€åˆ°ä»»æ„ä¸€å°ä¸»æœºä¹‹ä¸Šäº†ã€‚ 7ã€æœåŠ¡å™¨å“åº” ç»è¿‡å¤šä¸ªç½‘å…³çš„è½¬å‘ï¼ŒGoogleçš„æœåŠ¡å™¨216.239.34.10ï¼Œæ”¶åˆ°æ•°æ®åŒ…ä¹‹åŽé€šè¿‡è§£æžï¼Œå–å‡ºå…¶ä¸­çš„è¯·æ±‚request lineï¼Œåšå‡ºå“åº”ï¼Œå°è£…æˆresponseè¿”å›žç»™æµè§ˆå™¨ã€‚ 8ã€æµè§ˆå™¨è§£æžæ¸²æŸ“é¡µé¢æµè§ˆå™¨åœ¨æ”¶åˆ°HTML,CSS,JSæ–‡ä»¶åŽï¼Œå®ƒæ˜¯å¦‚ä½•æŠŠé¡µé¢å‘ˆçŽ°åˆ°å±å¹•ä¸Šçš„ï¼Ÿä¸‹å›¾å¯¹åº”çš„å°±æ˜¯WebKitæ¸²æŸ“çš„è¿‡ç¨‹ã€‚ ç”±äºŽæ¶‰åŠåˆ°å¾ˆå¤šçš„å†…å®¹ï¼Œéš¾å…æœ‰åå·®çš„åœ°æ–¹ï¼Œè¿˜è¯·è§è°…ã€‚ å‚è€ƒï¼š https://zh.wikipedia.org/wiki/OSI%E6%A8%A1%E5%9E%8B http://blog.csdn.net/whuslei/article/details/6667471 http://www.ruanyifeng.com/blog/2012/06/internet_protocol_suite_part_ii.html http://www.ruanyifeng.com/blog/2012/05/internet_protocol_suite_part_i.html]]></content>
      <categories>
        <category>ç½‘ç»œ</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ç±»unixå¹³å°ä¸­å‡ ä¸ªå¤§æ€å™¨æŒ‡ä»¤]]></title>
    <url>%2F2017%2F12%2F14%2F%E7%B1%BBunix%E5%B9%B3%E5%8F%B0%E4%B8%AD%E5%87%A0%E4%B8%AA%E5%A4%A7%E6%9D%80%E5%99%A8%E6%8C%87%E4%BB%A4%2F</url>
    <content type="text"><![CDATA[ç±»unixå¹³å°ä¸­å‡ ä¸ªå¤§æ€å™¨æŒ‡ä»¤ ä¸‹è¾¹ä»‹ç»å‡ ä¸ªâ€œå¾ˆå¼ºåŠ¿â€çš„å‘½ä»¤è¡ŒæŒ‡ä»¤ï¼Œèƒ½å¤§å¤§æé«˜æˆ‘ä»¬çš„å·¥ä½œç”Ÿäº§æ•ˆçŽ‡ã€‚ä½¿ç”¨macOS Sierraä½œä¸ºæ¼”ç¤ºçŽ¯å¢ƒã€‚ 1ã€autojump é€šå¸¸æˆ‘ä»¬åœ¨ç±»unixæ“ä½œç³»ç»Ÿä¸­åˆ‡æ¢ç›®å½•éƒ½æ˜¯ä½¿ç”¨cdï¼Œä½¿ç”¨è¿™ä¸ªæŒ‡ä»¤å¦‚æžœè¦åˆ‡æ¢åˆ°å¾ˆæ·±çš„ç›®å½•ï¼Œæ˜¯å¾ˆçƒ¦æ¼çš„ã€‚é‚£ä¹ˆè¿™ä¸ªæ—¶å€™autojumpå°±æ˜¯å¤§æ€å™¨ã€‚ 1ã€ åœ¨macä¸­å®‰è£…autojumpæ¯”è¾ƒç®€å•ï¼š 1brew install autojump ä½†æ˜¯éœ€è¦æ³¨æ„å®‰è£…å®Œå¹¶ä¸èƒ½ç›´æŽ¥ä½¿ç”¨ã€‚åœ¨æˆ‘ä»¬å®‰è£…çš„è¿‡ç¨‹ä¸­ä¼šæœ‰å¦‚ä¸‹çš„æç¤ºï¼š æˆ‘ä»¬åªéœ€è¦æŒ‰ç…§æ­¥éª¤æ“ä½œå°±å¥½ï¼šï¼ˆ1ï¼‰ å…ˆåœ¨~/.zshrcæ–‡ä»¶æˆ–è€…~/.bash_profileä¸­æ·»åŠ  1[ -f /usr/local/etc/profile.d/autojump.sh ] &amp;&amp; . /usr/local/etc/profile.d/autojump.sh (2) ç„¶åŽsourceç›¸åº”çš„æ–‡ä»¶ï¼Œé‡æ–°æ‰“å¼€ä¸€ä¸ªçª—å£ã€‚å°±å¯ä»¥ä½¿ç”¨äº†ã€‚ ç®€å•ä»‹ç»ä¸€ä¸‹autojumpçš„ç®€å•ä½¿ç”¨å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥æ‰‹åŠ¨æ·»åŠ ä¸€ä¸ªç›®å½• 1$ autojump -a [ç›®å½•] å¦‚æžœä½ çªç„¶æƒ³è¦æŠŠå½“å‰ç›®å½•å˜æˆä½ çš„æœ€çˆ±å’Œä½¿ç”¨æœ€é¢‘ç¹çš„æ–‡ä»¶å¤¹ï¼Œä½ å¯ä»¥åœ¨è¯¥ç›®å½•é€šè¿‡å‘½ä»¤çš„å‚æ•° i æ¥æ‰‹å·¥å¢žåŠ å®ƒçš„æƒé‡ 1$ autojump -i [æƒé‡] è¿™å°†ä½¿å¾—è¯¥ç›®å½•æ›´å¯èƒ½è¢«é€‰æ‹©è·³è½¬ã€‚ç›¸åçš„ä¾‹å­æ˜¯åœ¨è¯¥ç›®å½•ä½¿ç”¨å‚æ•° d æ¥å‡å°‘æƒé‡ï¼š 1autojump -d [æƒé‡] è¦è·Ÿè¸ªæ‰€æœ‰è¿™äº›æ”¹å˜ï¼Œè¾“å…¥ï¼š 1$ autojump -s 2ã€mycli å¯¹äºŽç¨‹åºå‘˜æ¥è¯´ï¼Œæ•°æ®åº“å†ç†Ÿæ‚‰ä¸è¿‡äº†ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬æ›´å–œæ¬¢ç”¨å‘½ä»¤è¡Œæ¥è®¿é—®æ•°æ®åº“ï¼Œä½†æ˜¯é»˜è®¤è‡ªå¸¦çš„mysqlå¯¹æ“ä½œå¹¶ä¸æ˜¯ååˆ†å‹å¥½ï¼Œä¸èƒ½è‡ªåŠ¨è¡¥å…¨ï¼Œæ²¡æœ‰è¯­æ³•é«˜äº®ã€‚è¿™ä¸ªæ—¶å€™ä½¿ç”¨mycliå°±å†åˆé€‚ä¸è¿‡äº†ã€‚ 1ã€ å…ˆå®‰è£…ï¼Œä¾æ—§ä½¿ç”¨brewæ¥å®‰è£…ç®¡ç†1brew install mycli ç„¶åŽä½¿ç”¨mycli -u usernameè¿›å…¥æ•°æ®åº“ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯è¿™é‡Œä¸éœ€è¦-på‚æ•°ã€‚ å¦‚ä¸‹æ‰€ç¤ºï¼š 3ã€screen å½“æˆ‘ä»¬åœ¨é€šè¿‡sshè¿žæŽ¥è¿œç«¯æœºå™¨æ‰§è¡Œä»»åŠ¡æ—¶ï¼Œå¦‚æžœä»»åŠ¡æ‰§è¡Œæ—¶é—´ç›¸å¯¹æ¯”è¾ƒçŸ­è¿˜å¥½ï¼Œå¦‚æžœæ˜¯æ‰§è¡Œhadoopçš„ä»»åŠ¡ï¼Œå¾ˆå¤šæ—¶å€™å›žè¶…è¿‡å‡ ä¸ªå°æ—¶ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™å¦‚æžœsshè¿žæŽ¥ä¸­æ–­äº†ï¼Œé‚£ä¹ˆè¿™ä¸ªä»»åŠ¡ä¹Ÿä¼šå¤±è´¥ã€‚æ‰€ä»¥è¿™ä¸ªæ—¶å€™screenå°±æ´¾ä¸Šç”¨åœºäº†ã€‚ 1brew install screen è¿›å…¥åŽå°æ‰§è¡Œï¼š 1screen å½“å¼€å§‹æ‰§è¡Œä»»åŠ¡ä¹‹åŽä½¿ç”¨å¦‚ä¸‹æŒ‡ä»¤é€€å‡ºï¼š 1control + A + D å°†æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡åˆ—ä¸¾å‡ºæ¥ 1screen -ls æŸ¥çœ‹ä»»åŠ¡æ‰§è¡Œè¿›åº¦ï¼š 1screen -r è¿›ç¨‹å· è¿˜åŒ…æ‹¬axelã€fasdã€m-cliç­‰ç­‰æœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥è‡ªå·±ç ”ç©¶ã€‚]]></content>
      <categories>
        <category>macOS</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[è®°å½•sparkä¸€æ¬¡è¸©å‘]]></title>
    <url>%2F2017%2F11%2F27%2F%E8%AE%B0%E5%BD%95%E4%B8%80%E6%AC%A1spark%E8%B8%A9%E5%9D%91%2F</url>
    <content type="text"><![CDATA[Application has been killed. Reason: Master removed our application: FAILED sparkä»Žäº”æœˆä»½å¼€å§‹è·‘åˆ°11æœˆä»½ä¸€ç›´æ­£å¸¸ï¼Œä½†æ˜¯åœ¨æœ€è¿‘ä¸¤å¤©æŠ¥å¦‚ä¸‹çš„é”™è¯¯ã€‚ æŸ¥çœ‹workerè¿è¡Œçš„logï¼Œå‘çŽ°ä¸‹é¢çš„é—®é¢˜ã€‚ ç„¶åŽè¿›å…¥åˆ°/opt/soft/spark/workç›®å½•å‘çŽ°å½“å‰æœ‰31999ä¸ªæ–‡ä»¶ï¼Œ è€Œåœ¨linuxæ–‡ä»¶ç³»ç»Ÿä¸­ä¸€ä¸ªæ–‡ä»¶å¤¹æœ€å¤šèƒ½å¤Ÿ32000ä¸ªå­æ–‡ä»¶ï¼ŒåŒ…æ‹¬ä¸€ä¸ªå½“å‰ç›®å½•ã€çˆ¶çº§ç›®å½•ï¼Œé‚£ä¹ˆæ“ä½œè¿™ä¸ªæ•°å°±æ— æ³•åœ¨è¿™ä¸ªç›®å½•ä¸­å†™å…¥æ–‡ä»¶ã€‚åœ¨linux å†…æ ¸ä¸­æœ‰ä¸‹é¢çš„å®šä¹‰ï¼š 12include/linux/ext2_fs.h:#define EXT2_LINK_MAX 32000include/linux/ext3_fs.h:#define EXT3_LINK_MAX 32000 æ‰€ä»¥ï¼Œåªèƒ½å°†ç”Ÿæˆçš„å¤šä½™ä¸´æ—¶æ–‡ä»¶åˆ é™¤äº†ã€‚åŠ¨æ‰‹ingâ€¦. åˆ é™¤ä¹‹åŽï¼Œé‡æ–°æäº¤sparkä»»åŠ¡ï¼Œæ²¡æœ‰é—®é¢˜ã€‚]]></content>
      <categories>
        <category>spark</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¦‚ä½•è§£å†³â€œéžWeChatå®˜æ–¹ç½‘é¡µï¼Œç»§ç»­è®¿é—®å°†è½¬æ¢æˆ.....â€çš„é—®é¢˜]]></title>
    <url>%2F2017%2F10%2F18%2F%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E2%80%9C%E9%9D%9EWeChat%E5%AE%98%E6%96%B9%E7%BD%91%E9%A1%B5%EF%BC%8C%E7%BB%A7%E7%BB%AD%E8%AE%BF%E9%97%AE%E5%B0%86%E8%BD%AC%E6%8D%A2%E6%88%90......%E2%80%9D%E7%9A%84%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[æˆ‘ä»¬åœ¨å¼€å‘å¾®ä¿¡å…¬ä¼—å·æ—¶ï¼Œä½¿ç”¨ç½‘é¡µå·¥å…·ç”Ÿæˆè‡ªå®šä¹‰èœå•ï¼Œå…³è”åˆ°æŸä¸€ä¸ªç½‘ç«™ï¼Œå½“æˆ‘ä»¬è®¿é—®è¿™ä¸ªç½‘é¡µçš„æ—¶å€™å°±ä¼šå‡ºçŽ°å¦‚ä¸‹æƒ…å†µï¼š è¦è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œå¯ä»¥é‡‡ç”¨å¦‚ä¸‹æ–¹å¼ï¼š 1ã€ç™»å½•å¾®ä¿¡å…¬ä¼—å·ï¼Œè¿›å…¥å…¬ä¼—å·è®¾ç½® â€“&gt; åŠŸèƒ½è®¾ç½®ï¼Œè¿›å…¥åˆ°ä¸‹é¢çš„é¡µé¢ä¸­ï¼Œç„¶åŽç‚¹å‡»è®¾ç½®ã€‚ ç„¶åŽæœ€ç»ˆè¿›å…¥åˆ°è®¾ç½®çš„é¡µé¢ã€‚æœ‰ä¸¤ä¸ªåœ°æ–¹éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼šï¼ˆ1ï¼‰é¦–å…ˆè¦ç¡®ä¿è®¾ç½®çš„åŸŸåå¿…é¡»æ˜¯å¤‡è¿‡æ¡ˆçš„ã€‚ï¼ˆ2ï¼‰åŒæ—¶è¿˜éœ€è¦ä¸‹è½½MP_verify_zvHGyljL5rHLDOB1.txtæ–‡ä»¶åˆ°èƒ½å¤Ÿè®¿é—®çš„ç›®å½•ã€‚ å‡è®¾æ˜¯java webçš„é¡¹ç›®ï¼Œå¤‡æ¡ˆçš„urlå¯ä»¥å…·ä½“åˆ°è®¿é—®çš„é¦–é¡µç›®å½•ï¼ˆWebContentç›®å½•ä¸‹ï¼‰ï¼Œé‚£ä¹ˆä¹Ÿå°±å¯ä»¥å°†MP_verify_zvHGyljL5rHLDOB1.txtæ–‡ä»¶æ”¾ç½®åˆ°WebContentç›®å½•ä¸‹ã€‚ é€šè¿‡ä»¥ä¸Šçš„è®¾ç½®ï¼Œè¿‡ä¸€æ®µæ—¶é—´ç”Ÿæ•ˆä¹‹åŽï¼Œå°±ä¸ä¼šåœ¨å‡ºçŽ°å®‰å…¨æç¤ºäº†ã€‚]]></content>
      <categories>
        <category>java</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Spring MVCè®¿é—®é™æ€èµ„æºæ–‡ä»¶]]></title>
    <url>%2F2017%2F09%2F27%2FSpringMVC%E8%AE%BF%E9%97%AE%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6%2F</url>
    <content type="text"><![CDATA[Spring MVCè®¿é—®é™æ€èµ„æºæ–‡ä»¶ æˆ‘ä»¬åœ¨ä½¿ç”¨spring MVCå¼€å‘æ—¶ï¼Œéœ€è¦åœ¨web.xmlæ–‡ä»¶ä¸­é…ç½®DispatcherServletï¼ŒæŒ‡å®šæ˜ å°„æ¡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1234567891011121314&lt;servlet&gt; &lt;servlet-name&gt;Dispatcher&lt;/servlet-name&gt; &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt; &lt;!--åŠ è½½é…ç½®æ–‡ä»¶--&gt; &lt;init-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:/conf/spring-mvc.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;load-on-startup&gt;1&lt;/load-on-startup&gt; &lt;/servlet&gt; &lt;servlet-mapping&gt; &lt;servlet-name&gt;Dispatcher&lt;/servlet-name&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt; &lt;/servlet-mapping&gt; é€šå¸¸éƒ½éœ€è¦å°†DispatcherServleté…ç½®ä¸ºæ‹¦æˆªæ‰€æœ‰è¯·æ±‚ï¼Œæ‰€ä»¥å°†url-patterné…ç½®ä¸ºâ€/â€œã€‚ä½†è¿™æ ·å°±ä¼šå‡ºçŽ°ä¸€ä¸ªé—®é¢˜ï¼Œé€šå¸¸åœ¨é¡µé¢ä¸­éœ€è¦ä½¿ç”¨åˆ°çš„jsã€cssã€å›¾ç‰‡ç­‰ç­‰é™æ€æ–‡ä»¶å°±æ— æ³•è¯·æ±‚äº†ã€‚ ä¸€èˆ¬æœ‰ç”¨ä¸¤ç§æ–¹å¼æ¥å¤„ç†è¿™ç§æƒ…å†µ1ã€ä½¿ç”¨ mvc:resourcesçš„æ–¹å¼ï¼Œå°†é…ç½®æ·»åŠ åˆ°appContext-**.xmlæ–‡ä»¶ä¸­ä¾‹å¦‚ï¼š 12 &lt;!-- å¯¹é™æ€èµ„æºæ–‡ä»¶çš„è®¿é—® --&gt;&lt;mvc:resources mapping="/**" location="/" /&gt; mappingæ˜¯urlæ˜ å°„å¤„ç†ï¼Œlocationæ˜¯ç›¸å¯¹äºŽWebContentçš„è·¯å¾„ã€‚ 2ã€ é…ç½®DispatcherServletå€¼æ‹¦æˆª.doçš„è¯·æ±‚ã€‚ 1234567891011121314&lt;servlet&gt; &lt;servlet-name&gt;Dispatcher&lt;/servlet-name&gt; &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet &lt;/servlet-class&gt; &lt;init-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:configure/spring-mvc.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;&lt;/servlet&gt;&lt;servlet-mapping&gt; &lt;servlet-name&gt;Dispatcher&lt;/servlet-name&gt; &lt;url-pattern&gt;*.do&lt;/url-pattern&gt;&lt;/servlet-mapping&gt;]]></content>
      <categories>
        <category>java</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[çˆ¬å–çŒ«çœ¼ç”µå½±æ•°æ®ï¼ˆä¸€ï¼‰]]></title>
    <url>%2F2017%2F09%2F24%2F%E7%88%AC%E5%8F%96%E7%8C%AB%E7%9C%BC%E7%94%B5%E5%BD%B1%E6%95%B0%E6%8D%AE-1%2F</url>
    <content type="text"><![CDATA[çˆ¬å–çŒ«çœ¼ç”µå½±æ•°æ®(ä¸€) æ¦‚è¿°ï¼šè¿‘æœŸç”±äºŽä¸šåŠ¡éœ€è¦ï¼Œéœ€è¦å°†çˆ¬å–çŒ«çœ¼ç½‘ç«™ä¸­çš„éƒ¨åˆ†æ•°æ®ä½œä¸ºå…¬ä¼—å·æ•°æ®æºï¼ŒçŒ«çœ¼çš„ç”µå½±æ•°æ®ç›¸å½“ä¹‹å…¨å¤‡ï¼Œå¤§æ¦‚æ”¶å½•äº†å‡ åä¸‡éƒ¨ç”µå½±ã€‚å½“ç„¶è¿™äº›æ•°æ®æˆ‘ä»¬ä¹Ÿæ²¡é‚£ä¹ˆå®¹æ˜“å°±èƒ½çˆ¬å–åˆ°çš„ã€‚é‚å°†æ•´ä¸ªçˆ¬å–è¿‡ç¨‹è®°å½•å¦‚ä¸‹ã€‚ 1ã€ä½¿ç”¨chromeè¿›å…¥å¼€å‘è€…æ¨¡å¼ï¼Œè§‚å¯Ÿhtmlç»“æž„ã€å…ƒç´ ï¼Œæ‰¾åˆ°æˆ‘ä»¬æ‰€éœ€æ•°æ®ï¼Œç¬¬ä¸€æ­¥æˆ‘ä»¬éœ€è¦çŽ°èŽ·å–æ¯ä¸€ä¸ªç”µå½±çš„è¯¦æƒ…é¡µé¢urlã€‚ æ³¨æ„ï¼Œåœ¨çˆ¬å–çŒ«çœ¼çš„ç”µå½±æ•°æ®æ—¶å¹¶ä¸éœ€è¦ç™»å½•å’Œæºå¸¦cookieåŽ»è¯·æ±‚html 2ã€ è¿™é‡Œæˆ‘ä»¬ç»“åˆBeautifulSoupå’Œxpathæ¥å®žçŽ°å¯¹æ•°æ®çš„è¿‡æ»¤ã€‚å®žçŽ°ä»£ç å¦‚ä¸‹ï¼š 12345678910111213def get_detail_url(self, targetUrl): """ä»Žæ¦‚è§ˆé¡µé¢ä¸­åŽ»èŽ·å–å‰§é€å½±ç‰‡çš„è¯¦æƒ…é¡µé¢""" html = self.getHtml(targetUrl) print html soup = BeautifulSoup(html, 'lxml') urls = soup.find_all('a', attrs=&#123;'data-act':'movie-click'&#125;) dd = soup.find_all('dd') print dd for url in urls: detailPath = etree.HTML(str(url)) detail_url = detailPath.xpath(r'//a/@href') for durl in detail_url: self.getContents('https://maoyan.com' + durl, proxys) ç„¶åŽèŽ·å–åˆ°å¯¹åº”æ¯ä¸€ä¸ªç”µå½±çš„è¯¦æƒ…urlï¼Œè¿›å…¥è¯¦æƒ…é¡µï¼Œåˆ†æžæ‰€éœ€æ•°æ®å¯¹åº”htmlå…ƒç´ ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬åªéœ€è¦ä¸‰ä¸ªå­—æ®µã€ç”µå½±åç§°ã€ç”µå½±æµ·æŠ¥urlã€ç”µå½±ä¸Šæ˜ æ—¶é—´ã€‚ æç¤º:ä½¿ç”¨xpathæ—¶ï¼Œæœ€ç®€å•çš„æ–¹å¼æ˜¯åœ¨chromeä¸­ç‚¹å‡»é€‰ä¸­å…·ä½“æŸä¸€ä¸ªå…ƒç´ ï¼Œç„¶åŽå³é”®â€”â€”&gt; copy â€“&gt; copy xpathå°±èƒ½èŽ·å–åˆ°å¯¹åº”çš„xpathè·¯å¾„ å®žçŽ°ä»£ç ï¼š 12345678910def getContents(self, url, proxys): """ä»Žè¯¦æƒ…é¡µé¢ä¸­èŽ·å–æ‰€éœ€data""" html = self.getHtml(url,proxys) detailPath = etree.HTML(html) #ç”µå½±åç§° film_name = detailPath.xpath(r'/html/body/div[3]/div/div[2]/div[1]/h3/text()') #å›¾ç‰‡url pic_url = detailPath.xpath(r'/html/body/div[3]/div/div[1]/div/img/@src') #ä¸Šæ˜ æ—¶é—´ release_time = detailPath.xpath(r'/html/body/div[3]/div/div[2]/div[1]/ul/li[3]/text()') 3ã€ è¿™ä¸ªæ—¶å€™èŽ·å–åˆ°æ•°æ®äº†ï¼Œå°±è¯¥å­˜åº“äº†ã€‚å—¯ï¼Œå°±å­˜åˆ°mysqlä¸­å§ã€‚æ²¡å•¥è¯´çš„ï¼Œä¸Šä»£ç ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748def insertData(self, my_dict): try: self.db.set_character_set('utf8') cols = ', '.join(my_dict.keys()) print cols values = '","'.join(my_dict.values()) print values sql = "INSERT INTO maoyan (%s) VALUES (%s)" % (cols, '"' + values + '"') try: result = self.cur.execute(sql) insert_id = self.db.insert_id() self.db.commit() # åˆ¤æ–­æ˜¯å¦æ‰§è¡ŒæˆåŠŸ if result: return insert_id else: return 0 except MySQLdb.Error, e: # å‘ç”Ÿé”™è¯¯æ—¶å›žæ»š self.db.rollback() # ä¸»é”®å”¯ä¸€ï¼Œæ— æ³•æ’å…¥ if "key 'PRIMARY'" in e.args[1]: print self.getCurrentTime(), "æ•°æ®å·²å­˜åœ¨ï¼Œæœªæ’å…¥æ•°æ®" else: print self.getCurrentTime(), "æ’å…¥æ•°æ®å¤±è´¥ï¼ŒåŽŸå›  %d: %s" % (e.args[0], e.args[1]) except MySQLdb.Error, e: print self.getCurrentTime(), "æ•°æ®åº“é”™è¯¯ï¼ŒåŽŸå› %d: %s" % (e.args[0], e.args[1]) def dealData(self, my_dict): """å…ˆä»Žæ•°æ®åº“ä¸­æŸ¥è¯¢è¿™ä¸ªå½±ç‰‡åçš„è®°å½•ï¼Œå¦‚æžœæ²¡æœ‰ç›´æŽ¥æ’å…¥ï¼› è‹¥æ˜¯æ•°æ®åº“ä¸­å·²ç»å­˜åœ¨æ•°æ®ï¼Œé‚£ä¹ˆä»€ä¹ˆéƒ½ä¸åš""" self.db.set_character_set('utf8') filmTitile = my_dict.get('film_title') result = self.findFilmByfilmTitle(filmTitile) if len(result) == 0: self.insertData(my_dict) return else: pass def findFilmByfilmTitle(self, filmTitile): """é€šè¿‡å½±ç‰‡åç§°åŽ»æ•°æ®åº“ä¸­æŸ¥è¯¢""" self.db.set_character_set('utf8') sql = "select * from maoyan where film_title='%s'" % (filmTitile) self.cur.execute(sql) results = self.cur.fetchall() self.db.commit() return results 4ã€ ä¸‡äº‹ä¿±å¤‡åªæ¬ å¯åŠ¨äº†ï¼Œè·‘å•Šè·‘å•Šã€‚æƒ³å¿…å¤§å®¶éƒ½æƒ³åˆ°äº†ï¼ŒçŒ«çœ¼è‚¯å®šæ˜¯ä¸å¯èƒ½éšä¾¿è®©äººè¿™æ ·çˆ¬å–ä»–ä»¬çš„æ•°æ®ï¼Œè€Œä¸”çŸ­æ—¶é—´å¤§é‡çš„è¯·æ±‚å¯¹æœåŠ¡å™¨çš„è´Ÿè½½ä¹Ÿæ˜¯ç›¸å½“å¤§çš„ï¼Œä¸å‡ºæ„æ–™çˆ¬å–äº†ä¸åˆ°300æ¡æ•°æ®ï¼Œå°±è¢«åœæ­¢äº†ã€‚(à²¥ _ à²¥)å¤„ç†è¿™ç§æƒ…å†µä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§é€šè¿‡å»¶ç¼“è¯·æ±‚ï¼Œä¸€ç§æ˜¯é€šè¿‡ä»£ç†ipçš„æ–¹å¼ã€‚ç¬¬ä¸€ç§æˆ‘å°è¯•å»¶ç¼“5ã€10sï¼Œä½†å¹¶æ²¡æœ‰ç”¨ã€‚å› è€Œå°è¯•ç”¨ç¬¬äºŒç§æ–¹å¼ï¼Œä»£ç†ipæ± çš„æ–¹å¼ã€‚ä»£ç†ipå¦‚ä½•ä½¿ç”¨åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­è®°å½•ã€‚ ä¸‹é¢æ˜¯æœ¬æ¬¡çš„å®Œæˆä»£ç  123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133#!/usr/bin/env python# coding: utf-8import urllib2import urllibimport requestsfrom bs4 import BeautifulSoupfrom lxml import etreeimport MySQLdbimport timeimport randomimport sysreload(sys)sys.setdefaultencoding('utf8')"""çŒ«çœ¼ä¸éœ€è¦httpè¯·æ±‚çš„å¤´éƒ¨ä¿¡æ¯ï¼Œæ·»åŠ ä¸Šåè€Œä¼šå‡ºé”™"""class Maoyan(): # èŽ·å–å½“å‰æ—¶é—´ def getCurrentTime(self): return time.strftime('[%Y-%m-%d %H:%M:%S]', time.localtime(time.time())) def __init__(self): self.time = time self.base_url = "https://maoyan.com/films?showType=1&amp;sortId=2" try: self.db = MySQLdb.connect('localhost', 'flyer_user', 'Tu4a0X9hOPKz6jS!e', 'flyer_db',charset='utf8') self.cur = self.db.cursor() except MySQLdb.Error, e: print self.getCurrentTime(), "è¿žæŽ¥æ•°æ®åº“é”™è¯¯ï¼ŒåŽŸå› %d: %s" % (e.args[0], e.args[1]) # æ’å…¥æ•°æ® def insertData(self, my_dict): try: self.db.set_character_set('utf8') cols = ', '.join(my_dict.keys()) print cols values = '","'.join(my_dict.values()) print values sql = "INSERT INTO maoyan (%s) VALUES (%s)" % (cols, '"' + values + '"') try: result = self.cur.execute(sql) insert_id = self.db.insert_id() self.db.commit() # åˆ¤æ–­æ˜¯å¦æ‰§è¡ŒæˆåŠŸ if result: return insert_id else: return 0 except MySQLdb.Error, e: # å‘ç”Ÿé”™è¯¯æ—¶å›žæ»š self.db.rollback() # ä¸»é”®å”¯ä¸€ï¼Œæ— æ³•æ’å…¥ if "key 'PRIMARY'" in e.args[1]: print self.getCurrentTime(), "æ•°æ®å·²å­˜åœ¨ï¼Œæœªæ’å…¥æ•°æ®" else: print self.getCurrentTime(), "æ’å…¥æ•°æ®å¤±è´¥ï¼ŒåŽŸå›  %d: %s" % (e.args[0], e.args[1]) except MySQLdb.Error, e: print self.getCurrentTime(), "æ•°æ®åº“é”™è¯¯ï¼ŒåŽŸå› %d: %s" % (e.args[0], e.args[1]) def dealData(self, my_dict): """å…ˆä»Žæ•°æ®åº“ä¸­æŸ¥è¯¢è¿™ä¸ªå½±ç‰‡åçš„è®°å½•ï¼Œå¦‚æžœæ²¡æœ‰ç›´æŽ¥æ’å…¥ï¼› è‹¥æ˜¯æ•°æ®åº“ä¸­å·²ç»å­˜åœ¨æ•°æ®ï¼Œé‚£ä¹ˆä»€ä¹ˆéƒ½ä¸åš""" self.db.set_character_set('utf8') filmTitile = my_dict.get('film_title') result = self.findFilmByfilmTitle(filmTitile) if len(result) == 0: self.insertData(my_dict) return else: pass def findFilmByfilmTitle(self, filmTitile): """é€šè¿‡å½±ç‰‡åç§°åŽ»æ•°æ®åº“ä¸­æŸ¥è¯¢""" self.db.set_character_set('utf8') sql = "select * from maoyan where film_title='%s'" % (filmTitile) self.cur.execute(sql) results = self.cur.fetchall() self.db.commit() return results def getHtml(self,url,proxys): """èŽ·å–html""" req = urllib2.Request(url) html = urllib2.urlopen(req).read().decode('utf-8') return html def get_detail_url(self, targetUrl, proxys): """ä»Žæ¦‚è§ˆé¡µé¢ä¸­åŽ»èŽ·å–å‰§é€å½±ç‰‡çš„è¯¦æƒ…é¡µé¢""" html = self.getHtml(targetUrl, proxys) print html soup = BeautifulSoup(html, 'lxml') urls = soup.find_all('a', attrs=&#123;'data-act':'movie-click'&#125;) dd = soup.find_all('dd') print dd for url in urls: detailPath = etree.HTML(str(url)) detail_url = detailPath.xpath(r'//a/@href') for durl in detail_url: self.getContents('https://maoyan.com' + durl, proxys) def getContents(self, url, proxys): """ä»Žè¯¦æƒ…é¡µé¢ä¸­èŽ·å–æ‰€éœ€data""" tmp1 = [] tmp2 = [] html = self.getHtml(url,proxys) detailPath = etree.HTML(html) film_name = detailPath.xpath(r'/html/body/div[3]/div/div[2]/div[1]/h3/text()') for name in film_name: tmp1.append("film_title") tmp2.append(name) pic_url = detailPath.xpath(r'/html/body/div[3]/div/div[1]/div/img/@src') for url in pic_url: strs = url.split('@') tmp1.append("pic_url") tmp2.append(strs[0]) release_time = detailPath.xpath(r'/html/body/div[3]/div/div[2]/div[1]/ul/li[3]/text()') for time in release_time: tmp1.append("release_time") tmp2.append(time[:10]) #å°†ä¸¤ä¸ªåˆ—è¡¨è½¬æ¢ä¸ºå­—å…¸ï¼Œæ–¹ä¾¿æ’å…¥æ•°æ®åº“ result_dict = dict(zip(tmp1, tmp2)) self.dealData(result_dict) def main(self): self.get_detail_url(self.base_url, proxys) for i in range(50): targetUrl = self.base_url + '&amp;offset=' + str((i+1)*30) self.get_detail_url(targetUrl, proxys)if __name__ == '__main__': maoyan = Maoyan() maoyan.main()]]></content>
      <categories>
        <category>python</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[pythonçˆ¬è™«å¦‚ä½•èŽ·å–åˆ°åªéœ€è¦çš„æ•°æ®]]></title>
    <url>%2F2017%2F09%2F18%2Fpython%E7%88%AC%E8%99%AB%E5%A6%82%E4%BD%95%E8%8E%B7%E5%8F%96%E5%88%B0%E5%8F%AA%E9%9C%80%E8%A6%81%E7%9A%84%E6%95%B0%E6%8D%AE%2F</url>
    <content type="text"><![CDATA[pythonçˆ¬è™«å¦‚ä½•èŽ·å–åˆ°åªéœ€è¦çš„æ•°æ® æ¦‚è¿°ï¼šåœ¨çˆ¬è™«çš„å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œæœ€éº»çƒ¦çš„ä¹Ÿè®¸å°±æ˜¯å¦‚ä½•ä»Žä¸€å¤§å †htmlæ ‡ç­¾ä¸­è¿‡æ»¤å‡ºæˆ‘ä»¬æ‰€éœ€è¦çš„ï¼Œåœ¨è¿™é‡Œæœ‰ä¸‰ç§æ–¹æ³•ï¼šreæ­£åˆ™è¡¨è¾¾å¼ã€BeautifulSoupã€ä½¿ç”¨lxmlä¸­çš„xpathã€‚ 1 ã€å…ˆä»‹ç»å¦‚ä½•ä½¿ç”¨lxmlä¸­çš„xpath(1) æˆ‘ä»¬éœ€è¦å®‰è£…ç›¸åº”çš„ä¾èµ–ï¼Œç„¶åŽåœ¨é¡¹ç›®ä¸­å¯¼å…¥ç›¸åº”çš„æ¨¡å— 12from lxml import etreeimport lxml (2) ä¹‹åŽå†ä»£ç ä¸­è½¬åŒ–æˆxpath12detailPath = etree.HTML(html) questions_titile = detailPath.xpath('//ul[@class="list-group"]/li/div/div[@class="question-title"]/a/text()') æ³¨æ„ä¸Šè¾¹çš„ä¸¤ä¸ªå•å¼•å·ä¹‹é—´çš„ä¸€ä¸²ï¼Œå‰é¢ä¸¤ä¸ªâ€™//â€˜æ˜¯è¡¨ç¤ºä»Žè¿™é‡Œå¼€å§‹ï¼Œç„¶åŽä¸€çº§ä¸€çº§çš„åŽ»å¯»æ‰¾æ‰€éœ€è¦çš„å…ƒç´ ï¼Œå¦‚æžœæƒ³èŽ·å–å±žæ€§å€¼ï¼Œä¾‹å¦‚æ˜¯å›¾ç‰‡çš„urlï¼Œæœ€åŽå¯ä»¥ä½¿ç”¨@hrefï¼Œå¦‚æžœæƒ³èŽ·å–é‡Œè¾¹çš„æ–‡æœ¬å€¼ï¼Œé‚£å°±ä½¿ç”¨text()ã€‚ (3) ç‰¹æ®Šç”¨æ³•12345678910from lxml import etreehtml=&quot;&quot;&quot; &lt;body&gt; &lt;div id=&quot;aa&quot;&gt;aa&lt;/div&gt; &lt;div id=&quot;ab&quot;&gt;ab&lt;/div&gt; &lt;div id=&quot;ac&quot;&gt;ac&lt;/div&gt; &lt;/body&gt; &quot;&quot;&quot;selector=etree.HTML(html)content=selector.xpath(&apos;//div[starts-with(@id,&quot;a&quot;)]/text()&apos;) #è¿™é‡Œä½¿ç”¨starts-withæ–¹æ³•æå–divçš„idæ ‡ç­¾å±žæ€§å€¼å¼€å¤´ä¸ºaçš„divæ ‡ç­¾ è¿™ç¯‡æ–‡ç« æœ‰ç®€å•åº”ç”¨ï¼šhttp://blog.csdn.net/winterto1990/article/details/47903653ä»‹ç» æœ€åŽä¸€ä¸ªå¤§ç»æ‹›ï¼šç›´æŽ¥åœ¨chromeä¸­å¼€å‘è€…æ¨¡å¼ï¼Œå³é”®æ‰¾åˆ°ä½ æƒ³å¯»æ‰¾çš„å…ƒç´ æ ‡ç­¾ï¼Œcopy xpathå°±èƒ½å°†è¿™ä¸ªå…ƒç´ å¯¹åº”çš„xpathæ‰¾åˆ°ï¼ 1 ã€pythonä¸­æä¾›çš„reæ¨¡å— æ­£åˆ™è¡¨è¾¾å¼æ˜¯ä¸€ç§æ›´ä¸ºå¼ºå¤§çš„å­—ç¬¦ä¸²åŒ¹é…ã€å­—ç¬¦ä¸²æŸ¥æ‰¾ã€å­—ç¬¦ä¸²æ›¿æ¢ç­‰æ“ä½œå·¥å…·ã€‚ä¸Šç¯‡è®²è§£äº†æ­£åˆ™è¡¨è¾¾å¼çš„åŸºæœ¬æ¦‚å¿µå’Œè¯­æ³•ä»¥åŠreæ¨¡å—çš„åŸºæœ¬ä½¿ç”¨æ–¹å¼ï¼Œè¿™èŠ‚æ¥è¯¦ç»†è¯´è¯´ re æ¨¡å—ä½œä¸º Python æ­£åˆ™è¡¨è¾¾å¼å¼•æ“Žæä¾›äº†å“ªäº›ä¾¿åˆ©æ€§æ“ä½œã€‚æ­£åˆ™è¡¨è¾¾å¼çš„æ‰€æœ‰æ“ä½œéƒ½æ˜¯å›´ç»•ç€åŒ¹é…å¯¹è±¡(Match)è¿›è¡Œçš„ï¼Œåªæœ‰è¡¨è¾¾å¼ä¸Žå­—ç¬¦ä¸²åŒ¹é…æ‰æœ‰å¯èƒ½è¿›è¡ŒåŽç»­æ“ä½œã€‚åˆ¤æ–­åŒ¹é…ä¸Žå¦æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯ re.match() å’Œ re.search()ï¼Œä¸¤è€…æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ åŒºåˆ«ï¼šmatch æ–¹æ³•ä»Žå­—ç¬¦ä¸²çš„èµ·å§‹ä½ç½®å¼€å§‹æ£€æŸ¥ï¼Œå¦‚æžœåˆšå¥½æœ‰ä¸€ä¸ªå­å­—ç¬¦ä¸²ä¸Žæ­£åˆ™è¡¨è¾¾å¼ç›¸åŒ¹é…ï¼Œåˆ™è¿”å›žä¸€ä¸ªMatchå¯¹è±¡ï¼Œåªè¦èµ·å§‹ä½ç½®ä¸åŒ¹é…åˆ™é€€å‡ºï¼Œä¸å†å¾€åŽæ£€æŸ¥äº†ï¼Œè¿”å›ž None 1234&gt;&gt;&gt; re.match(r&quot;b.r&quot;, &quot;foobar&quot;) # ä¸åŒ¹é…&gt;&gt;&gt; re.match(r&quot;b.r&quot;, &quot;barfoo&quot;) # åŒ¹é…&lt;_sre.SRE_Match object at 0x102f05b28&gt;&gt;&gt;&gt; search æ–¹æ³•è™½ç„¶ä¹Ÿæ˜¯ä»Žèµ·å§‹ä½ç½®å¼€å§‹æ£€æŸ¥ï¼Œä½†æ˜¯å®ƒåœ¨èµ·å§‹ä½ç½®ä¸åŒ¹é…çš„æ—¶å€™ä¼šä¸€ç›´å°è¯•å¾€åŽæ£€æŸ¥ï¼Œç›´åˆ°åŒ¹é…ä¸ºæ­¢ï¼Œå¦‚æžœåˆ°å­—ç¬¦ä¸²çš„æœ«å°¾è¿˜æ²¡æœ‰åŒ¹é…ï¼Œåˆ™è¿”å›ž None123&gt;&gt;&gt; re.search(r&quot;b.r&quot;, &quot;foobar&quot;) # åŒ¹é…&lt;_sre.SRE_Match object at 0x000000000254D578&gt;&gt;&gt;&gt; re.match(r&quot;b.r&quot;, &quot;foobr&quot;) # ä¸åŒ¹é… ä½†æ˜¯äºŒè€…éƒ½æ˜¯åŒ¹é…åˆ°å°±åœæ­¢åŒ¹é…äº†ï¼Œå“ªæ€•è¿˜æœ‰æ›´å¤šèƒ½åŒ¹é…çš„ä¹Ÿä¸ç®¡ã€‚ å‚è€ƒï¼šhttps://foofish.net/re-tutorial.html ã€https://foofish.net/crawler-re-second.html]]></content>
      <categories>
        <category>python</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ä¸Šä¼ æœ¬åœ°jaråŒ…åˆ°nexusä»“åº“ä¸­]]></title>
    <url>%2F2017%2F09%2F16%2F%E4%B8%8A%E4%BC%A0%E6%9C%AC%E5%9C%B0jar%E5%8C%85%E5%88%B0nexus%E4%BB%93%E5%BA%93%E4%B8%AD%2F</url>
    <content type="text"><![CDATA[#ä¸Šä¼ æœ¬åœ°jaråŒ…åˆ°nexusä»“åº“ä¸­ æ¦‚è¿°ï¼šæœ‰æ—¶åœ¨æˆ‘ä»¬çš„nexusä»“åº“ä¸­æ²¡æœ‰é¡¹ç›®ä¸­æ‰€éœ€çš„jaråŒ…ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ä»Žç½‘ç»œä¸­ä¸‹è½½ï¼Œç„¶åŽä¸Šä¼ åˆ°nexusä»“åº“ä¸­ï¼Œç„¶åŽæˆ‘ä»¬å°±å¯ä»¥å—¨æ£®çš„æ•²ä»£ç å•¦ã€‚ 1ã€é¦–å…ˆéœ€è¦æ˜¯å¯¹åº”çš„repositoryæœ‰ä¸Šä¼ çš„æƒé™ 2ã€æˆ‘ä»¬è¿™é‡Œè®²jaråŒ…ä¸Šä¼ åˆ°3rd partyä»“åº“ä¸­ã€‚å…ˆç‚¹å‡»artifact uploadç„¶åŽé€‰æ‹©GAV definitionï¼Œæ‰‹åŠ¨å°†group idã€artifactã€versionå¡«å…¥ï¼Œç„¶åŽpackagingé€‰æ‹©jarã€‚ 3ã€ç„¶åŽç‚¹å‡»select artifactï¼ˆsï¼‰ to uploadå°†æœ¬åœ°çš„jaråŠ å…¥ï¼Œç‚¹å‡»add artifactï¼Œç„¶åŽç‚¹å‡»upload artifactã€‚ 4ã€æœ€åŽåˆ·æ–°å°±èƒ½çœ‹åˆ°åˆšæ‰åŠ å…¥çš„jaråŒ…ã€‚ æ­¤å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå°†å…¥åˆ°3rdä»“åº“ä¹‹åŽå¯èƒ½å¯¹åº”çš„åæ ‡ä¼šå‘ç”Ÿå˜åŒ–ã€‚å¦‚æžœå‰åŽåæ ‡æ²¡æœ‰å¯¹åº”ä¸Šï¼Œé‚£ä¹ˆåœ¨pomæ–‡ä»¶ä¸­è¿˜æ˜¯æ‰¾ä¸åˆ°ç›¸åº”çš„ä¾èµ–ã€‚]]></content>
      <categories>
        <category>java</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[hiveå¦‚ä½•å®žçŽ°è‡ªå®šä¹‰å‡½æ•°]]></title>
    <url>%2F2017%2F09%2F14%2Fhive%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%AE%9A%E4%B9%89%E5%87%BD%E6%95%B0%2F</url>
    <content type="text"><![CDATA[hiveå¦‚ä½•å®žçŽ°è‡ªå®šä¹‰å‡½æ•° æ¦‚è¿°ï¼šæˆ‘ä»¬åœ¨ä½¿ç”¨hiveçš„æ—¶å€™ï¼Œå¾ˆå¤šæ—¶å€™æ‰§è¡Œå¤æ‚çš„sqlæ—¶ï¼Œhiveæä¾›çš„å‡½æ•°æ— æ³•æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ã€‚è¿™ä¸ªæ—¶å€™å°±éœ€è¦æˆ‘ä»¬è‡ªå·±åŽ»å®šä¹‰ä¸€ä¸ªå‡½æ•°ã€‚å¹¸å¥½ï¼Œhiveä¸ºæˆ‘ä»¬å…è®¸ä½¿ç”¨javaæ¥å­çº¿è‡ªå®šä¹‰å‡½æ•°ã€‚ 1ã€å®žçŽ°è‡ªå®šä¹‰UDFå‡½æ•°å¿…é¡»æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ã€‚ ï¼ˆ1ï¼‰ å¿…é¡»æ˜¯org.apache.Hadoop.hive.ql.exec.UDFçš„å­ç±» ï¼ˆ2ï¼‰ å¿…é¡»å®žçŽ°evaluateå‡½æ•°ã€‚ 2ã€å®žçŽ°æ–¹æ³•å…·ä½“å¦‚ä¸‹ï¼š ï¼ˆ1ï¼‰å°†$HIVE_HOME/libä¸­çš„ä¸¤ä¸ªjaråŒ…ï¼Œåˆ†åˆ«æ˜¯hive-contrib-2.1.1.jarå’Œhive-exec-2.1.1.jarï¼ŒæŠŠä¸¤ä¸ªjaråŒ…æ”¾ç½®åˆ°javaçš„ç›®å½•ä¸‹ï¼Œç„¶åŽæ–°å»ºä¸€ä¸ªç±»ï¼Œç»§æ‰¿UDFã€‚ 123456789101112131415161718package org.apache.hadoop.hive.contrib.udf.example;import org.apache.commons.lang.StringUtils;import org.apache.hadoop.hive.ql.exec.UDF;import java.util.Arrays;public class ReturnMin extends UDF&#123; public static Integer evaluate(String str, String separator) &#123; int result = 100; if(StringUtils.isEmpty(str))&#123; return result; &#125; String[] strArray = str.split(separator); int[] intArray = new int[strArray.length]; for(int i = 0 ; i &lt; strArray.length ; i++) &#123; intArray[i] = Integer.parseInt(strArray[i]); &#125; Arrays.sort(intArray); return intArray[0]; &#125; (2) ç„¶åŽå°†ReturnMin.classæ–‡ä»¶æ‹·è´åˆ°hive-contrib-2.1.1.jar\org\apache\hadoop\hive\contrib\udf\exampleç›®å½•ä¸­ï¼Œç„¶åŽæ›¿æ¢hive selectåœ¨hiveçš„cliä¸­æ‰§è¡Œï¼šCREATE FUNCTION ReturnMin AS â€˜org.apache.hadoop.hive.contrib.udf.example.ReturnMinâ€™;ç„¶åŽé‡æ–°è¿›å…¥cliä¸­ï¼Œç»™è¿™ä¸ªå‡½æ•°ä¼ é€’ä¸€ä¸ªæ•°å­—çš„å­—ç¬¦ä¸²å’Œåˆ†éš”ç¬¦å°±èƒ½å¤Ÿå°†è¿™ä¸ªå­—ç¬¦ä¸²æœ€å°çš„å€¼è¿”å›žã€‚ hiveåˆ é™¤ä¸€ä¸ªè‡ªå®šä¹‰å‡½æ•°ï¼š drop function cutString;]]></content>
      <categories>
        <category>hive</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[hiveä¸­sqlæ€»ç»“]]></title>
    <url>%2F2017%2F09%2F14%2Fhive%E4%B8%ADsql%E6%80%BB%E7%BB%93%2F</url>
    <content type="text"><![CDATA[hiveä¸­sqlæ€»ç»“1ã€å¯¹æŒ‡å®šçš„æŸä¸€ä¸ªåˆ—åŽ»é‡1insert into table allrecord partition (year=2017, month=08, day=25) select t.id, t.tssend, t.apmac, t.mac, t.rssi from (select id, tssend, apmac ,mac, rssi, row_number() over(distribute by mac sort by tssend )as rn from allrecords) t where t.rn=1; ä¸Šé¢è¯•å¯¹å­—æ®µmacåŽ»é‡ï¼Œç„¶åŽå¯¹tssendæŽ’åºåŽæ’å…¥allrecordè¿™å¼ è¡¨ 2ã€åˆ é™¤åˆ†åŒº1ALTER TABLE macinfo_2017 DROP IF EXISTS PARTITION (year=2017, month=03, day=22); 3ã€åˆ é™¤ä¸€å¼ è¡¨ï¼Œå¦‚æžœå¯åŠ¨äº†å›žæ”¶ç«™åŠŸèƒ½ï¼Œé‚£ä¹ˆè¿™å¼ è¡¨ä¼šä¿å­˜åœ¨å›žæ”¶ç«™é‡Œï¼Œä¹Ÿæ˜¯èƒ½å¤Ÿæ¢å¤ä¿¡æ¯çš„ã€‚1drop table tablename; è‹¥æ˜¯è¡¨åˆ›å»ºä¸ºå¤–éƒ¨è¡¨ï¼Œåˆ™åªä¼šåˆ é™¤ç›¸åº”çš„åŽŸä¿¡æ¯ï¼Œå¯¹æ•°æ®æ²¡æœ‰å½±å“ã€‚ 4ã€ åˆ›å»ºä¸€ä¸ªpartition_table002çš„è¡¨ï¼Œä½¿å¾—è¡¨ç»“æž„å’Œpartition_table001ä¸€æ ·ã€‚1create table if not exists partition_table002 like partition_table001; 5ã€ä½¿ç”¨loadåŠ è½½æ•°æ®åˆ°è¡¨ä¸­1load data local inpath 't_student1.txt' overwrite inte table t_student1; 6ã€åˆ›å»ºå¤–éƒ¨è¡¨create EXTERNAL table IF NOT EXISTS macinfo_20170221( tssend string COMMENT 'Probe upload data time', apmac string COMMENT 'Probe MAC address', mac string COMMENT 'Mobile device MAC address', rssi string COMMENT 'WiFi signal strength of mobile devices') partitioned by (year int, month int, day int) ROW FORMAT SERDE 'org.openx.data.jsonserde.JsonSerDe' WITH SERDEPROPERTIES ( "mac"="$.mac", "apmac"="$.apmac", "rssi"="$.rssi", "tssend"="$.tssend" ) STORED AS TEXTFILE LOCATION '/opt/local/software/a.txt'; æ³¨æ„ï¼šè¿™é‡Œåˆ›å»ºå¤–éƒ¨è¡¨æ—¶ä¼šæœ‰å‘ï¼Œä¸»è¦æ˜¯æ•°æ®å­˜å‚¨æ ¼å¼çš„é—®é¢˜ï¼Œæˆ‘çš„æ•°æ®å­˜å‚¨ä¸ºjsonæ ¼å¼ï¼Œè€Œhiveå¹¶ä¸ç›´æŽ¥æ”¯æŒè¯»å–jsonæ ¼å¼æ•°æ®ï¼Œéœ€è¦æ·»åŠ ç›¸åº”çš„jaråŒ…æ‰èƒ½è§£æžæ•°æ®ã€‚ 7ã€hiveå¤–éƒ¨è¡¨åˆ›å»ºåˆ†åŒºå…³è”ç›¸åº”çš„ç›®å½•ï¼ˆå¿…é¡»æ˜¯ç›®å½•ï¼‰ALTER TABLE macinfo_2017 ADD PARTITION (year = 2017, month = 02, day = 21); æœªå®Œå¾…ç»­ã€‚ã€‚ã€‚ã€‚]]></content>
      <categories>
        <category>hive</category>
      </categories>
  </entry>
</search>
