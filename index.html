<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-hk">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="äººä»¬å¸¸å¸¸å˜²ç¬‘â€œè³è‡‚å½“è½¦â€ ä½†æœ‰æ—¶å€™å•Šï¼Œä½ å¹¶ä¸æ˜¯é©¾è½¦çš„äºº æ­£å·§æ˜¯é‚£åªï¼ŒåæŠ—ä¸äº†çš„è³è‚ã€‚">
<meta property="og:type" content="website">
<meta property="og:title" content="èŠ±è°¢èŠ±å¼€">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="èŠ±è°¢èŠ±å¼€">
<meta property="og:description" content="äººä»¬å¸¸å¸¸å˜²ç¬‘â€œè³è‡‚å½“è½¦â€ ä½†æœ‰æ—¶å€™å•Šï¼Œä½ å¹¶ä¸æ˜¯é©¾è½¦çš„äºº æ­£å·§æ˜¯é‚£åªï¼ŒåæŠ—ä¸äº†çš„è³è‚ã€‚">
<meta property="og:locale" content="zh-hk">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="èŠ±è°¢èŠ±å¼€">
<meta name="twitter:description" content="äººä»¬å¸¸å¸¸å˜²ç¬‘â€œè³è‡‚å½“è½¦â€ ä½†æœ‰æ—¶å€™å•Šï¼Œä½ å¹¶ä¸æ˜¯é©¾è½¦çš„äºº æ­£å·§æ˜¯é‚£åªï¼ŒåæŠ—ä¸äº†çš„è³è‚ã€‚">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>èŠ±è°¢èŠ±å¼€</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-hk">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">èŠ±è°¢èŠ±å¼€</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é 
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            æ­¸æª”
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/25/ELK+KAFKAè¯¦è§£(äºŒ)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="leonyoung">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://res.cloudinary.com/leon824/image/upload/v1505793001/IMG_3957_uwrsum.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="èŠ±è°¢èŠ±å¼€">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/25/ELK+KAFKAè¯¦è§£(äºŒ)/" itemprop="url">ELK+KAFKAè¯¦è§£(äºŒ)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">ç™¼è¡¨æ–¼</span>
              
              <time title="å‰µå»ºæ–¼" itemprop="dateCreated datePublished" datetime="2018-08-25T13:42:14+08:00">
                2018-08-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†é¡æ–¼</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ELK/" itemprop="url" rel="index">
                    <span itemprop="name">ELK</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="https://res.cloudinary.com/leon824/image/upload/v1535599872/pic5_pn74x6.jpg" width="80%" height="80%"></p>
<blockquote>
<p> ä¸Šä¸€ç¯‡æ–‡ç« æˆ‘ä»¬å·²ç»å°†filebeatã€kafkaã€zookeeperã€logstashå®‰è£…é…ç½®å®Œæ¯•äº†ã€‚æ¥ä¸‹æ¥ä¸»è¦æ˜¯ç´¢å¼•æ•°æ®ã€å±•ç¤ºæ•°æ®é˜¶æ®µã€‚</p>
</blockquote>
<hr>
<h2 id="å®‰è£…Elasticsearch"><a href="#å®‰è£…Elasticsearch" class="headerlink" title="å®‰è£…Elasticsearch"></a>å®‰è£…Elasticsearch</h2><p>é¦–å…ˆåˆ°å®˜ç½‘ä¸‹è½½5.3.3ç‰ˆæœ¬çš„å®‰è£…åŒ…</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;</span> axel -n 5 https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-5.3.3.tar.gz</div></pre></td></tr></table></figure>
<p>ç„¶ååœ¨ESçš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸¤ä¸ªç›®å½•dataã€logsï¼Œç”¨æ¥ä¿å­˜ç´¢å¼•æ•°æ®ã€æ—¥å¿—ç­‰ç­‰</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;</span> mkdir logs</div><div class="line"><span class="meta">&gt;</span> mkdir data</div></pre></td></tr></table></figure>
<p>è¿›å…¥<code>config</code>ç›®å½•ç¼–è¾‘<code>elasticsearch.yml</code>æ–‡ä»¶ï¼Œè¿™ç§ä»¥.ymlç±»å‹ç»“å°¾çš„æ–‡ä»¶è¦æ³¨æ„ç¼©è¿›ã€‚</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Path to directory where to store the data (separate multiple locations by comma):</span></div><div class="line"><span class="string">path.data:</span> <span class="string">/opt/soft/elasticsearch-5.5.3/data</span></div><div class="line"><span class="comment"># Path to log files:</span></div><div class="line"><span class="string">path.logs:</span> <span class="string">/opt/soft/elasticsearch-5.5.3/logs</span></div><div class="line"><span class="comment"># ç»‘å®šä¸€ä¸ªæŒ‡å®šçš„ip</span></div><div class="line"><span class="comment"># network.host: 0.0.0.0</span></div><div class="line"><span class="string">http.port:</span> <span class="number">9200</span></div><div class="line"><span class="comment"># åè¾¹ä½¿ç”¨æ’ä»¶çš„æ—¶å€™éœ€è¦ä½¿ç”¨åˆ°ä¸‹è¾¹ä¸¤ä¸ªé…ç½®ã€‚</span></div><div class="line"><span class="string">http.cors.enabled:</span> <span class="literal">true</span></div><div class="line"><span class="string">http.cors.allow-origin:</span> <span class="string">"*"</span></div></pre></td></tr></table></figure>
<p>ä¸Šè¾¹æ˜¯ä¸€äº›ä¸»è¦çš„é…ç½®ï¼Œç„¶åå¯ä»¥ç›´æ¥å¯åŠ¨ESäº†</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;</span> ./bin/elasticsearch &amp;</div></pre></td></tr></table></figure>
<p>ä¸Šè¾¹æˆ‘ä»¬æ˜¯å·²ç»å¯åŠ¨äº†ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜ä¸çŸ¥é“æ•°æ®æ˜¯å¦é€šè¿‡<code>logstash</code>å†™å…¥åˆ°ESä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦ä¸¤ä¸ªæ­¥éª¤æ¥ç¡®ä¿æˆ‘ä»¬å®‰è£…é…ç½®æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼š</p>
<ul>
<li>åˆ›å»ºä¸€ä¸ªç´¢å¼•ï¼ˆESä¸­çš„ç´¢å¼•ç±»ä¼¼äºæ•°æ®åº“ä¸­çš„ä¸€ä¸ªæ•°æ®åº“å®ä¾‹ï¼‰ ã€‚</li>
<li>å®‰è£…<code>head</code>æ’ä»¶ï¼ŒæŸ¥çœ‹ESæƒ…å†µ</li>
</ul>
<h3 id="ç´¢å¼•"><a href="#ç´¢å¼•" class="headerlink" title="ç´¢å¼•"></a>ç´¢å¼•</h3><p>åœ¨è¿™ä¹‹å‰æˆ‘ä»¬éœ€è¦äº†è§£ESä¸­çš„ä¸‰ä¸ªåŸºæœ¬æ¦‚å¿µï¼š</p>
<ul>
<li>indexï¼šESç®¡ç†æ•°æ®çš„æœ€é¡¶å±‚å•ä½ï¼Œç±»ä¼¼äºå•ä¸ªæ•°æ®åº“çš„æ¦‚å¿µã€‚</li>
<li>document ï¼šESçš„indexä¸­å•æ¡æ•°æ®è¢«ç§°ä¸ºdocument</li>
<li>typeï¼šdocumentå¯ä»¥åˆ†ç»„ï¼Œåˆ†ç»„å°±å«type</li>
</ul>
<p>é€šè¿‡æŒ‡å®šä¸€ä¸ªæ–‡ä»¶çš„æ–¹å¼åˆ›å»ºä¸€ä¸ªç´¢å¼•ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;</span>  curl -XPUT 'http://localhost:9200/nginx_log_index/test_log/1?pretty' -H 'Content-Type: application/json' -d '/opt/soft/logstash-5.5.3/output/es_template.json'</div></pre></td></tr></table></figure>
<p>åˆ é™¤ç´¢å¼•ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;</span>  curl -X DELETE 'localhost:9200/nginx_log_index'</div></pre></td></tr></table></figure>
<h3 id="å®‰è£…headæ’ä»¶"><a href="#å®‰è£…headæ’ä»¶" class="headerlink" title="å®‰è£…headæ’ä»¶"></a>å®‰è£…headæ’ä»¶</h3><p>headæ’ä»¶è¿è¡Œéœ€è¦nodeç¯å¢ƒï¼Œè¿™é‡Œå°±ä¸è®¨è®ºå¦‚ä½•å®‰è£…nodeäº†ï¼Œç½‘ä¸Šèµ„æ–™æ¯”è¾ƒå¤šã€‚</p>
<p>ä½¿ç”¨gitä¸‹è½½headæºç ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;</span> git clone git://github.com/mobz/elasticsearch-head.git</div></pre></td></tr></table></figure>
<p>ç„¶åè¿›å…¥headçš„ç›®å½•æ‰§è¡ŒæŒ‡ä»¤</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;</span> npm install</div></pre></td></tr></table></figure>
<p>å¯åŠ¨</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&gt; npm run start</div></pre></td></tr></table></figure>
<p>è‹¥æ˜¯ESä½¿ç”¨çš„éƒ½æ˜¯é»˜è®¤ç«¯å£ï¼Œé‚£ä¹ˆ<code>head</code>æ’ä»¶å°±ä¸éœ€è¦ä¿®æ”¹é…ç½®ã€‚</p>
<p>åœ¨æµè§ˆå™¨ä¸­è®¿é—®<code>http://ip:9100/</code>å°±å¯ä»¥çœ‹åˆ°ESçš„æƒ…å†µ</p>
<p><img src="https://res.cloudinary.com/leon824/image/upload/v1535186203/head_yvixk7.png" width="80%" height="80%"></p>
<h3 id="ESè¡¥å……"><a href="#ESè¡¥å……" class="headerlink" title="ESè¡¥å……"></a>ESè¡¥å……</h3><p>Elasticsearchæ˜¯ä¸€ä¸ªæœç´¢å¼•æ“ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å®ƒæä¾›çš„æŸ¥è¯¢è¯­å¥å®ç°ç±»ä¼¼sqlçš„æŸ¥è¯¢åŠŸèƒ½ï¼Œä¸ºæˆ‘ä»¬å±•ç¤ºæ•°æ®æä¾›ä¾¿åˆ©ï¼Œä¸‹é¢åˆ—ä¸¾ä¸€ä¸ªå¸¸ç”¨çš„æŸ¥è¯¢ã€‚</p>
<p>1ã€æŒ‡å®šä¸€ä¸ªindexï¼Œæœç´¢å…¶ä¸‹æ‰€æœ‰typeçš„æ•°æ®</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;</span> curl -X GET 'http://localhost:9200/nginx-log/_search?pretty' -H 'Content-Type: application/json' -d '  </div><div class="line">&#123;</div><div class="line">  "query": &#123;</div><div class="line">    "match_all": &#123;&#125;</div><div class="line">  &#125;</div><div class="line">&#125;'</div></pre></td></tr></table></figure>
<p>ä¸Šè¾¹çš„nginx-logå°±æ˜¯æˆ‘ä»¬æƒ³è¦æŸ¥è¯¢çš„index</p>
<p>2ã€æŸ¥çœ‹æ¯ä¸ªindexæ‰€åŒ…å«çš„type</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;</span> curl 'localhost:9200/_mapping?pretty=true'</div></pre></td></tr></table></figure>
<p>3ã€æŸ¥çœ‹å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰Index</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;</span> curl -X GET 'http://localhost:9200/_cat/indices?v'</div></pre></td></tr></table></figure>
<p>4ã€æ ¹æ®æŸä¸ªå­—æ®µè¿›è¡Œåˆ†ç»„åç»Ÿè®¡ï¼Œå®ç°ç±»ä¼¼äº<code>sql</code>é‡Œè¾¹çš„åŠŸèƒ½</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> table_name <span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">field</span>;</div></pre></td></tr></table></figure>
<p>ä¸‹é¢çš„ESæŸ¥è¯¢è¯­å¥åŠŸèƒ½å’Œä¸Šè¾¹çš„sqlæ˜¯ç±»ä¼¼çš„</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;</span> curl -X POST 'http://localhost:9200/nginx-log/nginxlog/_search?pretty' -H 'Content-Type: application/json' -d'</div><div class="line">&#123;	</div><div class="line">	"size": 0,</div><div class="line">	"aggs": &#123;</div><div class="line">	"group_by_service_name": &#123;</div><div class="line">		"terms": &#123; </div><div class="line">		"field": "service_name.keyword"</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">  &#125;</div><div class="line">&#125;'</div></pre></td></tr></table></figure>
<hr>
<h2 id="å®‰è£…kibana"><a href="#å®‰è£…kibana" class="headerlink" title="å®‰è£…kibana"></a>å®‰è£…kibana</h2><p>ä¸‹è½½ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;</span> axel -n 5 https://artifacts.elastic.co/downloads/kibana/kibana-5.5.3-linux-x86_64.tar.gz</div></pre></td></tr></table></figure>
<p>kibanaçš„å®‰è£…é…ç½®è¾ƒä¸ºç®€å•ï¼Œåªéœ€è¦åœ¨configç›®å½•ä¸­çš„kibana.ymlæ–‡ä»¶é…ç½®ä¸¤ä¸ªå­—æ®µ</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Kibana is served by a back end server. This setting specifies the port to use.</span></div><div class="line"><span class="string">server.port:</span> <span class="number">5601</span></div><div class="line"><span class="comment"># The URL of the Elasticsearch instance to use for all your queries.</span></div><div class="line"><span class="string">elasticsearch.url:</span> <span class="string">"http://localhost:9200"</span></div></pre></td></tr></table></figure>
<p>ç„¶åå¯åŠ¨</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;</span> ./bin/kibana &amp;</div></pre></td></tr></table></figure>
<p>åœ¨ç¬¬ä¸€æ¬¡å¯åŠ¨kibanaçš„æ—¶å€™ï¼Œéœ€è¦æ‰‹åŠ¨é…ç½®ä¸€ä¸ªindexï¼Œç„¶åkibanaä¼šé€šè¿‡è¿™ä¸ªindexå»ESä¸­æŸ¥è¯¢å¹¶å±•ç¤ºã€‚</p>
<p><img src="https://res.cloudinary.com/leon824/image/upload/v1535187828/kiaban_bozs2a.png" width="80%" height="80%"></p>
<p>æˆ‘ä»¬å°†åˆšæ‰åˆ›å»ºçš„indexåŠ å…¥åˆ°é‡Œè¾¹ï¼Œç„¶åç‚¹å‡»<code>Discover</code>é€‰æ‹©åˆšæ‰é…ç½®çš„indexï¼Œåœ¨é€‰æ‹©æ—¶é—´ï¼Œå°±èƒ½å¤Ÿçœ‹åˆ°æ•°æ®å·²ç»è¢«å±•ç¤ºå‡ºæ¥äº†ã€‚</p>
<p><img src="https://res.cloudinary.com/leon824/image/upload/v1535203571/discoey_g4ltbs.png" width="80%" height="80%"></p>
<p>ä¸Šå›¾ä¸­çš„å·¦ä¾§å¯ä»¥é€‰æ‹©åœ¨å³ä¾§å±•ç¤ºå“ªäº›å­—æ®µã€‚</p>
<h3 id="ä½¿ç”¨kibanaç»˜å›¾"><a href="#ä½¿ç”¨kibanaç»˜å›¾" class="headerlink" title="ä½¿ç”¨kibanaç»˜å›¾"></a>ä½¿ç”¨kibanaç»˜å›¾</h3><p>&emsp;&emsp;åœ¨kibanaä¸­ä¹Ÿæ˜¯å¯ä»¥å®Œæˆä¸€äº›ç»˜å›¾çš„ï¼Œä½†æ˜¯ç”±äºkibanaæ²¡æœ‰ç›¸åº”æƒé™æ§åˆ¶ï¼Œå¹¶ä¸”kibanaçš„é¢œå€¼æ˜¯æ²¡æœ‰Grafanaé«˜ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜æ˜¯ç”¨Grafanaæ¥å±•ç¤ºå›¾è¡¨ï¼ŒkibanaæŸ¥è¯¢æ—¥å¿—ã€‚ä¸‹é¢å°±æ¥æ¢è®¨ä¸€ä¸‹Grafanaç›¸å…³å†…å®¹</p>
<hr>
<h2 id="Grafanaç›¸å…³"><a href="#Grafanaç›¸å…³" class="headerlink" title="Grafanaç›¸å…³"></a>Grafanaç›¸å…³</h2><p>æˆ‘ä»¬å…ˆè¿›å…¥Grafanaçš„<a href="https://grafana.com/grafana/download" target="_blank" rel="external">å®˜ç½‘</a>ï¼Œé‡Œè¾¹æœ‰ä»‹ç»å¦‚ä½•å®‰è£…ï¼Œä¹Ÿå¾ˆç®€å•ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;</span> wget https://s3-us-west-2.amazonaws.com/grafana-releases/release/grafana_5.2.2_amd64.deb </div><div class="line"><span class="meta">&gt;</span> sudo dpkg -i grafana_5.2.2_amd64.deb</div></pre></td></tr></table></figure>
<p>ç„¶åå¯åŠ¨</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;</span> sudo /bin/systemctl start grafana-server</div></pre></td></tr></table></figure>
<p>è®¿é—®<code>http://localhost:3000</code>ç„¶åä½¿ç”¨adminç™»å½•è¿›å»ï¼Œå¯†ç é»˜è®¤ä¹Ÿæ˜¯adminã€‚è¿›å»åéœ€è¦å…ˆé…ç½®æ•°æ®æºã€‚</p>
<p><img src="https://res.cloudinary.com/leon824/image/upload/v1535204856/gra_ihk0b2.png" width="70%" height="70%"></p>
<p>  ä¸Šè¾¹æœ‰å‡ ä¸ªåœ°æ–¹éœ€è¦æ³¨æ„ï¼š</p>
<ul>
<li>typeï¼šç”±äºæˆ‘ä»¬æ˜¯ä½¿ç”¨ESä½œä¸ºæ•°æ®æºï¼Œæ‰€ä»¥è¿™é‡Œä¸€å®šè¦é€‰æ‹©<code>elasticsearch</code></li>
<li>url : è¿æ¥elasticsearchæœåŠ¡çš„åœ°å€</li>
<li>Accessï¼šéœ€è¦é€‰æ‹©å…·ä½“æŸç§è¿æ¥æ–¹å¼ï¼Œä¸¤ç§æ–¹å¼æ˜¯ä¸åŒçš„ï¼Œå…·ä½“ä¸åŒè¿™é‡Œä¸è¯¦ç»†æè¿°</li>
<li>Authï¼šESè‹¥æ˜¯å®‰è£…äº†ç›¸åº”å¯†ç æƒé™ï¼Œè¿™é‡Œéœ€è¦æ­£ç¡®é…ç½®ä¹‹åæ‰èƒ½è®¿é—®ã€‚</li>
<li>Index name ï¼š è¿™é‡Œæ˜¯å¡«åœ¨ESä¸­åˆ›å»ºçš„indexï¼Œä½†æ˜¯è¦æ³¨æ„ï¼Œè‹¥æ˜¯index nameåŒ…å«äº†æ—¥å¿—ï¼Œé‚£ä¹ˆåè¾¹çš„patternå°±ä¸è¦é€‰æ‹©ä»»ä½•æ—¥æœŸäº†ã€‚</li>
<li>Version ï¼š éœ€è¦é€‰æ‹©å’Œå®‰è£…çš„ESåŒ¹é…çš„ç‰ˆæœ¬</li>
</ul>
<p>ç„¶åä¿å­˜ï¼Œç„¶åå°±å¯ä»¥åˆ›å»ºDashBoardã€panelã€‚grafanaç»˜å›¾ã€æŸ¥è¯¢ç›¸å…³å†…å®¹è¾ƒå¤šï¼Œåè¾¹è‹¥æœ‰æ—¶é—´è¿˜ä¼šæ¢è®¨ä¸€ä¸‹grafanaç»˜å›¾ç›¸å…³ã€‚</p>
<hr>
<h3 id="å‚è€ƒï¼š"><a href="#å‚è€ƒï¼š" class="headerlink" title="å‚è€ƒï¼š"></a>å‚è€ƒï¼š</h3><ul>
<li><a href="https://www.cnblogs.com/hupengcool/p/4031543.html" target="_blank" rel="external">elasticsearch åˆ›å»ºç´¢å¼•ï¼Œä»¥åŠæ£€ç´¢ä¸€æ¡æ•°æ®</a></li>
<li><a href="https://grafana.com/grafana/download" target="_blank" rel="external">grafanaå®˜ç½‘</a></li>
<li><a href="https://groups.io/g/grafana/topic/tutorial_for_elasticsearch/716433?p=,,,20,0,0,0" target="_blank" rel="external">groups.io</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/22/ELK+KAFKAè¯¦è§£ï¼ˆä¸€ï¼‰/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="leonyoung">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://res.cloudinary.com/leon824/image/upload/v1505793001/IMG_3957_uwrsum.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="èŠ±è°¢èŠ±å¼€">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/22/ELK+KAFKAè¯¦è§£ï¼ˆä¸€ï¼‰/" itemprop="url">ELK+KAFKAè¯¦è§£ï¼ˆä¸€ï¼‰</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">ç™¼è¡¨æ–¼</span>
              
              <time title="å‰µå»ºæ–¼" itemprop="dateCreated datePublished" datetime="2018-08-22T10:47:17+08:00">
                2018-08-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†é¡æ–¼</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ELK/" itemprop="url" rel="index">
                    <span itemprop="name">ELK</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>  <img src="https://res.cloudinary.com/leon824/image/upload/v1535599870/pic4_vjsn1u.jpg" width="80%" height="80%"></p>
<blockquote>
<p>&emsp;&emsp;æ—¥å¿—ï¼Œå¯¹äºä»»ä½•ç³»ç»Ÿæ¥è¯´éƒ½æ˜¯åŠå…¶é‡è¦çš„ç»„æˆéƒ¨åˆ†ã€‚åœ¨è®¡ç®—æœºç³»ç»Ÿé‡Œé¢ï¼Œæ›´æ˜¯å¦‚æ­¤ã€‚ä½†æ˜¯ç”±äºç°åœ¨çš„è®¡ç®—æœºç³»ç»Ÿå¤§å¤šæ¯”è¾ƒå¤æ‚ï¼Œå¾ˆå¤šç³»ç»Ÿéƒ½ä¸æ˜¯åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œç”šè‡³éƒ½æ˜¯è·¨å›½ç•Œçš„ï¼›å³ä½¿æ˜¯åœ¨ä¸€ä¸ªåœ°æ–¹çš„ç³»ç»Ÿï¼Œä¹Ÿæœ‰ä¸åŒçš„æ¥æºï¼Œæ¯”å¦‚ï¼Œæ“ä½œç³»ç»Ÿï¼Œåº”ç”¨æœåŠ¡ï¼Œä¸šåŠ¡é€»è¾‘ç­‰ç­‰ã€‚ä»–ä»¬éƒ½åœ¨ä¸åœäº§ç”Ÿå„ç§å„æ ·çš„æ—¥å¿—æ•°æ®ã€‚<br> &emsp;&emsp;æ ¹æ®ä¸å®Œå…¨ç»Ÿè®¡ï¼Œæˆ‘ä»¬å…¨çƒæ¯å¤©å¤§çº¦è¦äº§ç”Ÿ 2EBï¼ˆ1018ï¼‰çš„æ•°æ®ã€‚é¢å¯¹å¦‚æ­¤æµ·é‡çš„æ•°æ®ï¼Œåˆæ˜¯åˆ†å¸ƒåœ¨å„ä¸ªä¸åŒåœ°æ–¹ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦å»æŸ¥æ‰¾ä¸€äº›é‡è¦çš„ä¿¡æ¯ï¼Œéš¾é“è¿˜æ˜¯ä½¿ç”¨ä¼ ç»Ÿçš„æ–¹æ³•ï¼Œå»ç™»é™†åˆ°ä¸€å°å°æœºå™¨ä¸ŠæŸ¥çœ‹ï¼Ÿçœ‹æ¥ä¼ ç»Ÿçš„å·¥å…·å’Œæ–¹æ³•å·²ç»æ˜¾å¾—éå¸¸ç¬¨æ‹™å’Œä½æ•ˆäº†ã€‚äºæ˜¯ï¼Œä¸€äº›èªæ˜äººå°±æå‡ºäº†å»ºç«‹ä¸€å¥—é›†ä¸­å¼çš„æ–¹æ³•ï¼ŒæŠŠä¸åŒæ¥æºçš„æ•°æ®é›†ä¸­æ•´åˆåˆ°ä¸€ä¸ªåœ°æ–¹ã€‚</p>
</blockquote>
<p>ä¸€ä¸ªå®Œæ•´çš„é›†ä¸­å¼æ—¥å¿—ç³»ç»Ÿï¼Œæ˜¯ç¦»ä¸å¼€ä»¥ä¸‹å‡ ä¸ªä¸»è¦ç‰¹ç‚¹çš„ã€‚</p>
<ul>
<li>æ”¶é›†ï¼èƒ½å¤Ÿé‡‡é›†å¤šç§æ¥æºçš„æ—¥å¿—æ•°æ®</li>
<li>ä¼ è¾“ï¼èƒ½å¤Ÿç¨³å®šçš„æŠŠæ—¥å¿—æ•°æ®ä¼ è¾“åˆ°ä¸­å¤®ç³»ç»Ÿ</li>
<li>å­˜å‚¨ï¼å¦‚ä½•å­˜å‚¨æ—¥å¿—æ•°æ®</li>
<li>åˆ†æï¼å¯ä»¥æ”¯æŒ UI åˆ†æ</li>
<li>è­¦å‘Šï¼èƒ½å¤Ÿæä¾›é”™è¯¯æŠ¥å‘Šï¼Œç›‘æ§æœºåˆ¶</li>
</ul>
<p>æœ¬æ–‡é‡‡ç”¨ELK + FILEBEAT + KAFKAçš„æ¶æ„æ­å»ºæ—¥å¿—æ”¶é›†ç³»ç»Ÿã€‚æ¶æ„å›¾å¦‚ä¸‹ï¼š</p>
<p>  <img src="https://res.cloudinary.com/leon824/image/upload/v1535176986/geranal_eugyfc.png" width="80%" height="80%"></p>
<hr>
<h3 id="ç¯å¢ƒã€ç‰ˆæœ¬"><a href="#ç¯å¢ƒã€ç‰ˆæœ¬" class="headerlink" title="ç¯å¢ƒã€ç‰ˆæœ¬"></a>ç¯å¢ƒã€ç‰ˆæœ¬</h3><ul>
<li>JDK 1.8</li>
<li>OS : ubuntu18.04</li>
<li>filebeatã€logstashã€elasticsearchã€kibanaï¼ˆ5.3.3ï¼‰</li>
<li>kafka_2.11-0.10.0.1</li>
<li>Grafana ï¼šLatest version</li>
</ul>
<hr>
<h3 id="filebeatå®‰è£…"><a href="#filebeatå®‰è£…" class="headerlink" title="filebeatå®‰è£…"></a>filebeatå®‰è£…</h3><blockquote>
<p>  &emsp;&emsp;ä¸€ä¸ªè½»é‡çº§å¼€æºæ—¥å¿—æ–‡ä»¶æ•°æ®æœé›†å™¨ï¼ŒåŸºäºLogstash-Forwarder æºä»£ç å¼€å‘ï¼Œæ˜¯å¯¹å®ƒçš„æ›¿ä»£ã€‚åœ¨éœ€è¦é‡‡é›†æ—¥å¿—æ•°æ®çš„ server ä¸Šå®‰è£… Filebeatï¼Œå¹¶æŒ‡å®šæ—¥å¿—ç›®å½•æˆ–æ—¥å¿—æ–‡ä»¶åï¼ŒFilebeat å°±èƒ½è¯»å–æ•°æ®ï¼Œè¿…é€Ÿå‘é€åˆ°æŒ‡å®šçš„MQä¸­ï¼Œäº¦æˆ–ç›´æ¥å‘é€åˆ°logstashè¿›è¡Œè¿‡æ»¤è½¬å‘ã€‚<br>ç°ä¸‹è½½åˆ°æœ¬åœ°</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;</span> axel -n 5 https://artifacts.elastic.co/downloads/beats/filebeat/filebeat-5.3.3-linux-x86_64.tar.gz</div><div class="line"><span class="meta">&gt;</span> tar -zxvf  filebeat-5.5.3-linux-x86_64.tar.gz</div><div class="line"><span class="meta">&gt;</span> mv filebeat-5.5.3-linux-x86_64 filebeat-5.5.3</div></pre></td></tr></table></figure>
<p>ç„¶åè¿›å…¥ç›®å½•ä¸­å¤åˆ¶ä¸€ä»½cp filebeat.yml filebeat-kafka.ymlï¼Œä¿®æ”¹æ–‡ä»¶ä¸­ç›¸åº”çš„åœ°æ–¹ã€‚</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#æŒ‡å®šè¾“å…¥ç±»å‹</span></div><div class="line"><span class="attr">- input_type:</span> <span class="string">log</span> </div><div class="line"><span class="comment"># éœ€è¦ç›‘æ§çš„æ–‡ä»¶ç›®å½•ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é€šé…ç¬¦å¯¹æ•´ä¸ªç›®å½•ç›‘æ§</span></div><div class="line"><span class="attr">  paths:</span></div><div class="line"><span class="bullet">    -</span> <span class="string">/opt/soft/logs/platform.pro.access.log</span></div><div class="line"><span class="comment">#å®šä¹‰kafkaä¸ºè¾“å‡ºç›®çš„åœ°</span></div><div class="line"><span class="string">output.kafka:</span></div><div class="line">  <span class="comment"># Array of hosts to connect to.</span></div><div class="line"><span class="attr">  hosts:</span> <span class="string">["ip:9092"]</span></div><div class="line">  <span class="comment">#kafkaçš„ä¸»é¢˜</span></div><div class="line"><span class="attr">  topic:</span> <span class="string">nginx_log</span></div></pre></td></tr></table></figure>
<p>ä¸Šè¾¹éœ€è¦æ³¨æ„ä¸€å®šéœ€è¦å°†outputè¾“å‡ºç›®çš„ä»é»˜è®¤çš„<strong>ElasticSearch</strong>ä¿®æ”¹æˆ<strong>kafka</strong>ï¼Œä»¥ä¸Šé…ç½®å°±ç®—å®‰è£…å®Œæˆäº†ï¼Œ<br>æ¥ç€å¯åŠ¨.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;</span> ./filebeat -e -c filebeat-kafka.yml</div></pre></td></tr></table></figure>
<hr>
<h3 id="kafkaå®‰è£…é…ç½®"><a href="#kafkaå®‰è£…é…ç½®" class="headerlink" title="kafkaå®‰è£…é…ç½®"></a>kafkaå®‰è£…é…ç½®</h3><p>  kafkaçš„è¿è¡Œä¾èµ–zookeeperï¼Œæ‰€ä»¥å®‰è£…kafkaä¹‹å‰éœ€è¦å…ˆå®‰è£…zookeeperï¼Œè¿™é‡Œä¸ç”¨kafkaè‡ªèº«å¸¦æœ‰çš„zookeeperã€‚</p>
<h4 id="zookeeperé…ç½®"><a href="#zookeeperé…ç½®" class="headerlink" title="zookeeperé…ç½®"></a>zookeeperé…ç½®</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;</span> axel -n 5 https://archive.apache.org/dist/zookeeper/zookeeper-3.4.6/zookeeper-3.4.6.tar.gz</div><div class="line"><span class="meta">&gt;</span> tar -zxvf zookeeper-3.4.6.tar.gz</div></pre></td></tr></table></figure>
<p>  ç„¶åè¿›å…¥zookeeperç›®å½•åˆ›å»ºä¸¤ä¸ªæ–‡ä»¶å¤¹</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;</span> mkdir logs</div><div class="line"><span class="meta">&gt;</span> mkdir data</div></pre></td></tr></table></figure>
<p>åœ¨/root/elk/zookeeper-3.4.6/confç›®å½•ä¸‹å¤åˆ¶zoo_sample.cfgå‘½åä¸ºzoo.cfg</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;</span> cp zoo_sample.cfg zoo.cfg</div></pre></td></tr></table></figure>
<p>  æ‰“å¼€zoo.cfgï¼Œä¿®æ”¹éœ€è¦é…ç½®çš„åœ°æ–¹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">tickTime=2000</div><div class="line">initLimit=10</div><div class="line">syncLimit=5</div><div class="line">dataDir=/opt/soft/zookeeper-3.4.6/data</div><div class="line">dataLogDir=/opt/soft/zookeeper-3.4.6/logs</div><div class="line">clientPort=2181</div></pre></td></tr></table></figure>
<p>åœ¨/root/elk/zookeeper-3.4.6/dataç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªmyidæ–‡ä»¶ã€‚ç”±äºæˆ‘ä»¬è¿™é‡Œåªæ˜¯å•ç‚¹ç¯å¢ƒä¸‹ï¼Œæ‰€ä»¥åªéœ€è¦åœ¨æ–‡ä»¶é‡Œè¾¹å†™å…¥server.1ã€‚</p>
<p> æœ€åå°†zkçš„è·¯å¾„æ·»åŠ åˆ°ç›¸å…³çš„ç¯å¢ƒå˜é‡ä¸­ï¼Œå¹¶æ·»åŠ PATH,ç„¶åå¯åŠ¨</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;</span> zkServer.sh start</div></pre></td></tr></table></figure>
<p>æœ€åæŸ¥çœ‹zkæ˜¯å¦å¯åŠ¨æˆåŠŸ</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;</span> zkServer.sh status</div></pre></td></tr></table></figure>
<h4 id="kafkaé…ç½®"><a href="#kafkaé…ç½®" class="headerlink" title="kafkaé…ç½®"></a>kafkaé…ç½®</h4><p>å®‰è£…kafkaçš„æ—¶å€™éœ€è¦æ³¨æ„å’Œlogstashä¹‹é—´ç‰ˆæœ¬åŒ¹é…çš„é—®é¢˜ï¼Œlogstash5.xä»¥ä¸Šå¿…é¡»ä½¿ç”¨kakfa 0.10ä»¥ä¸Šç‰ˆæœ¬ï¼Œå¦åˆ™æ— æ³•æ­£å¸¸è¿è¡Œã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;</span> axel -n 5 https://archive.apache.org/dist/kafka/0.10.0.1/kafka_2.11-0.10.0.1.tgz</div></pre></td></tr></table></figure>
<p>ä¸‹è½½å®Œæˆä¹‹åè§£å‹ã€è¿›å…¥kafkaæ ¹ç›®å½•åˆ›å»ºlogsç›®å½•,ç„¶åæ‰“å¼€configç›®å½•ä¸‹çš„server.propertiesä¿®æ”¹ä¸€äº›å‚æ•°</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">log.dirs=/opt/soft/kafka_2.11-0.10.0.1/logs</div><div class="line">zookeeper.connect=ip:2181</div><div class="line">å…¶ä»–é¡¹æ ¹æ®éœ€è¦è‡ªè¡Œä¿®æ”¹....</div></pre></td></tr></table></figure>
<p>ç„¶åå¯ä»¥å¯åŠ¨kafka</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;</span> bin/kafka-server-start.sh config/server.properties &amp;</div></pre></td></tr></table></figure>
<p>åˆ›å»ºä¸€ä¸ªåå«nginx_logçš„kafkaä¸»é¢˜</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;</span> bin/kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic nginx_log</div></pre></td></tr></table></figure>
<p>ç„¶åè‡ªå·±å¯ä»¥å°è¯•æ‰“å¼€ä¸€ä¸ªç»ˆç«¯è¿›å…¥ç”Ÿäº§è€…æ¨¡å¼ï¼Œå‘é€å‡ æ¡æ•°æ®</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;</span> bin/kafka-console-producer.sh --broker-list localhost:9092 --topic nginx_log</div></pre></td></tr></table></figure>
<p>åœ¨å¦å¤–ä¸€ä¸ªç»ˆç«¯ä¸­å¼€å¯æ¶ˆè´¹è€…æ¨¡å¼ï¼ŒæŸ¥çœ‹ç”Ÿäº§è€…å‘é€çš„æ•°æ®æ˜¯å¦èƒ½å¤Ÿçœ‹åˆ°ï¼Œè‹¥èƒ½æ­£å¸¸çœ‹åˆ°å‘é€çš„æ•°æ®ï¼Œè¯´æ˜kafkaå®‰è£…æ²¡æœ‰é—®é¢˜ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;</span> bin/kafka-console-consumer.sh --zookeeper localhost:2181 --topic nginx_log --from-beginning</div></pre></td></tr></table></figure>
<hr>
<h3 id="logstashå®‰è£…é…ç½®"><a href="#logstashå®‰è£…é…ç½®" class="headerlink" title="logstashå®‰è£…é…ç½®"></a>logstashå®‰è£…é…ç½®</h3><p> &emsp;&emsp;&ensp;è®°ä½æ–‡ç« å¼€å§‹çš„é‚£å¼ æ•´ä½“æ¶æ„å›¾ï¼Œkafkaæ˜¯ä»filebeatæ¥æ”¶æ•°æ®ï¼Œç„¶åå‘é€ç»™logstashã€‚æ‰€ä»¥è¿™é‡Œlogstashçš„inputå°±æ˜¯kafkaäº†ã€‚<br> logstashæ˜¯æ•´ä¸ªæµç¨‹ä¸­é…ç½®ã€ä¿®æ”¹æœ€å¤šçš„ä¸€ç¯ï¼Œè¿‡ç¨‹ä¸­ä¹Ÿæœ‰ä¸€äº›å‘ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;</span> axel -n 5 https://artifacts.elastic.co/downloads/logstash/logstash-5.3.3.tar.gz</div></pre></td></tr></table></figure>
<p>è€è§„çŸ©ï¼Œå…ˆè§£å‹ï¼Œè¿›å…¥configç›®å½•åˆ›å»ºä¸€ä¸ªlogstash.confçš„æ–‡ä»¶ï¼Œç„¶ååœ¨è¿™ä¸ªæ–‡ä»¶é‡Œè¾¹æ·»åŠ inputã€filterã€outputä¸‰ä¸ªæ¨¡å—ã€‚</p>
<h4 id="inputæ¨¡å—"><a href="#inputæ¨¡å—" class="headerlink" title="inputæ¨¡å—"></a>inputæ¨¡å—</h4><p>å…ˆæ¥è®²è®²inputæ¨¡å—ï¼Œç”±äºåœ¨logstash5.xä¸­å·²ç»é»˜è®¤æ”¯æŒkafkaä½œä¸ºinput,æ‰€ä»¥å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">input&#123;</div><div class="line">    kafka&#123;</div><div class="line">        topics =&gt; ["nginx_log"] </div><div class="line">        type =&gt; "nginx-access" </div><div class="line">        bootstrap_servers =&gt; "ip:9092"</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>topics :æŒ‡å®šæ¶ˆè´¹kafkaçš„topic</li>
<li>type ï¼š è‹¥æ˜¯logstashéœ€è¦å¤„ç†å¤šä¸ªæ•°æ®æºï¼Œå¯ä»¥ä½¿ç”¨typeæ¥åšåè¾¹è¿‡æ»¤çš„åŒºåˆ†ã€‚</li>
<li>bootstrap_servers ï¼škakfaæœåŠ¡çš„ipå’Œç«¯å£å·</li>
</ul>
<h4 id="filteræ¨¡å—"><a href="#filteræ¨¡å—" class="headerlink" title="filteræ¨¡å—"></a>filteræ¨¡å—</h4><p>&emsp;&emsp;&ensp; filteræ¨¡å—æ˜¯å…·ä½“å¤„ç†æ•°æ®çš„ä¸€ä¸ªç¯èŠ‚ï¼Œå½“kafkaçš„æ•°æ®è¢«inputæ¨¡å—æ¥æ”¶è¿‡æ¥ä¹‹åï¼Œæ¥ä¸‹æ¥å°±ä¼šäº¤ç»™filteræ¨¡å—å¤„ç†ã€‚è¿™é‡Œæˆ‘ä»¬æ˜¯ä¸ºäº†å¤„ç†nginxçš„accessæ—¥å¿—ï¼Œæ‰€ä»¥é¦–å…ˆéœ€è¦æ ¹æ®nginxçš„log_formatæ¥å®šåˆ¶è‡ªå·±çš„grokæ­£åˆ™è¡¨è¾¾å¼ã€‚<br>ç”Ÿäº§ç¯å¢ƒçš„log_formatæ˜¯ä¸‹é¢è¿™æ ·ğŸ‘‡</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">log_format</div><div class="line">        '$remote_addr [$time_local] $host "$request" '</div><div class="line">        '$status $body_bytes_sent "$http_referer" '</div><div class="line">        '"$http_x_forwarded_for" "$http_user_agent" $request_time $upstream_response_time';</div></pre></td></tr></table></figure>
<p>å®é™…çš„æ—¥å¿—é•¿æˆè¿™æ · </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">100.116.224.17 [14/Aug/2018:07:45:49 +0800] platform.blingabc.com "POST /homeworkRecord/v1/insert HTTP/1.1" 200 517 "https://i.blingabc.com/home/read-book?stuID=11936" "27.187.252.91" "Mozilla/5.0 (iPhone; CPU iPhone OS 11_3 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E216 MicroMessenger/6.7.1 NetType/WIFI Language/zh_CN" 0.456 0.456</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;&ensp;å½“æˆ‘ä»¬åœ¨åšnginxæ—¥å¿—è§£æçš„æ—¶å€™ï¼Œå°½é‡å¤ç”¨grokè‡ªèº«å¸¦æœ‰çš„ã€‚å°‘æ•°ä¸èƒ½è§£æçš„æ ¹æ®ç°æœ‰ä¿®æ”¹ï¼ŒåŸºæœ¬ä¸Šéƒ½æ»¡è¶³è§£ænginxæ—¥å¿—ã€‚åœ¨filteræ¨¡å—ä¸­åŠ å…¥ä¸‹é¢çš„é…ç½®</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">grok &#123;</div><div class="line">      patterns_dir =&gt; <span class="string">"/opt/soft/logstash-5.5.3/patterns/nginx_pattern"</span> </div><div class="line">      match =&gt; &#123;</div><div class="line">         <span class="string">"message"</span> =&gt; <span class="string">"%&#123;NGINXACCESS&#125;"</span></div><div class="line">     &#125;</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;&ensp;éœ€è¦æ³¨æ„ä¸Šè¾¹çš„patterns_dirï¼Œè¿™ä¸ªè·¯å¾„ä¸­patternsè¿™ä¸ªç›®å½•å¿…é¡»åˆ›å»ºåœ¨logstashçš„æ ¹ç›®å½•ä¸­ä¸”åªèƒ½å«è¿™ä¸ªåå­—ï¼Œä¹‹åçš„nginx_patternå¯ä»¥éšæ„å–ã€‚<br>nginx_patternæ–‡ä»¶çš„å†…å®¹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">STATUS ([<span class="number">0</span>-<span class="number">9</span>.]&#123;<span class="number">0</span>,<span class="number">3</span>&#125;)</div><div class="line">REQUEST_TIME ([<span class="number">0</span>-<span class="number">9</span>.]&#123;<span class="number">0</span>,<span class="number">5</span>&#125;)</div><div class="line">FORWORD (?:%&#123;IPV4&#125;[,]?[ ]?)</div><div class="line">NGINXACCESS %&#123;IPV4:remote_addr&#125; \[%&#123;HTTPDATE:time_local&#125;\] (%&#123;HOSTNAME:host&#125;) (%&#123;QUOTEDSTRING:request&#125;) %&#123;STATUS:http_status&#125; %&#123;BASE10NUM:body_bytes_sent&#125; \<span class="string">"(?:%&#123;DATA:http_referer&#125;|-)\" \"(%&#123;FORWORD:http_x_forwarded_for&#125;|-)\" \"(%&#123;GREEDYDATA:user_agent&#125;|-)\" (%&#123;REQUEST_TIME:request_time&#125;|-) (%&#123;REQUEST_TIME:upstream_response_time&#125;|-)</span></div></pre></td></tr></table></figure>
<p>&emsp;&emsp;&ensp;å…¶ä¸­å‰é¢ä¸‰æ¡æ˜¯è‡ªå·±çš„å®šä¹‰çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œåè¾¹NGINXACCESSæ˜¯æ•´ä½“è§£ænginxæ—¥å¿—çš„è¡¨è¾¾å¼ã€‚åœ¨è‡ªå·±å†™è§£ææ—¥å¿—çš„grokè¡¨è¾¾å¼çš„æ—¶å€™åœ¨<a href="https://grokdebug.herokuapp.com/" target="_blank" rel="external">Grok Debugger</a>ä¸­æµ‹è¯•ã€‚</p>
<p><strong>æœ€ç»ˆè§£æå‡ºæ¥çš„æ•°æ®å¦‚ä¸‹</strong> <em>ã€éƒ¨åˆ†çœç•¥ã€‘</em></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="attr">"remote_addr"</span>: [</div><div class="line">    [</div><div class="line">      <span class="string">"100.116.224.72"</span></div><div class="line">    ]</div><div class="line">  ],</div><div class="line">  <span class="attr">"time_local"</span>: [</div><div class="line">    [</div><div class="line">      <span class="string">"14/Aug/2018:00:20:14 +0800"</span></div><div class="line">    ]</div><div class="line">  ],</div><div class="line">  <span class="attr">"host"</span>: [</div><div class="line">    [</div><div class="line">      <span class="string">"platform.blingabc.com"</span></div><div class="line">    ]</div><div class="line">  ],</div><div class="line">  <span class="attr">"request"</span>: [</div><div class="line">    [</div><div class="line">      <span class="string">""</span>OPTIONS /foreign/teacher/v1/login HTTP/<span class="number">1.1</span><span class="string">""</span></div><div class="line">    ]</div><div class="line">  ],</div><div class="line">  <span class="attr">"http_status"</span>: [</div><div class="line">    [</div><div class="line">      <span class="string">"200"</span></div><div class="line">    ]</div><div class="line">  ],</div><div class="line">  <span class="attr">"body_bytes_sent"</span>: [</div><div class="line">    [</div><div class="line">      <span class="string">"0"</span></div><div class="line">    ]</div><div class="line">  ],</div><div class="line">  <span class="attr">"http_referer"</span>: [</div><div class="line">    [</div><div class="line">      <span class="string">"-"</span></div><div class="line">    ]</div><div class="line">  ],</div><div class="line">  <span class="attr">"http_x_forwarded_for"</span>: [</div><div class="line">    [</div><div class="line">      <span class="string">"181.143.78.26"</span></div><div class="line">    ]</div><div class="line">  ],</div><div class="line">  <span class="attr">"user_agent"</span>: [</div><div class="line">    [</div><div class="line">      <span class="string">"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36"</span></div><div class="line">    ]</div><div class="line">  ],</div><div class="line">  <span class="attr">"request_time"</span>: [</div><div class="line">    [</div><div class="line">      <span class="string">"0.001"</span></div><div class="line">    ]</div><div class="line">  ],</div><div class="line">  <span class="attr">"upstream_response_time"</span>: [</div><div class="line">    [</div><div class="line">      <span class="string">"0.001"</span></div><div class="line">    ]</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ­¤æ—¶æˆ‘ä»¬æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œéœ€è¦é€šè¿‡ä¸‹é¢çš„requestè§£æå¾—åˆ°/foreign/teacher/v1/loginå’Œforeignï¼Œç„¶åé€šè¿‡Grafanaç»Ÿè®¡åštop Nå±•ç¤ºï¼Œé‚£ä¹ˆæ•°æ®å°±è¿˜éœ€è¦è¿›ä¸€æ­¥æ‹†åˆ†ã€‚</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">"request": [</div><div class="line">    [</div><div class="line">      <span class="string">""</span>OPTIONS /foreign/teacher/v1/login HTTP/<span class="number">1.1</span><span class="string">""</span></div><div class="line">    ]</div><div class="line">  ],</div></pre></td></tr></table></figure>
<p>filteræ¨¡å—ä¸­æ”¯æŒå¾ˆå¤šæ’ä»¶ç»™æˆ‘ä»¬ä½¿ç”¨ï¼Œä¾‹å¦‚grokã€kvã€rubyã€mutateç­‰ç­‰â€¦ ä¸‹é¢å°±ç”¨rubyå’Œmutateæ¥å®ç°æˆ‘ä»¬æƒ³è¾¾åˆ°çš„ç›®æ ‡ã€‚</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"> filter &#123;</div><div class="line">    grok &#123;</div><div class="line">          patterns_dir =&gt; <span class="string">"/opt/soft/logstash-5.5.3/patterns/nginx_pattern"</span> </div><div class="line">          match =&gt; &#123;</div><div class="line">             <span class="string">"message"</span> =&gt; <span class="string">"%&#123;NGINXACCESS&#125;"</span></div><div class="line">         &#125;</div><div class="line">      &#125;</div><div class="line">    <span class="keyword">if</span> [request] &#123;</div><div class="line">        ruby &#123;</div><div class="line">            init =&gt; <span class="string">"@kname = ['method','uri']"</span></div><div class="line">            code =&gt; <span class="string">"</span></div><div class="line"><span class="string">                new_event = LogStash::Event.new(Hash[@kname.zip(event.get('request').split(' '))]) </span></div><div class="line"><span class="string">                new_event.remove('@timestamp')</span></div><div class="line"><span class="string">                event.append(new_event)</span></div><div class="line"><span class="string">            "</span></div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> [uri] &#123;</div><div class="line">            ruby &#123;</div><div class="line">                init =&gt; <span class="string">"@kname = ['url_path','url_args']"</span></div><div class="line">                code =&gt; <span class="string">"</span></div><div class="line"><span class="string">                    new_event = LogStash::Event.new(Hash[@kname.zip(event.get('uri').split('?'))])</span></div><div class="line"><span class="string">                    new_event.remove('@timestamp')</span></div><div class="line"><span class="string">                    event.append(new_event)</span></div><div class="line"><span class="string">                "</span></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    </div><div class="line">   <span class="keyword">if</span> [url_path] &#123;</div><div class="line">            ruby &#123;</div><div class="line">                init =&gt; <span class="string">"@kname = ['service_name', 'url_path']"</span></div><div class="line">                code =&gt; <span class="string">"</span></div><div class="line"><span class="string">                    new_event = LogStash::Event.new(Hash[@kname.zip(event.get('uri').split('/'))])</span></div><div class="line"><span class="string">                    new_event.remove('@timestamp')</span></div><div class="line"><span class="string">                    event.append(new_event)</span></div><div class="line"><span class="string">                "</span></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;   </div><div class="line">    mutate &#123;</div><div class="line">            rename =&gt; [<span class="string">"url_path[1]"</span>, <span class="string">"service_name"</span>]</div><div class="line">	    rename =&gt; [<span class="string">"url_path[0]"</span>, <span class="string">"uri"</span>]</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> [service_name] == <span class="string">"monitor"</span> <span class="keyword">or</span> [service_name] == <span class="string">"weixin"</span> <span class="keyword">or</span> [method] == <span class="string">"OPTIONS"</span> &#123;</div><div class="line">            drop &#123;&#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸Šè¾¹çš„æ‰§è¡Œæ—¶æµå¼æ‰§è¡Œçš„ï¼Œå°±æ˜¯è¯´ä¸Šè¾¹æ‰§è¡Œå¾—åˆ°çš„ç»“æœä¸‹è¾¹å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚ç„¶åå°†æ•°ç»„é‡Œè¾¹çš„ç»“æœé‡ååï¼Œæä¾›ç»™ä¸‹é¢ESä½¿ç”¨ã€‚</p>
<h4 id="output"><a href="#output" class="headerlink" title="output"></a>output</h4><p>æœ€åå°±æ˜¯outputæ¨¡å—äº†ï¼Œè¿™é‡Œæ¯”è¾ƒç®€å•ï¼Œä¸»è¦æ˜¯è®²è¿‡æ»¤åçš„æ•°æ®äº¤ç»™ESã€‚</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">output &#123;</div><div class="line">        elasticsearch&#123;</div><div class="line">        hosts =&gt; [<span class="string">"ip:9200"</span>]</div><div class="line">        index =&gt; <span class="string">"nginx-log"</span></div><div class="line">        template_overwrite =&gt; <span class="literal">true</span></div><div class="line">        template =&gt; <span class="string">"/opt/soft/logstash-5.5.3/output/es_template.json"</span></div><div class="line">        &#125;</div><div class="line">        stdout&#123;codec =&gt; rubydebug&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä½†æ˜¯éœ€è¦æ³¨æ„ä¸Šè¾¹çš„templateæŒ‡å®šçš„æ–‡ä»¶ï¼Œåœ¨es_template.jsonè¿™ä¸ªæ–‡ä»¶ä¸­å®šä¹‰äº†filteræ¨¡å—è§£æå‡ºæ¥çš„å­—æ®µåç§°ã€ç±»å‹ã€‚</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"template"</span>:<span class="string">"nginx-log"</span>,</div><div class="line">    <span class="attr">"settings"</span>:&#123;</div><div class="line">        <span class="attr">"index.refresh_interval"</span>:<span class="string">"5s"</span>,</div><div class="line">        <span class="attr">"index.number_of_replicas"</span>:<span class="string">"1"</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">"analysis"</span>:&#123;</div><div class="line">        <span class="attr">"analyzer"</span>:&#123;</div><div class="line">            <span class="attr">"default"</span>:&#123;</div><div class="line">                <span class="attr">"type"</span>:<span class="string">"standard"</span>,</div><div class="line">                <span class="attr">"stopwords"</span>:<span class="string">"_none_"</span></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">"mappings"</span>:&#123;</div><div class="line">        <span class="attr">"nginx_log"</span>:&#123;</div><div class="line">            <span class="attr">"_all"</span>:&#123;</div><div class="line">                <span class="attr">"enabled"</span>:<span class="literal">false</span></div><div class="line">            &#125;,</div><div class="line">            <span class="attr">"properties"</span>:&#123;</div><div class="line">                <span class="attr">"remote_addr"</span>:&#123;</div><div class="line">                    <span class="attr">"type"</span>:<span class="string">"ip"</span>,</div><div class="line">		    <span class="attr">"fielddata"</span>: <span class="literal">true</span></div><div class="line">                &#125;,</div><div class="line">                <span class="attr">"time_local"</span>:&#123;</div><div class="line">                    <span class="attr">"type"</span>:<span class="string">"date"</span>,</div><div class="line">                    <span class="attr">"format"</span>:<span class="string">"dd/MMM/yyyy:HH:mm:ss Z"</span></div><div class="line">                &#125;,</div><div class="line">                <span class="attr">"host"</span>:&#123;</div><div class="line">                    <span class="attr">"type"</span>:<span class="string">"string"</span>,</div><div class="line">		    <span class="attr">"fielddata"</span>: <span class="literal">true</span></div><div class="line">                &#125;,</div><div class="line">		<span class="attr">"uri"</span>:&#123;</div><div class="line">		    <span class="attr">"type"</span>:<span class="string">"string"</span>,</div><div class="line">		    <span class="attr">"fielddata"</span>: <span class="literal">true</span></div><div class="line">		&#125;,</div><div class="line">                <span class="attr">"request"</span>:&#123;</div><div class="line">                    <span class="attr">"type"</span>:<span class="string">"string"</span></div><div class="line">                &#125;,</div><div class="line">                <span class="attr">"http_status"</span>:&#123;</div><div class="line">                    <span class="attr">"type"</span>:<span class="string">"integer"</span>,</div><div class="line">		    <span class="attr">"fielddata"</span>: <span class="literal">true</span></div><div class="line">                &#125;,</div><div class="line">                <span class="attr">"body_bytes_sent"</span>:&#123;</div><div class="line">                    <span class="attr">"type"</span>:<span class="string">"integer"</span></div><div class="line">                &#125;,</div><div class="line">                <span class="attr">"http_referer"</span>:&#123;</div><div class="line">                    <span class="attr">"type"</span>:<span class="string">"string"</span></div><div class="line">                &#125;,</div><div class="line">                <span class="attr">"http_x_forwarded_for"</span>:&#123;</div><div class="line">                    <span class="attr">"type"</span>:<span class="string">"ip"</span></div><div class="line">                &#125;,</div><div class="line">                <span class="attr">"user_agent"</span>:&#123;</div><div class="line">                    <span class="attr">"type"</span>:<span class="string">"string"</span></div><div class="line">                &#125;,</div><div class="line">                <span class="attr">"request_time"</span>:&#123;</div><div class="line">                    <span class="attr">"type"</span>:<span class="string">"float"</span>,</div><div class="line">		    <span class="attr">"fielddata"</span>: <span class="literal">true</span></div><div class="line">                &#125;,</div><div class="line">                <span class="attr">"upstream_response_time"</span>:&#123;</div><div class="line">                    <span class="attr">"type"</span>:<span class="string">"float"</span></div><div class="line">                &#125;,</div><div class="line">                <span class="attr">"service_name"</span>:&#123;</div><div class="line">                    <span class="attr">"type"</span>:<span class="string">"string"</span>,</div><div class="line">		    <span class="attr">"fielddata"</span>: <span class="literal">true</span></div><div class="line">                &#125;,</div><div class="line">                <span class="attr">"request_url"</span>:&#123;</div><div class="line">                    <span class="attr">"type"</span>:<span class="string">"string"</span>,</div><div class="line">		    <span class="attr">"fielddata"</span>: <span class="literal">true</span></div><div class="line">                &#125;,</div><div class="line">                <span class="attr">"geoip"</span>:&#123;</div><div class="line">                    <span class="attr">"properties"</span>:&#123;</div><div class="line">                        <span class="attr">"city_name"</span>:&#123;</div><div class="line">                            <span class="attr">"type"</span>:<span class="string">"keyword"</span></div><div class="line">                        &#125;,</div><div class="line">                        <span class="attr">"country_name"</span>:&#123;</div><div class="line">                            <span class="attr">"type"</span>:<span class="string">"keyword"</span></div><div class="line">                        &#125;,</div><div class="line">                        <span class="attr">"latitude"</span>:&#123;</div><div class="line">                            <span class="attr">"type"</span>:<span class="string">"float"</span></div><div class="line">                        &#125;,</div><div class="line">                        <span class="attr">"location"</span>:&#123;</div><div class="line">                            <span class="attr">"type"</span>:<span class="string">"geo_point"</span></div><div class="line">                        &#125;,</div><div class="line">                        <span class="attr">"longitude"</span>:&#123;</div><div class="line">                            <span class="attr">"type"</span>:<span class="string">"float"</span></div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æœ€ç»ˆå½¢æˆçš„é…ç½®æ–‡ä»¶å°±æ˜¯è¿™æ ·çš„</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div></pre></td><td class="code"><pre><div class="line">input&#123;</div><div class="line">    file &#123;</div><div class="line">       path =&gt; <span class="string">"/opt/soft/logs/platform.pro.access.log"</span></div><div class="line">       type =&gt; <span class="string">"nginxlog"</span></div><div class="line">       start_position =&gt; <span class="string">"beginning"</span></div><div class="line">       &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">filter &#123;</div><div class="line">    grok &#123;</div><div class="line">          patterns_dir =&gt; <span class="string">"/opt/soft/logstash-5.5.3/patterns/nginx_pattern"</span> </div><div class="line">          match =&gt; &#123;</div><div class="line">             <span class="string">"message"</span> =&gt; <span class="string">"%&#123;NGINXACCESS&#125;"</span></div><div class="line">         &#125;</div><div class="line">      &#125;</div><div class="line">    <span class="keyword">if</span> [request] &#123;</div><div class="line">        ruby &#123;</div><div class="line">            init =&gt; <span class="string">"@kname = ['method','uri']"</span></div><div class="line">            code =&gt; <span class="string">"</span></div><div class="line"><span class="string">                new_event = LogStash::Event.new(Hash[@kname.zip(event.get('request').split(' '))]) </span></div><div class="line"><span class="string">                new_event.remove('@timestamp')</span></div><div class="line"><span class="string">                event.append(new_event)</span></div><div class="line"><span class="string">            "</span></div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> [uri] &#123;</div><div class="line">            ruby &#123;</div><div class="line">                init =&gt; <span class="string">"@kname = ['url_path','url_args']"</span></div><div class="line">                code =&gt; <span class="string">"</span></div><div class="line"><span class="string">                    new_event = LogStash::Event.new(Hash[@kname.zip(event.get('uri').split('?'))])</span></div><div class="line"><span class="string">                    new_event.remove('@timestamp')</span></div><div class="line"><span class="string">                    event.append(new_event)</span></div><div class="line"><span class="string">                "</span></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    </div><div class="line">   <span class="keyword">if</span> [url_path] &#123;</div><div class="line">            ruby &#123;</div><div class="line">                init =&gt; <span class="string">"@kname = ['service_name', 'url_path']"</span></div><div class="line">                code =&gt; <span class="string">"</span></div><div class="line"><span class="string">                    new_event = LogStash::Event.new(Hash[@kname.zip(event.get('uri').split('/'))])</span></div><div class="line"><span class="string">                    new_event.remove('@timestamp')</span></div><div class="line"><span class="string">                    event.append(new_event)</span></div><div class="line"><span class="string">                "</span></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;   </div><div class="line">    mutate &#123;</div><div class="line">            rename =&gt; [<span class="string">"url_path[1]"</span>, <span class="string">"service_name"</span>]</div><div class="line">	    rename =&gt; [<span class="string">"url_path[0]"</span>, <span class="string">"uri"</span>]</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> [service_name] == <span class="string">"monitor"</span> <span class="keyword">or</span> [service_name] == <span class="string">"weixin"</span> <span class="keyword">or</span> [method] == <span class="string">"OPTIONS"</span> &#123;</div><div class="line">            drop &#123;&#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">output &#123;</div><div class="line">        elasticsearch&#123;</div><div class="line">        hosts =&gt; [<span class="string">"localhost:9200"</span>]</div><div class="line">        index =&gt; <span class="string">"nginx-log"</span></div><div class="line">        template_overwrite =&gt; <span class="literal">true</span></div><div class="line">        template =&gt; <span class="string">"/opt/soft/logstash-5.5.3/output/es_template.json"</span></div><div class="line">        &#125;</div><div class="line">	stdout&#123;codec =&gt; rubydebug&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸Šè¾¹å·²ç»æ•´ä¸ªç¯å¢ƒæ­å»ºå®Œæˆäº†ä¸€å¤§åŠäº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å®‰è£…Elasticsearchå’Œkibanaã€Grafanaã€‚</p>
<h3 id="å‚è€ƒï¼š"><a href="#å‚è€ƒï¼š" class="headerlink" title="å‚è€ƒï¼š"></a>å‚è€ƒï¼š</h3><ul>
<li><a href="https://segmentfault.com/a/1190000011263254" target="_blank" rel="external">ELKåˆä½“éªŒ-Nginxæ—¥å¿—å®æ—¶åˆ†æ</a></li>
<li><a href="http://blog.51cto.com/zero01/2079879" target="_blank" rel="external">æ­å»ºELKæ—¥å¿—åˆ†æå¹³å°ï¼ˆä¸Šï¼‰</a></li>
<li><a href="https://www.jianshu.com/p/6b7f0488ddff" target="_blank" rel="external">elkæ­å»ºå®æˆ˜</a></li>
<li><p><a href="https://my.oschina.net/itblog/blog/547250" target="_blank" rel="external">ELK(ElasticSearch, Logstash, Kibana)æ­å»ºå®æ—¶æ—¥å¿—åˆ†æå¹³å°</a></p>
<p>  â€¦â€¦</p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/06/28/java å·¥ç¨‹å¸ˆæˆç¥ä¹‹è·¯(è½¬è½½)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="leonyoung">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://res.cloudinary.com/leon824/image/upload/v1505793001/IMG_3957_uwrsum.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="èŠ±è°¢èŠ±å¼€">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/28/java å·¥ç¨‹å¸ˆæˆç¥ä¹‹è·¯(è½¬è½½)/" itemprop="url">java å·¥ç¨‹å¸ˆæˆç¥ä¹‹è·¯(è½¬è½½)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">ç™¼è¡¨æ–¼</span>
              
              <time title="å‰µå»ºæ–¼" itemprop="dateCreated datePublished" datetime="2018-06-28T10:03:37+08:00">
                2018-06-28
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†é¡æ–¼</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>ä»Šå¤©åœ¨è®ºå›ä¸Šçœ‹åˆ°çš„ä¸€ä¸ªå¸–å­ï¼Œä¸Šè¾¹æåˆ°çš„å†…å®¹æä¸ºå®½æ³›ï¼Œå¯èƒ½åœ¨çŸ­æ—¶é—´å†…ä¸å¯èƒ½å®Œå…¨åšåˆ°æåˆ°çš„æ‰€æœ‰å†…å®¹ï¼Œä½†ä¹Ÿä¸å¦¨ä½œä¸ºä¸€ä¸ªå­¦ä¹ çš„ç›®æ ‡ã€‚<br><a href="https://www.v2ex.com/t/466451#reply2" target="_blank" rel="external">åŸæ–‡åœ°å€</a></p>
</blockquote>
<h3 id="åŸºç¡€ç¯‡"><a href="#åŸºç¡€ç¯‡" class="headerlink" title="åŸºç¡€ç¯‡"></a>åŸºç¡€ç¯‡</h3><h4 id="JVM"><a href="#JVM" class="headerlink" title="JVM"></a>JVM</h4><h5 id="JVMå†…å­˜ç»“æ„"><a href="#JVMå†…å­˜ç»“æ„" class="headerlink" title="JVMå†…å­˜ç»“æ„"></a>JVMå†…å­˜ç»“æ„</h5><p>å †ã€æ ˆã€æ–¹æ³•åŒºã€ç›´æ¥å†…å­˜ã€å †å’Œæ ˆåŒºåˆ«</p>
<h5 id="Java-å†…å­˜æ¨¡å‹"><a href="#Java-å†…å­˜æ¨¡å‹" class="headerlink" title="Java å†…å­˜æ¨¡å‹"></a>Java å†…å­˜æ¨¡å‹</h5><p>å†…å­˜å¯è§æ€§ã€é‡æ’åºã€é¡ºåºä¸€è‡´æ€§ã€volatileã€é”ã€final</p>
<h5 id="åƒåœ¾å›æ”¶"><a href="#åƒåœ¾å›æ”¶" class="headerlink" title="åƒåœ¾å›æ”¶"></a>åƒåœ¾å›æ”¶</h5><p>å†…å­˜åˆ†é…ç­–ç•¥ã€åƒåœ¾æ”¶é›†å™¨ï¼ˆ G1 ï¼‰ã€GC ç®—æ³•ã€GC å‚æ•°ã€å¯¹è±¡å­˜æ´»çš„åˆ¤å®š</p>
<h5 id="JVM-å‚æ•°åŠè°ƒä¼˜"><a href="#JVM-å‚æ•°åŠè°ƒä¼˜" class="headerlink" title="JVM å‚æ•°åŠè°ƒä¼˜"></a>JVM å‚æ•°åŠè°ƒä¼˜</h5><h5 id="Java-å¯¹è±¡æ¨¡å‹"><a href="#Java-å¯¹è±¡æ¨¡å‹" class="headerlink" title="Java å¯¹è±¡æ¨¡å‹"></a>Java å¯¹è±¡æ¨¡å‹</h5><p>oop-klassã€å¯¹è±¡å¤´</p>
<h5 id="HotSpot"><a href="#HotSpot" class="headerlink" title="HotSpot"></a>HotSpot</h5><p>å³æ—¶ç¼–è¯‘å™¨ã€ç¼–è¯‘ä¼˜åŒ–</p>
<h5 id="ç±»åŠ è½½æœºåˆ¶"><a href="#ç±»åŠ è½½æœºåˆ¶" class="headerlink" title="ç±»åŠ è½½æœºåˆ¶"></a>ç±»åŠ è½½æœºåˆ¶</h5><p>classLoaderã€ç±»åŠ è½½è¿‡ç¨‹ã€åŒäº²å§”æ´¾ï¼ˆç ´ååŒäº²å§”æ´¾ï¼‰ã€æ¨¡å—åŒ–ï¼ˆ jboss modulesã€osgiã€jigsaw ï¼‰</p>
<h5 id="è™šæ‹Ÿæœºæ€§èƒ½ç›‘æ§ä¸æ•…éšœå¤„ç†å·¥å…·"><a href="#è™šæ‹Ÿæœºæ€§èƒ½ç›‘æ§ä¸æ•…éšœå¤„ç†å·¥å…·" class="headerlink" title="è™šæ‹Ÿæœºæ€§èƒ½ç›‘æ§ä¸æ•…éšœå¤„ç†å·¥å…·"></a>è™šæ‹Ÿæœºæ€§èƒ½ç›‘æ§ä¸æ•…éšœå¤„ç†å·¥å…·</h5><p> jps, jstack, jmapã€jstat, jconsole, jinfo, jhat, javap, btraceã€TProfiler</p>
<p>ç¼–è¯‘ä¸åç¼–è¯‘</p>
<p>javacã€javapã€jadã€CRF</p>
<h4 id="Java-åŸºç¡€çŸ¥è¯†"><a href="#Java-åŸºç¡€çŸ¥è¯†" class="headerlink" title="Java åŸºç¡€çŸ¥è¯†"></a>Java åŸºç¡€çŸ¥è¯†</h4><h6 id="é˜…è¯»æºä»£ç "><a href="#é˜…è¯»æºä»£ç " class="headerlink" title="é˜…è¯»æºä»£ç "></a>é˜…è¯»æºä»£ç </h6><p>Stringã€Integerã€Longã€Enumã€BigDecimalã€ThreadLocalã€ClassLoader &amp; URLClassLoaderã€ArrayList &amp; LinkedListã€HashMap &amp; LinkedHashMap &amp; TreeMap &amp; CouncurrentHashMapã€HashSet &amp; LinkedHashSet &amp; TreeSet</p>
<h5 id="Javaä¸­å„ç§å˜é‡ç±»å‹"><a href="#Javaä¸­å„ç§å˜é‡ç±»å‹" class="headerlink" title="Javaä¸­å„ç§å˜é‡ç±»å‹"></a>Javaä¸­å„ç§å˜é‡ç±»å‹</h5><h5 id="ç†Ÿæ‚‰-Java-String-çš„ä½¿ç”¨ï¼Œç†Ÿæ‚‰-String-çš„å„ç§å‡½æ•°"><a href="#ç†Ÿæ‚‰-Java-String-çš„ä½¿ç”¨ï¼Œç†Ÿæ‚‰-String-çš„å„ç§å‡½æ•°" class="headerlink" title="ç†Ÿæ‚‰ Java String çš„ä½¿ç”¨ï¼Œç†Ÿæ‚‰ String çš„å„ç§å‡½æ•°"></a>ç†Ÿæ‚‰ Java String çš„ä½¿ç”¨ï¼Œç†Ÿæ‚‰ String çš„å„ç§å‡½æ•°</h5><p>JDK 6 å’Œ JDK 7 ä¸­ substring çš„åŸç†åŠåŒºåˆ«ã€</p>
<p>replaceFirstã€replaceAllã€replace åŒºåˆ«ã€</p>
<p>String å¯¹â€œ+â€çš„é‡è½½ã€</p>
<p>String.valueOf å’Œ Integer.toString çš„åŒºåˆ«ã€</p>
<p>å­—ç¬¦ä¸²çš„ä¸å¯å˜æ€§</p>
<p>è‡ªåŠ¨æ‹†è£…ç®±</p>
<p>Integer çš„ç¼“å­˜æœºåˆ¶</p>
<h5 id="ç†Ÿæ‚‰-Java-ä¸­å„ç§å…³é”®å­—"><a href="#ç†Ÿæ‚‰-Java-ä¸­å„ç§å…³é”®å­—" class="headerlink" title="ç†Ÿæ‚‰ Java ä¸­å„ç§å…³é”®å­—"></a>ç†Ÿæ‚‰ Java ä¸­å„ç§å…³é”®å­—</h5><p>transientã€instanceofã€volatileã€synchronizedã€finalã€staticã€const åŸç†åŠç”¨æ³•ã€‚</p>
<h5 id="é›†åˆç±»"><a href="#é›†åˆç±»" class="headerlink" title="é›†åˆç±»"></a>é›†åˆç±»</h5><p>å¸¸ç”¨é›†åˆç±»çš„ä½¿ç”¨ã€ArrayList å’Œ LinkedList å’Œ Vector çš„åŒºåˆ« ã€SynchronizedList å’Œ Vector çš„åŒºåˆ«ã€HashMapã€HashTableã€ConcurrentHashMap åŒºåˆ«ã€Java 8 ä¸­ stream ç›¸å…³ç”¨æ³•ã€apache é›†åˆå¤„ç†å·¥å…·ç±»çš„ä½¿ç”¨ã€ä¸åŒç‰ˆæœ¬çš„ JDK ä¸­ HashMap çš„å®ç°çš„åŒºåˆ«ä»¥åŠåŸå› </p>
<h5 id="æšä¸¾"><a href="#æšä¸¾" class="headerlink" title="æšä¸¾"></a>æšä¸¾</h5><p>æšä¸¾çš„ç”¨æ³•ã€æšä¸¾ä¸å•ä¾‹ã€Enum ç±»</p>
<h5 id="Java-IO-amp-Java-NIOï¼Œå¹¶å­¦ä¼šä½¿ç”¨"><a href="#Java-IO-amp-Java-NIOï¼Œå¹¶å­¦ä¼šä½¿ç”¨" class="headerlink" title="Java IO&amp;Java NIOï¼Œå¹¶å­¦ä¼šä½¿ç”¨"></a>Java IO&amp;Java NIOï¼Œå¹¶å­¦ä¼šä½¿ç”¨</h5><p>bioã€nio å’Œ aio çš„åŒºåˆ«ã€ä¸‰ç§ IO çš„ç”¨æ³•ä¸åŸç†ã€netty</p>
<h5 id="Java-åå°„ä¸-javassist"><a href="#Java-åå°„ä¸-javassist" class="headerlink" title="Java åå°„ä¸ javassist"></a>Java åå°„ä¸ javassist</h5><p>åå°„ä¸å·¥å‚æ¨¡å¼ã€ java.lang.reflect.*</p>
<h5 id="Java-åºåˆ—åŒ–"><a href="#Java-åºåˆ—åŒ–" class="headerlink" title="Java åºåˆ—åŒ–"></a>Java åºåˆ—åŒ–</h5><p>ä»€ä¹ˆæ˜¯åºåˆ—åŒ–ä¸ååºåˆ—åŒ–ã€ä¸ºä»€ä¹ˆåºåˆ—åŒ–ã€åºåˆ—åŒ–åº•å±‚åŸç†ã€åºåˆ—åŒ–ä¸å•ä¾‹æ¨¡å¼ã€protobufã€ä¸ºä»€ä¹ˆè¯´åºåˆ—åŒ–å¹¶ä¸å®‰å…¨</p>
<h5 id="æ³¨è§£"><a href="#æ³¨è§£" class="headerlink" title="æ³¨è§£"></a>æ³¨è§£</h5><p>å…ƒæ³¨è§£ã€è‡ªå®šä¹‰æ³¨è§£ã€Java ä¸­å¸¸ç”¨æ³¨è§£ä½¿ç”¨ã€æ³¨è§£ä¸åå°„çš„ç»“åˆ</p>
<h5 id="JMS"><a href="#JMS" class="headerlink" title="JMS"></a>JMS</h5><p>ä»€ä¹ˆæ˜¯ Java æ¶ˆæ¯æœåŠ¡ã€JMS æ¶ˆæ¯ä¼ é€æ¨¡å‹</p>
<h5 id="JMX"><a href="#JMX" class="headerlink" title="JMX"></a>JMX</h5><p>java.lang.management.<em>ã€ javax.management.</em></p>
<h4 id="æ³›å‹"><a href="#æ³›å‹" class="headerlink" title="æ³›å‹"></a>æ³›å‹</h4><p>æ³›å‹ä¸ç»§æ‰¿ã€ç±»å‹æ“¦é™¤ã€æ³›å‹ä¸­ K T V E ï¼Ÿ object ç­‰çš„å«ä¹‰ã€æ³›å‹å„ç§ç”¨æ³•</p>
<h5 id="å•å…ƒæµ‹è¯•"><a href="#å•å…ƒæµ‹è¯•" class="headerlink" title="å•å…ƒæµ‹è¯•"></a>å•å…ƒæµ‹è¯•</h5><p>junitã€mockã€mockitoã€å†…å­˜æ•°æ®åº“ï¼ˆ h2 ï¼‰</p>
<h5 id="æ­£åˆ™è¡¨è¾¾å¼"><a href="#æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼"></a>æ­£åˆ™è¡¨è¾¾å¼</h5><p>java.lang.util.regex.*</p>
<h5 id="å¸¸ç”¨çš„-Java-å·¥å…·åº“"><a href="#å¸¸ç”¨çš„-Java-å·¥å…·åº“" class="headerlink" title="å¸¸ç”¨çš„ Java å·¥å…·åº“"></a>å¸¸ç”¨çš„ Java å·¥å…·åº“</h5><p>commons.lang, commons.*â€¦ guava-libraries netty</p>
<h5 id="ä»€ä¹ˆæ˜¯-API-amp-SPI"><a href="#ä»€ä¹ˆæ˜¯-API-amp-SPI" class="headerlink" title="ä»€ä¹ˆæ˜¯ API&amp;SPI"></a>ä»€ä¹ˆæ˜¯ API&amp;SPI</h5><h5 id="å¼‚å¸¸"><a href="#å¼‚å¸¸" class="headerlink" title="å¼‚å¸¸"></a>å¼‚å¸¸</h5><p>å¼‚å¸¸ç±»å‹ã€æ­£ç¡®å¤„ç†å¼‚å¸¸ã€è‡ªå®šä¹‰å¼‚å¸¸</p>
<h5 id="æ—¶é—´å¤„ç†"><a href="#æ—¶é—´å¤„ç†" class="headerlink" title="æ—¶é—´å¤„ç†"></a>æ—¶é—´å¤„ç†</h5><p>æ—¶åŒºã€æ—¶ä»¤ã€Java ä¸­æ—¶é—´ API</p>
<h5 id="ç¼–ç æ–¹å¼"><a href="#ç¼–ç æ–¹å¼" class="headerlink" title="ç¼–ç æ–¹å¼"></a>ç¼–ç æ–¹å¼</h5><p>è§£å†³ä¹±ç é—®é¢˜ã€å¸¸ç”¨ç¼–ç æ–¹å¼</p>
<h5 id="è¯­æ³•ç³–"><a href="#è¯­æ³•ç³–" class="headerlink" title="è¯­æ³•ç³–"></a>è¯­æ³•ç³–</h5><p>Java ä¸­è¯­æ³•ç³–åŸç†ã€è§£è¯­æ³•ç³–</p>
<h4 id="Java-å¹¶å‘ç¼–ç¨‹"><a href="#Java-å¹¶å‘ç¼–ç¨‹" class="headerlink" title="Java å¹¶å‘ç¼–ç¨‹"></a>Java å¹¶å‘ç¼–ç¨‹</h4><h5 id="ä»€ä¹ˆæ˜¯çº¿ç¨‹ï¼Œä¸è¿›ç¨‹çš„åŒºåˆ«"><a href="#ä»€ä¹ˆæ˜¯çº¿ç¨‹ï¼Œä¸è¿›ç¨‹çš„åŒºåˆ«" class="headerlink" title="ä»€ä¹ˆæ˜¯çº¿ç¨‹ï¼Œä¸è¿›ç¨‹çš„åŒºåˆ«"></a>ä»€ä¹ˆæ˜¯çº¿ç¨‹ï¼Œä¸è¿›ç¨‹çš„åŒºåˆ«</h5><h5 id="é˜…è¯»æºä»£ç ï¼Œå¹¶å­¦ä¼šä½¿ç”¨"><a href="#é˜…è¯»æºä»£ç ï¼Œå¹¶å­¦ä¼šä½¿ç”¨" class="headerlink" title="é˜…è¯»æºä»£ç ï¼Œå¹¶å­¦ä¼šä½¿ç”¨"></a>é˜…è¯»æºä»£ç ï¼Œå¹¶å­¦ä¼šä½¿ç”¨</h5><p>Threadã€Runnableã€Callableã€ReentrantLockã€ReentrantReadWriteLockã€Atomic*ã€Semaphoreã€CountDownLatchã€ã€ConcurrentHashMapã€Executors</p>
<h5 id="çº¿ç¨‹æ± "><a href="#çº¿ç¨‹æ± " class="headerlink" title="çº¿ç¨‹æ± "></a>çº¿ç¨‹æ± </h5><p>è‡ªå·±è®¾è®¡çº¿ç¨‹æ± ã€submit() å’Œ execute()</p>
<h5 id="çº¿ç¨‹å®‰å…¨"><a href="#çº¿ç¨‹å®‰å…¨" class="headerlink" title="çº¿ç¨‹å®‰å…¨"></a>çº¿ç¨‹å®‰å…¨</h5><p>æ­»é”ã€æ­»é”å¦‚ä½•æ’æŸ¥ã€Java çº¿ç¨‹è°ƒåº¦ã€çº¿ç¨‹å®‰å…¨å’Œå†…å­˜æ¨¡å‹çš„å…³ç³»</p>
<h5 id="é”"><a href="#é”" class="headerlink" title="é”"></a>é”</h5><p>CASã€ä¹è§‚é”ä¸æ‚²è§‚é”ã€æ•°æ®åº“ç›¸å…³é”æœºåˆ¶ã€åˆ†å¸ƒå¼é”ã€åå‘é”ã€è½»é‡çº§é”ã€é‡é‡çº§é”ã€monitorã€é”ä¼˜åŒ–ã€é”æ¶ˆé™¤ã€é”ç²—åŒ–ã€è‡ªæ—‹é”ã€å¯é‡å…¥é”ã€é˜»å¡é”ã€æ­»é”</p>
<h5 id="æ­»é”"><a href="#æ­»é”" class="headerlink" title="æ­»é”"></a>æ­»é”</h5><h5 id="volatile"><a href="#volatile" class="headerlink" title="volatile"></a>volatile</h5><h5 id="happens-beforeã€ç¼–è¯‘å™¨æŒ‡ä»¤é‡æ’å’Œ-CPU-æŒ‡ä»¤é‡"><a href="#happens-beforeã€ç¼–è¯‘å™¨æŒ‡ä»¤é‡æ’å’Œ-CPU-æŒ‡ä»¤é‡" class="headerlink" title="happens-beforeã€ç¼–è¯‘å™¨æŒ‡ä»¤é‡æ’å’Œ CPU æŒ‡ä»¤é‡"></a>happens-beforeã€ç¼–è¯‘å™¨æŒ‡ä»¤é‡æ’å’Œ CPU æŒ‡ä»¤é‡</h5><h5 id="synchronized"><a href="#synchronized" class="headerlink" title="synchronized"></a>synchronized</h5><p>synchronized æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ synchronized å’Œ lock ä¹‹é—´å…³ç³»ã€ä¸ä½¿ç”¨ synchronized å¦‚ä½•å®ç°ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„å•ä¾‹</p>
<h5 id="sleep-å’Œ-wait"><a href="#sleep-å’Œ-wait" class="headerlink" title="sleep å’Œ wait"></a>sleep å’Œ wait</h5><h5 id="wait-å’Œ-notify"><a href="#wait-å’Œ-notify" class="headerlink" title="wait å’Œ notify"></a>wait å’Œ notify</h5><h5 id="notify-å’Œ-notifyAll"><a href="#notify-å’Œ-notifyAll" class="headerlink" title="notify å’Œ notifyAll"></a>notify å’Œ notifyAll</h5><h5 id="ThreadLocal"><a href="#ThreadLocal" class="headerlink" title="ThreadLocal"></a>ThreadLocal</h5><h5 id="å†™ä¸€ä¸ªæ­»é”çš„ç¨‹åº"><a href="#å†™ä¸€ä¸ªæ­»é”çš„ç¨‹åº" class="headerlink" title="å†™ä¸€ä¸ªæ­»é”çš„ç¨‹åº"></a>å†™ä¸€ä¸ªæ­»é”çš„ç¨‹åº</h5><h5 id="å†™ä»£ç æ¥è§£å†³ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜"><a href="#å†™ä»£ç æ¥è§£å†³ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜" class="headerlink" title="å†™ä»£ç æ¥è§£å†³ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜"></a>å†™ä»£ç æ¥è§£å†³ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜</h5><h5 id="å®ˆæŠ¤çº¿ç¨‹"><a href="#å®ˆæŠ¤çº¿ç¨‹" class="headerlink" title="å®ˆæŠ¤çº¿ç¨‹"></a>å®ˆæŠ¤çº¿ç¨‹</h5><h5 id="å®ˆæŠ¤çº¿ç¨‹å’Œéå®ˆæŠ¤çº¿ç¨‹çš„åŒºåˆ«ä»¥åŠç”¨æ³•"><a href="#å®ˆæŠ¤çº¿ç¨‹å’Œéå®ˆæŠ¤çº¿ç¨‹çš„åŒºåˆ«ä»¥åŠç”¨æ³•" class="headerlink" title="å®ˆæŠ¤çº¿ç¨‹å’Œéå®ˆæŠ¤çº¿ç¨‹çš„åŒºåˆ«ä»¥åŠç”¨æ³•"></a>å®ˆæŠ¤çº¿ç¨‹å’Œéå®ˆæŠ¤çº¿ç¨‹çš„åŒºåˆ«ä»¥åŠç”¨æ³•</h5><h3 id="è¿›é˜¶ç¯‡"><a href="#è¿›é˜¶ç¯‡" class="headerlink" title="è¿›é˜¶ç¯‡"></a>è¿›é˜¶ç¯‡</h3><h4 id="Java-åº•å±‚çŸ¥è¯†"><a href="#Java-åº•å±‚çŸ¥è¯†" class="headerlink" title="Java åº•å±‚çŸ¥è¯†"></a>Java åº•å±‚çŸ¥è¯†</h4><h5 id="å­—èŠ‚ç ã€class-æ–‡ä»¶æ ¼å¼"><a href="#å­—èŠ‚ç ã€class-æ–‡ä»¶æ ¼å¼" class="headerlink" title="å­—èŠ‚ç ã€class æ–‡ä»¶æ ¼å¼"></a>å­—èŠ‚ç ã€class æ–‡ä»¶æ ¼å¼</h5><h5 id="CPU-ç¼“å­˜ï¼ŒL1ï¼ŒL2ï¼ŒL3-å’Œä¼ªå…±äº«"><a href="#CPU-ç¼“å­˜ï¼ŒL1ï¼ŒL2ï¼ŒL3-å’Œä¼ªå…±äº«" class="headerlink" title="CPU ç¼“å­˜ï¼ŒL1ï¼ŒL2ï¼ŒL3 å’Œä¼ªå…±äº«"></a>CPU ç¼“å­˜ï¼ŒL1ï¼ŒL2ï¼ŒL3 å’Œä¼ªå…±äº«</h5><h5 id="å°¾é€’å½’"><a href="#å°¾é€’å½’" class="headerlink" title="å°¾é€’å½’"></a>å°¾é€’å½’</h5><h5 id="ä½è¿ç®—"><a href="#ä½è¿ç®—" class="headerlink" title="ä½è¿ç®—"></a>ä½è¿ç®—</h5><h5 id="ç”¨ä½è¿ç®—å®ç°åŠ ã€å‡ã€ä¹˜ã€é™¤ã€å–ä½™"><a href="#ç”¨ä½è¿ç®—å®ç°åŠ ã€å‡ã€ä¹˜ã€é™¤ã€å–ä½™" class="headerlink" title="ç”¨ä½è¿ç®—å®ç°åŠ ã€å‡ã€ä¹˜ã€é™¤ã€å–ä½™"></a>ç”¨ä½è¿ç®—å®ç°åŠ ã€å‡ã€ä¹˜ã€é™¤ã€å–ä½™</h5><h4 id="è®¾è®¡æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼"></a>è®¾è®¡æ¨¡å¼</h4><h5 id="äº†è§£-23-ç§è®¾è®¡æ¨¡å¼"><a href="#äº†è§£-23-ç§è®¾è®¡æ¨¡å¼" class="headerlink" title="äº†è§£ 23 ç§è®¾è®¡æ¨¡å¼"></a>äº†è§£ 23 ç§è®¾è®¡æ¨¡å¼</h5><p>ä¼šä½¿ç”¨å¸¸ç”¨è®¾è®¡æ¨¡å¼<br>å•ä¾‹ã€ç­–ç•¥ã€å·¥å‚ã€é€‚é…å™¨ã€è´£ä»»é“¾ã€‚</p>
<h5 id="å®ç°-AOP"><a href="#å®ç°-AOP" class="headerlink" title="å®ç° AOP"></a>å®ç° AOP</h5><h5 id="å®ç°-IOC"><a href="#å®ç°-IOC" class="headerlink" title="å®ç° IOC"></a>å®ç° IOC</h5><h5 id="ä¸ç”¨-synchronized-å’Œ-lockï¼Œå®ç°çº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼"><a href="#ä¸ç”¨-synchronized-å’Œ-lockï¼Œå®ç°çº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼" class="headerlink" title="ä¸ç”¨ synchronized å’Œ lockï¼Œå®ç°çº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼"></a>ä¸ç”¨ synchronized å’Œ lockï¼Œå®ç°çº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼</h5><h5 id="nio-å’Œ-reactor-è®¾è®¡æ¨¡å¼"><a href="#nio-å’Œ-reactor-è®¾è®¡æ¨¡å¼" class="headerlink" title="nio å’Œ reactor è®¾è®¡æ¨¡å¼"></a>nio å’Œ reactor è®¾è®¡æ¨¡å¼</h5><h4 id="ç½‘ç»œç¼–ç¨‹çŸ¥è¯†"><a href="#ç½‘ç»œç¼–ç¨‹çŸ¥è¯†" class="headerlink" title="ç½‘ç»œç¼–ç¨‹çŸ¥è¯†"></a>ç½‘ç»œç¼–ç¨‹çŸ¥è¯†</h4><h5 id="tcpã€udpã€httpã€https-ç­‰å¸¸ç”¨åè®®"><a href="#tcpã€udpã€httpã€https-ç­‰å¸¸ç”¨åè®®" class="headerlink" title="tcpã€udpã€httpã€https ç­‰å¸¸ç”¨åè®®"></a>tcpã€udpã€httpã€https ç­‰å¸¸ç”¨åè®®</h5><p>ä¸‰æ¬¡æ¡æ‰‹ä¸å››æ¬¡å…³é—­ã€æµé‡æ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶ã€OSI ä¸ƒå±‚æ¨¡å‹ã€tcp ç²˜åŒ…ä¸æ‹†åŒ…</p>
<h5 id="http-1-0-http-1-1-http-2-ä¹‹å‰çš„åŒºåˆ«"><a href="#http-1-0-http-1-1-http-2-ä¹‹å‰çš„åŒºåˆ«" class="headerlink" title="http/1.0 http/1.1 http/2 ä¹‹å‰çš„åŒºåˆ«"></a>http/1.0 http/1.1 http/2 ä¹‹å‰çš„åŒºåˆ«</h5><h5 id="Java-RMIï¼ŒSocketï¼ŒHttpClient"><a href="#Java-RMIï¼ŒSocketï¼ŒHttpClient" class="headerlink" title="Java RMIï¼ŒSocketï¼ŒHttpClient"></a>Java RMIï¼ŒSocketï¼ŒHttpClient</h5><h5 id="cookie-ä¸-session"><a href="#cookie-ä¸-session" class="headerlink" title="cookie ä¸ session"></a>cookie ä¸ session</h5><p>cookie è¢«ç¦ç”¨ï¼Œå¦‚ä½•å®ç° session</p>
<h5 id="ç”¨-Java-å†™ä¸€ä¸ªç®€å•çš„é™æ€æ–‡ä»¶çš„-HTTP-æœåŠ¡å™¨"><a href="#ç”¨-Java-å†™ä¸€ä¸ªç®€å•çš„é™æ€æ–‡ä»¶çš„-HTTP-æœåŠ¡å™¨" class="headerlink" title="ç”¨ Java å†™ä¸€ä¸ªç®€å•çš„é™æ€æ–‡ä»¶çš„ HTTP æœåŠ¡å™¨"></a>ç”¨ Java å†™ä¸€ä¸ªç®€å•çš„é™æ€æ–‡ä»¶çš„ HTTP æœåŠ¡å™¨</h5><p>å®ç°å®¢æˆ·ç«¯ç¼“å­˜åŠŸèƒ½ï¼Œæ”¯æŒè¿”å› 304 å®ç°å¯å¹¶å‘ä¸‹è½½ä¸€ä¸ªæ–‡ä»¶ ä½¿ç”¨çº¿ç¨‹æ± å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚ ä½¿ç”¨ nio å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚ æ”¯æŒç®€å•çš„ rewrite è§„åˆ™ ä¸Šè¿°åŠŸèƒ½åœ¨å®ç°çš„æ—¶å€™éœ€è¦æ»¡è¶³â€œå¼€é—­åŸåˆ™â€</p>
<h5 id="äº†è§£-nginx-å’Œ-apache-æœåŠ¡å™¨çš„ç‰¹æ€§å¹¶æ­å»ºä¸€ä¸ªå¯¹åº”çš„æœåŠ¡å™¨"><a href="#äº†è§£-nginx-å’Œ-apache-æœåŠ¡å™¨çš„ç‰¹æ€§å¹¶æ­å»ºä¸€ä¸ªå¯¹åº”çš„æœåŠ¡å™¨" class="headerlink" title="äº†è§£ nginx å’Œ apache æœåŠ¡å™¨çš„ç‰¹æ€§å¹¶æ­å»ºä¸€ä¸ªå¯¹åº”çš„æœåŠ¡å™¨"></a>äº†è§£ nginx å’Œ apache æœåŠ¡å™¨çš„ç‰¹æ€§å¹¶æ­å»ºä¸€ä¸ªå¯¹åº”çš„æœåŠ¡å™¨</h5><h5 id="ç”¨-Java-å®ç°-FTPã€SMTP-åè®®"><a href="#ç”¨-Java-å®ç°-FTPã€SMTP-åè®®" class="headerlink" title="ç”¨ Java å®ç° FTPã€SMTP åè®®"></a>ç”¨ Java å®ç° FTPã€SMTP åè®®</h5><h5 id="è¿›ç¨‹é—´é€šè®¯çš„æ–¹å¼"><a href="#è¿›ç¨‹é—´é€šè®¯çš„æ–¹å¼" class="headerlink" title="è¿›ç¨‹é—´é€šè®¯çš„æ–¹å¼"></a>è¿›ç¨‹é—´é€šè®¯çš„æ–¹å¼</h5><h5 id="ä»€ä¹ˆæ˜¯-CDN-ï¼Ÿå¦‚æœå®ç°ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-CDN-ï¼Ÿå¦‚æœå®ç°ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ CDN ï¼Ÿå¦‚æœå®ç°ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ CDN ï¼Ÿå¦‚æœå®ç°ï¼Ÿ</h5><h5 id="ä»€ä¹ˆæ˜¯-DNS-ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-DNS-ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ DNS ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ DNS ï¼Ÿ</h5><h5 id="åå‘ä»£ç†"><a href="#åå‘ä»£ç†" class="headerlink" title="åå‘ä»£ç†"></a>åå‘ä»£ç†</h5><h4 id="æ¡†æ¶çŸ¥è¯†"><a href="#æ¡†æ¶çŸ¥è¯†" class="headerlink" title="æ¡†æ¶çŸ¥è¯†"></a>æ¡†æ¶çŸ¥è¯†</h4><h5 id="Servlet-çº¿ç¨‹å®‰å…¨é—®é¢˜"><a href="#Servlet-çº¿ç¨‹å®‰å…¨é—®é¢˜" class="headerlink" title="Servlet çº¿ç¨‹å®‰å…¨é—®é¢˜"></a>Servlet çº¿ç¨‹å®‰å…¨é—®é¢˜</h5><h5 id="Servlet-ä¸­çš„-filter-å’Œ-listener"><a href="#Servlet-ä¸­çš„-filter-å’Œ-listener" class="headerlink" title="Servlet ä¸­çš„ filter å’Œ listener"></a>Servlet ä¸­çš„ filter å’Œ listener</h5><h5 id="Hibernate-çš„ç¼“å­˜æœºåˆ¶"><a href="#Hibernate-çš„ç¼“å­˜æœºåˆ¶" class="headerlink" title="Hibernate çš„ç¼“å­˜æœºåˆ¶"></a>Hibernate çš„ç¼“å­˜æœºåˆ¶</h5><h5 id="Hiberate-çš„æ‡’åŠ è½½"><a href="#Hiberate-çš„æ‡’åŠ è½½" class="headerlink" title="Hiberate çš„æ‡’åŠ è½½"></a>Hiberate çš„æ‡’åŠ è½½</h5><h5 id="Spring-Bean-çš„åˆå§‹åŒ–"><a href="#Spring-Bean-çš„åˆå§‹åŒ–" class="headerlink" title="Spring Bean çš„åˆå§‹åŒ–"></a>Spring Bean çš„åˆå§‹åŒ–</h5><h5 id="Spring-çš„-AOP-åŸç†"><a href="#Spring-çš„-AOP-åŸç†" class="headerlink" title="Spring çš„ AOP åŸç†"></a>Spring çš„ AOP åŸç†</h5><h5 id="è‡ªå·±å®ç°-Spring-çš„-IOC"><a href="#è‡ªå·±å®ç°-Spring-çš„-IOC" class="headerlink" title="è‡ªå·±å®ç° Spring çš„ IOC"></a>è‡ªå·±å®ç° Spring çš„ IOC</h5><h5 id="Spring-MVC"><a href="#Spring-MVC" class="headerlink" title="Spring MVC"></a>Spring MVC</h5><h5 id="Spring-Boot2-0"><a href="#Spring-Boot2-0" class="headerlink" title="Spring Boot2.0"></a>Spring Boot2.0</h5><h5 id="Spring-Boot-çš„-starter-åŸç†ï¼Œè‡ªå·±å®ç°ä¸€ä¸ª-starter"><a href="#Spring-Boot-çš„-starter-åŸç†ï¼Œè‡ªå·±å®ç°ä¸€ä¸ª-starter" class="headerlink" title="Spring Boot çš„ starter åŸç†ï¼Œè‡ªå·±å®ç°ä¸€ä¸ª starter"></a>Spring Boot çš„ starter åŸç†ï¼Œè‡ªå·±å®ç°ä¸€ä¸ª starter</h5><h5 id="Spring-Security"><a href="#Spring-Security" class="headerlink" title="Spring Security"></a>Spring Security</h5><p>åº”ç”¨æœåŠ¡å™¨çŸ¥è¯†</p>
<h5 id="JBoss"><a href="#JBoss" class="headerlink" title="JBoss"></a>JBoss</h5><h5 id="tomcat"><a href="#tomcat" class="headerlink" title="tomcat"></a>tomcat</h5><h5 id="jetty"><a href="#jetty" class="headerlink" title="jetty"></a>jetty</h5><h5 id="Weblogic"><a href="#Weblogic" class="headerlink" title="Weblogic"></a>Weblogic</h5><h4 id="å·¥å…·"><a href="#å·¥å…·" class="headerlink" title="å·¥å…·"></a>å·¥å…·</h4><h5 id="git-amp-svn"><a href="#git-amp-svn" class="headerlink" title="git &amp; svn"></a>git &amp; svn</h5><h5 id="maven-amp-gradle"><a href="#maven-amp-gradle" class="headerlink" title="maven &amp; gradle"></a>maven &amp; gradle</h5><h4 id="idea"><a href="#idea" class="headerlink" title="idea"></a>idea</h4><h3 id="é«˜çº§ç¯‡"><a href="#é«˜çº§ç¯‡" class="headerlink" title="é«˜çº§ç¯‡"></a>é«˜çº§ç¯‡</h3><h4 id="æ–°æŠ€æœ¯"><a href="#æ–°æŠ€æœ¯" class="headerlink" title="æ–°æŠ€æœ¯"></a>æ–°æŠ€æœ¯</h4><h5 id="java8"><a href="#java8" class="headerlink" title="java8"></a>java8</h5><p> lambda è¡¨è¾¾å¼ã€Stream APIã€</p>
<h5 id="Java-9"><a href="#Java-9" class="headerlink" title="Java 9"></a>Java 9</h5><p>Jigsawã€Jshellã€Reactive Streams</p>
<h5 id="Java-10"><a href="#Java-10" class="headerlink" title="Java 10"></a>Java 10</h5><p>å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­ã€G1 çš„å¹¶è¡Œ Full GCã€ThreadLocal æ¡æ‰‹æœºåˆ¶</p>
<h5 id="Spring-5"><a href="#Spring-5" class="headerlink" title="Spring 5"></a>Spring 5</h5><p>å“åº”å¼ç¼–ç¨‹</p>
<h5 id="Spring-Boot-2-0"><a href="#Spring-Boot-2-0" class="headerlink" title="Spring Boot 2.0"></a>Spring Boot 2.0</h5><p>æ€§èƒ½ä¼˜åŒ–<br>ä½¿ç”¨å•ä¾‹ã€ä½¿ç”¨ Future æ¨¡å¼ã€ä½¿ç”¨çº¿ç¨‹æ± ã€é€‰æ‹©å°±ç»ªã€å‡å°‘ä¸Šä¸‹æ–‡åˆ‡æ¢ã€å‡å°‘é”ç²’åº¦ã€æ•°æ®å‹ç¼©ã€ç»“æœç¼“å­˜</p>
<h4 id="çº¿ä¸Šé—®é¢˜åˆ†æ"><a href="#çº¿ä¸Šé—®é¢˜åˆ†æ" class="headerlink" title="çº¿ä¸Šé—®é¢˜åˆ†æ"></a>çº¿ä¸Šé—®é¢˜åˆ†æ</h4><h5 id="dump-è·å–"><a href="#dump-è·å–" class="headerlink" title="dump è·å–"></a>dump è·å–</h5><p>çº¿ç¨‹ Dumpã€å†…å­˜ Dumpã€gc æƒ…å†µ</p>
<h5 id="dump-åˆ†æ"><a href="#dump-åˆ†æ" class="headerlink" title="dump åˆ†æ"></a>dump åˆ†æ</h5><p>åˆ†ææ­»é”ã€åˆ†æå†…å­˜æ³„éœ²</p>
<h5 id="è‡ªå·±ç¼–å†™å„ç§-outofmemoryï¼Œstackoverflow-ç¨‹åº"><a href="#è‡ªå·±ç¼–å†™å„ç§-outofmemoryï¼Œstackoverflow-ç¨‹åº" class="headerlink" title="è‡ªå·±ç¼–å†™å„ç§ outofmemoryï¼Œstackoverflow ç¨‹åº"></a>è‡ªå·±ç¼–å†™å„ç§ outofmemoryï¼Œstackoverflow ç¨‹åº</h5><p>HeapOutOfMemoryã€Young OutOfMemoryã€MethodArea OutOfMemoryã€ConstantPool OutOfMemoryã€DirectMemory OutOfMemoryã€Stack OutOfMemory Stack OverFlow</p>
<h5 id="å¸¸è§é—®é¢˜è§£å†³æ€è·¯"><a href="#å¸¸è§é—®é¢˜è§£å†³æ€è·¯" class="headerlink" title="å¸¸è§é—®é¢˜è§£å†³æ€è·¯"></a>å¸¸è§é—®é¢˜è§£å†³æ€è·¯</h5><p>å†…å­˜æº¢å‡ºã€çº¿ç¨‹æ­»é”ã€ç±»åŠ è½½å†²çª</p>
<h5 id="ä½¿ç”¨å·¥å…·å°è¯•è§£å†³ä»¥ä¸‹é—®é¢˜ï¼Œå¹¶å†™ä¸‹æ€»ç»“"><a href="#ä½¿ç”¨å·¥å…·å°è¯•è§£å†³ä»¥ä¸‹é—®é¢˜ï¼Œå¹¶å†™ä¸‹æ€»ç»“" class="headerlink" title="ä½¿ç”¨å·¥å…·å°è¯•è§£å†³ä»¥ä¸‹é—®é¢˜ï¼Œå¹¶å†™ä¸‹æ€»ç»“"></a>ä½¿ç”¨å·¥å…·å°è¯•è§£å†³ä»¥ä¸‹é—®é¢˜ï¼Œå¹¶å†™ä¸‹æ€»ç»“</h5><p>å½“ä¸€ä¸ª Java ç¨‹åºå“åº”å¾ˆæ…¢æ—¶å¦‚ä½•æŸ¥æ‰¾é—®é¢˜ã€</p>
<p>å½“ä¸€ä¸ª Java ç¨‹åºé¢‘ç¹ FullGC æ—¶å¦‚ä½•è§£å†³é—®é¢˜ã€</p>
<p>å¦‚ä½•æŸ¥çœ‹åƒåœ¾å›æ”¶æ—¥å¿—ã€</p>
<p>å½“ä¸€ä¸ª Java åº”ç”¨å‘ç”Ÿ OutOfMemory æ—¶è¯¥å¦‚ä½•è§£å†³ã€</p>
<p>å¦‚ä½•åˆ¤æ–­æ˜¯å¦å‡ºç°æ­»é”ã€</p>
<p>å¦‚ä½•åˆ¤æ–­æ˜¯å¦å­˜åœ¨å†…å­˜æ³„éœ²</p>
<h4 id="ç¼–è¯‘åŸç†çŸ¥è¯†"><a href="#ç¼–è¯‘åŸç†çŸ¥è¯†" class="headerlink" title="ç¼–è¯‘åŸç†çŸ¥è¯†"></a>ç¼–è¯‘åŸç†çŸ¥è¯†</h4><h5 id="ç¼–è¯‘ä¸åç¼–è¯‘"><a href="#ç¼–è¯‘ä¸åç¼–è¯‘" class="headerlink" title="ç¼–è¯‘ä¸åç¼–è¯‘"></a>ç¼–è¯‘ä¸åç¼–è¯‘</h5><h5 id="Java-ä»£ç çš„ç¼–è¯‘ä¸åç¼–è¯‘"><a href="#Java-ä»£ç çš„ç¼–è¯‘ä¸åç¼–è¯‘" class="headerlink" title="Java ä»£ç çš„ç¼–è¯‘ä¸åç¼–è¯‘"></a>Java ä»£ç çš„ç¼–è¯‘ä¸åç¼–è¯‘</h5><h5 id="Java-çš„åç¼–è¯‘å·¥å…·"><a href="#Java-çš„åç¼–è¯‘å·¥å…·" class="headerlink" title="Java çš„åç¼–è¯‘å·¥å…·"></a>Java çš„åç¼–è¯‘å·¥å…·</h5><h5 id="è¯æ³•åˆ†æï¼Œè¯­æ³•åˆ†æï¼ˆ-LL-ç®—æ³•ï¼Œé€’å½’ä¸‹é™ç®—æ³•ï¼ŒLR-ç®—æ³•ï¼‰ï¼Œè¯­ä¹‰åˆ†æï¼Œè¿è¡Œæ—¶ç¯å¢ƒï¼Œä¸­é—´ä»£ç ï¼Œä»£ç ç”Ÿæˆï¼Œä»£ç ä¼˜åŒ–"><a href="#è¯æ³•åˆ†æï¼Œè¯­æ³•åˆ†æï¼ˆ-LL-ç®—æ³•ï¼Œé€’å½’ä¸‹é™ç®—æ³•ï¼ŒLR-ç®—æ³•ï¼‰ï¼Œè¯­ä¹‰åˆ†æï¼Œè¿è¡Œæ—¶ç¯å¢ƒï¼Œä¸­é—´ä»£ç ï¼Œä»£ç ç”Ÿæˆï¼Œä»£ç ä¼˜åŒ–" class="headerlink" title="è¯æ³•åˆ†æï¼Œè¯­æ³•åˆ†æï¼ˆ LL ç®—æ³•ï¼Œé€’å½’ä¸‹é™ç®—æ³•ï¼ŒLR ç®—æ³•ï¼‰ï¼Œè¯­ä¹‰åˆ†æï¼Œè¿è¡Œæ—¶ç¯å¢ƒï¼Œä¸­é—´ä»£ç ï¼Œä»£ç ç”Ÿæˆï¼Œä»£ç ä¼˜åŒ–"></a>è¯æ³•åˆ†æï¼Œè¯­æ³•åˆ†æï¼ˆ LL ç®—æ³•ï¼Œé€’å½’ä¸‹é™ç®—æ³•ï¼ŒLR ç®—æ³•ï¼‰ï¼Œè¯­ä¹‰åˆ†æï¼Œè¿è¡Œæ—¶ç¯å¢ƒï¼Œä¸­é—´ä»£ç ï¼Œä»£ç ç”Ÿæˆï¼Œä»£ç ä¼˜åŒ–</h5><h4 id="æ“ä½œç³»ç»ŸçŸ¥è¯†"><a href="#æ“ä½œç³»ç»ŸçŸ¥è¯†" class="headerlink" title="æ“ä½œç³»ç»ŸçŸ¥è¯†"></a>æ“ä½œç³»ç»ŸçŸ¥è¯†</h4><h5 id="Linux-çš„å¸¸ç”¨å‘½ä»¤"><a href="#Linux-çš„å¸¸ç”¨å‘½ä»¤" class="headerlink" title="Linux çš„å¸¸ç”¨å‘½ä»¤"></a>Linux çš„å¸¸ç”¨å‘½ä»¤</h5><h5 id="è¿›ç¨‹åŒæ­¥"><a href="#è¿›ç¨‹åŒæ­¥" class="headerlink" title="è¿›ç¨‹åŒæ­¥"></a>è¿›ç¨‹åŒæ­¥</h5><h5 id="ç¼“å†²åŒºæº¢å‡º"><a href="#ç¼“å†²åŒºæº¢å‡º" class="headerlink" title="ç¼“å†²åŒºæº¢å‡º"></a>ç¼“å†²åŒºæº¢å‡º</h5><h5 id="åˆ†æ®µå’Œåˆ†é¡µ"><a href="#åˆ†æ®µå’Œåˆ†é¡µ" class="headerlink" title="åˆ†æ®µå’Œåˆ†é¡µ"></a>åˆ†æ®µå’Œåˆ†é¡µ</h5><h5 id="è™šæ‹Ÿå†…å­˜ä¸ä¸»å­˜"><a href="#è™šæ‹Ÿå†…å­˜ä¸ä¸»å­˜" class="headerlink" title="è™šæ‹Ÿå†…å­˜ä¸ä¸»å­˜"></a>è™šæ‹Ÿå†…å­˜ä¸ä¸»å­˜</h5><h4 id="æ•°æ®åº“çŸ¥è¯†"><a href="#æ•°æ®åº“çŸ¥è¯†" class="headerlink" title="æ•°æ®åº“çŸ¥è¯†"></a>æ•°æ®åº“çŸ¥è¯†</h4><h5 id="MySql-æ‰§è¡Œå¼•æ“"><a href="#MySql-æ‰§è¡Œå¼•æ“" class="headerlink" title="MySql æ‰§è¡Œå¼•æ“"></a>MySql æ‰§è¡Œå¼•æ“</h5><h5 id="MySQL-æ‰§è¡Œè®¡åˆ’"><a href="#MySQL-æ‰§è¡Œè®¡åˆ’" class="headerlink" title="MySQL æ‰§è¡Œè®¡åˆ’"></a>MySQL æ‰§è¡Œè®¡åˆ’</h5><h5 id="å¦‚ä½•æŸ¥çœ‹æ‰§è¡Œè®¡åˆ’ï¼Œå¦‚ä½•æ ¹æ®æ‰§è¡Œè®¡åˆ’è¿›è¡Œ-SQL-ä¼˜åŒ–"><a href="#å¦‚ä½•æŸ¥çœ‹æ‰§è¡Œè®¡åˆ’ï¼Œå¦‚ä½•æ ¹æ®æ‰§è¡Œè®¡åˆ’è¿›è¡Œ-SQL-ä¼˜åŒ–" class="headerlink" title="å¦‚ä½•æŸ¥çœ‹æ‰§è¡Œè®¡åˆ’ï¼Œå¦‚ä½•æ ¹æ®æ‰§è¡Œè®¡åˆ’è¿›è¡Œ SQL ä¼˜åŒ–"></a>å¦‚ä½•æŸ¥çœ‹æ‰§è¡Œè®¡åˆ’ï¼Œå¦‚ä½•æ ¹æ®æ‰§è¡Œè®¡åˆ’è¿›è¡Œ SQL ä¼˜åŒ–</h5><h4 id="SQL-ä¼˜åŒ–"><a href="#SQL-ä¼˜åŒ–" class="headerlink" title="SQL ä¼˜åŒ–"></a>SQL ä¼˜åŒ–</h4><h5 id="äº‹åŠ¡"><a href="#äº‹åŠ¡" class="headerlink" title="äº‹åŠ¡"></a>äº‹åŠ¡</h5><p>äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ã€äº‹åŠ¡èƒ½ä¸èƒ½å®ç°é”çš„åŠŸèƒ½</p>
<h5 id="æ•°æ®åº“é”"><a href="#æ•°æ®åº“é”" class="headerlink" title="æ•°æ®åº“é”"></a>æ•°æ®åº“é”</h5><p>è¡Œé”ã€è¡¨é”ã€ä½¿ç”¨æ•°æ®åº“é”å®ç°ä¹è§‚é”ã€</p>
<h5 id="æ•°æ®åº“ä¸»å¤‡æ­å»º"><a href="#æ•°æ®åº“ä¸»å¤‡æ­å»º" class="headerlink" title="æ•°æ®åº“ä¸»å¤‡æ­å»º"></a>æ•°æ®åº“ä¸»å¤‡æ­å»º</h5><h5 id="binlog"><a href="#binlog" class="headerlink" title="binlog"></a>binlog</h5><h5 id="å†…å­˜æ•°æ®åº“"><a href="#å†…å­˜æ•°æ®åº“" class="headerlink" title="å†…å­˜æ•°æ®åº“"></a>å†…å­˜æ•°æ®åº“</h5><p>h2</p>
<h5 id="å¸¸ç”¨çš„-nosql-æ•°æ®åº“"><a href="#å¸¸ç”¨çš„-nosql-æ•°æ®åº“" class="headerlink" title="å¸¸ç”¨çš„ nosql æ•°æ®åº“"></a>å¸¸ç”¨çš„ nosql æ•°æ®åº“</h5><p>redisã€memcached</p>
<h5 id="åˆ†åˆ«ä½¿ç”¨æ•°æ®åº“é”ã€NoSql-å®ç°åˆ†å¸ƒå¼é”"><a href="#åˆ†åˆ«ä½¿ç”¨æ•°æ®åº“é”ã€NoSql-å®ç°åˆ†å¸ƒå¼é”" class="headerlink" title="åˆ†åˆ«ä½¿ç”¨æ•°æ®åº“é”ã€NoSql å®ç°åˆ†å¸ƒå¼é”"></a>åˆ†åˆ«ä½¿ç”¨æ•°æ®åº“é”ã€NoSql å®ç°åˆ†å¸ƒå¼é”</h5><h5 id="æ€§èƒ½è°ƒä¼˜"><a href="#æ€§èƒ½è°ƒä¼˜" class="headerlink" title="æ€§èƒ½è°ƒä¼˜"></a>æ€§èƒ½è°ƒä¼˜</h5><h4 id="æ•°æ®ç»“æ„ä¸ç®—æ³•çŸ¥è¯†"><a href="#æ•°æ®ç»“æ„ä¸ç®—æ³•çŸ¥è¯†" class="headerlink" title="æ•°æ®ç»“æ„ä¸ç®—æ³•çŸ¥è¯†"></a>æ•°æ®ç»“æ„ä¸ç®—æ³•çŸ¥è¯†</h4><h5 id="ç®€å•çš„æ•°æ®ç»“æ„"><a href="#ç®€å•çš„æ•°æ®ç»“æ„" class="headerlink" title="ç®€å•çš„æ•°æ®ç»“æ„"></a>ç®€å•çš„æ•°æ®ç»“æ„</h5><h5 id="æ ˆã€é˜Ÿåˆ—ã€é“¾è¡¨ã€æ•°ç»„ã€å“ˆå¸Œè¡¨ã€"><a href="#æ ˆã€é˜Ÿåˆ—ã€é“¾è¡¨ã€æ•°ç»„ã€å“ˆå¸Œè¡¨ã€" class="headerlink" title="æ ˆã€é˜Ÿåˆ—ã€é“¾è¡¨ã€æ•°ç»„ã€å“ˆå¸Œè¡¨ã€"></a>æ ˆã€é˜Ÿåˆ—ã€é“¾è¡¨ã€æ•°ç»„ã€å“ˆå¸Œè¡¨ã€</h5><h5 id="æ ‘"><a href="#æ ‘" class="headerlink" title="æ ‘"></a>æ ‘</h5><p>äºŒå‰æ ‘ã€å­—å…¸æ ‘ã€å¹³è¡¡æ ‘ã€æ’åºæ ‘ã€B æ ‘ã€B+æ ‘ã€R æ ‘ã€å¤šè·¯æ ‘ã€çº¢é»‘æ ‘</p>
<h5 id="æ’åºç®—æ³•"><a href="#æ’åºç®—æ³•" class="headerlink" title="æ’åºç®—æ³•"></a>æ’åºç®—æ³•</h5><p>å„ç§æ’åºç®—æ³•å’Œæ—¶é—´å¤æ‚åº¦ æ·±åº¦ä¼˜å…ˆå’Œå¹¿åº¦ä¼˜å…ˆæœç´¢ å…¨æ’åˆ—ã€è´ªå¿ƒç®—æ³•ã€KMP ç®—æ³•ã€hash ç®—æ³•ã€æµ·é‡æ•°æ®å¤„ç†</p>
<h4 id="å¤§æ•°æ®çŸ¥è¯†"><a href="#å¤§æ•°æ®çŸ¥è¯†" class="headerlink" title="å¤§æ•°æ®çŸ¥è¯†"></a>å¤§æ•°æ®çŸ¥è¯†</h4><h5 id="Zookeeper"><a href="#Zookeeper" class="headerlink" title="Zookeeper"></a>Zookeeper</h5><p>åŸºæœ¬æ¦‚å¿µã€å¸¸è§ç”¨æ³•</p>
<h5 id="Solrï¼ŒLuceneï¼ŒElasticSearch"><a href="#Solrï¼ŒLuceneï¼ŒElasticSearch" class="headerlink" title="Solrï¼ŒLuceneï¼ŒElasticSearch"></a>Solrï¼ŒLuceneï¼ŒElasticSearch</h5><p>åœ¨ linux ä¸Šéƒ¨ç½² solrï¼Œsolrcloudï¼Œï¼Œæ–°å¢ã€åˆ é™¤ã€æŸ¥è¯¢ç´¢å¼•</p>
<h5 id="Stormï¼Œæµå¼è®¡ç®—ï¼Œäº†è§£-Sparkï¼ŒS4"><a href="#Stormï¼Œæµå¼è®¡ç®—ï¼Œäº†è§£-Sparkï¼ŒS4" class="headerlink" title="Stormï¼Œæµå¼è®¡ç®—ï¼Œäº†è§£ Sparkï¼ŒS4"></a>Stormï¼Œæµå¼è®¡ç®—ï¼Œäº†è§£ Sparkï¼ŒS4</h5><p>åœ¨ linux ä¸Šéƒ¨ç½² stormï¼Œç”¨ zookeeper åšåè°ƒï¼Œè¿è¡Œ storm hello worldï¼Œlocal å’Œ remote æ¨¡å¼è¿è¡Œè°ƒè¯• storm topologyã€‚</p>
<h5 id="Hadoopï¼Œç¦»çº¿è®¡ç®—"><a href="#Hadoopï¼Œç¦»çº¿è®¡ç®—" class="headerlink" title="Hadoopï¼Œç¦»çº¿è®¡ç®—"></a>Hadoopï¼Œç¦»çº¿è®¡ç®—</h5><p>HDFSã€MapReduce</p>
<h5 id="åˆ†å¸ƒå¼æ—¥å¿—æ”¶é›†-flumeï¼Œkafkaï¼Œlogstash"><a href="#åˆ†å¸ƒå¼æ—¥å¿—æ”¶é›†-flumeï¼Œkafkaï¼Œlogstash" class="headerlink" title="åˆ†å¸ƒå¼æ—¥å¿—æ”¶é›† flumeï¼Œkafkaï¼Œlogstash"></a>åˆ†å¸ƒå¼æ—¥å¿—æ”¶é›† flumeï¼Œkafkaï¼Œlogstash</h5><h5 id="æ•°æ®æŒ–æ˜ï¼Œmahout"><a href="#æ•°æ®æŒ–æ˜ï¼Œmahout" class="headerlink" title="æ•°æ®æŒ–æ˜ï¼Œmahout"></a>æ•°æ®æŒ–æ˜ï¼Œmahout</h5><h4 id="ç½‘ç»œå®‰å…¨çŸ¥è¯†"><a href="#ç½‘ç»œå®‰å…¨çŸ¥è¯†" class="headerlink" title="ç½‘ç»œå®‰å…¨çŸ¥è¯†"></a>ç½‘ç»œå®‰å…¨çŸ¥è¯†</h4><h5 id="ä»€ä¹ˆæ˜¯-XSS"><a href="#ä»€ä¹ˆæ˜¯-XSS" class="headerlink" title="ä»€ä¹ˆæ˜¯ XSS"></a>ä»€ä¹ˆæ˜¯ XSS</h5><p>XSS çš„é˜²å¾¡</p>
<h5 id="ä»€ä¹ˆæ˜¯-CSRF"><a href="#ä»€ä¹ˆæ˜¯-CSRF" class="headerlink" title="ä»€ä¹ˆæ˜¯ CSRF"></a>ä»€ä¹ˆæ˜¯ CSRF</h5><h5 id="ä»€ä¹ˆæ˜¯æ³¨å…¥æ”»å‡»"><a href="#ä»€ä¹ˆæ˜¯æ³¨å…¥æ”»å‡»" class="headerlink" title="ä»€ä¹ˆæ˜¯æ³¨å…¥æ”»å‡»"></a>ä»€ä¹ˆæ˜¯æ³¨å…¥æ”»å‡»</h5><p>SQL æ³¨å…¥ã€XML æ³¨å…¥ã€CRLF æ³¨å…¥</p>
<h5 id="ä»€ä¹ˆæ˜¯æ–‡ä»¶ä¸Šä¼ æ¼æ´"><a href="#ä»€ä¹ˆæ˜¯æ–‡ä»¶ä¸Šä¼ æ¼æ´" class="headerlink" title="ä»€ä¹ˆæ˜¯æ–‡ä»¶ä¸Šä¼ æ¼æ´"></a>ä»€ä¹ˆæ˜¯æ–‡ä»¶ä¸Šä¼ æ¼æ´</h5><h5 id="åŠ å¯†ä¸è§£å¯†"><a href="#åŠ å¯†ä¸è§£å¯†" class="headerlink" title="åŠ å¯†ä¸è§£å¯†"></a>åŠ å¯†ä¸è§£å¯†</h5><p>MD5ï¼ŒSHA1ã€DESã€AESã€RSAã€DSA</p>
<h5 id="ä»€ä¹ˆæ˜¯-DOS-æ”»å‡»å’Œ-DDOS-æ”»å‡»"><a href="#ä»€ä¹ˆæ˜¯-DOS-æ”»å‡»å’Œ-DDOS-æ”»å‡»" class="headerlink" title="ä»€ä¹ˆæ˜¯ DOS æ”»å‡»å’Œ DDOS æ”»å‡»"></a>ä»€ä¹ˆæ˜¯ DOS æ”»å‡»å’Œ DDOS æ”»å‡»</h5><p>memcached ä¸ºä»€ä¹ˆå¯ä»¥å¯¼è‡´ DDos æ”»å‡»ã€ä»€ä¹ˆæ˜¯åå°„å‹ DDoS</p>
<h5 id="SSLã€TLSï¼ŒHTTPS"><a href="#SSLã€TLSï¼ŒHTTPS" class="headerlink" title="SSLã€TLSï¼ŒHTTPS"></a>SSLã€TLSï¼ŒHTTPS</h5><h5 id="å¦‚ä½•é€šè¿‡-Hash-ç¢°æ’è¿›è¡Œ-DOS-æ”»å‡»"><a href="#å¦‚ä½•é€šè¿‡-Hash-ç¢°æ’è¿›è¡Œ-DOS-æ”»å‡»" class="headerlink" title="å¦‚ä½•é€šè¿‡ Hash ç¢°æ’è¿›è¡Œ DOS æ”»å‡»"></a>å¦‚ä½•é€šè¿‡ Hash ç¢°æ’è¿›è¡Œ DOS æ”»å‡»</h5><h5 id="ç”¨-openssl-ç­¾ä¸€ä¸ªè¯ä¹¦éƒ¨ç½²åˆ°-apache-æˆ–-nginx"><a href="#ç”¨-openssl-ç­¾ä¸€ä¸ªè¯ä¹¦éƒ¨ç½²åˆ°-apache-æˆ–-nginx" class="headerlink" title="ç”¨ openssl ç­¾ä¸€ä¸ªè¯ä¹¦éƒ¨ç½²åˆ° apache æˆ– nginx"></a>ç”¨ openssl ç­¾ä¸€ä¸ªè¯ä¹¦éƒ¨ç½²åˆ° apache æˆ– nginx</h5><h3 id="å››ã€æ¶æ„ç¯‡"><a href="#å››ã€æ¶æ„ç¯‡" class="headerlink" title="å››ã€æ¶æ„ç¯‡"></a>å››ã€æ¶æ„ç¯‡</h3><h5 id="åˆ†å¸ƒå¼"><a href="#åˆ†å¸ƒå¼" class="headerlink" title="åˆ†å¸ƒå¼"></a>åˆ†å¸ƒå¼</h5><p>æ•°æ®ä¸€è‡´æ€§ã€æœåŠ¡æ²»ç†ã€æœåŠ¡é™çº§</p>
<h5 id="åˆ†å¸ƒå¼äº‹åŠ¡"><a href="#åˆ†å¸ƒå¼äº‹åŠ¡" class="headerlink" title="åˆ†å¸ƒå¼äº‹åŠ¡"></a>åˆ†å¸ƒå¼äº‹åŠ¡</h5><p>2PCã€3PCã€CAPã€BASEã€ å¯é æ¶ˆæ¯æœ€ç»ˆä¸€è‡´æ€§ã€æœ€å¤§åŠªåŠ›é€šçŸ¥ã€TCC</p>
<h5 id="Dubbo"><a href="#Dubbo" class="headerlink" title="Dubbo"></a>Dubbo</h5><p>æœåŠ¡æ³¨å†Œã€æœåŠ¡å‘ç°ï¼ŒæœåŠ¡æ²»ç†</p>
<h5 id="åˆ†å¸ƒå¼æ•°æ®åº“"><a href="#åˆ†å¸ƒå¼æ•°æ®åº“" class="headerlink" title="åˆ†å¸ƒå¼æ•°æ®åº“"></a>åˆ†å¸ƒå¼æ•°æ®åº“</h5><p>æ€æ ·æ‰“é€ ä¸€ä¸ªåˆ†å¸ƒå¼æ•°æ®åº“ã€ä»€ä¹ˆæ—¶å€™éœ€è¦åˆ†å¸ƒå¼æ•°æ®åº“ã€mycatã€otterã€HBase</p>
<h5 id="åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ"><a href="#åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ"></a>åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ</h5><p>mfsã€fastdfs</p>
<h5 id="åˆ†å¸ƒå¼ç¼“å­˜"><a href="#åˆ†å¸ƒå¼ç¼“å­˜" class="headerlink" title="åˆ†å¸ƒå¼ç¼“å­˜"></a>åˆ†å¸ƒå¼ç¼“å­˜</h5><p>ç¼“å­˜ä¸€è‡´æ€§ã€ç¼“å­˜å‘½ä¸­ç‡ã€ç¼“å­˜å†—ä½™</p>
<h4 id="å¾®æœåŠ¡"><a href="#å¾®æœåŠ¡" class="headerlink" title="å¾®æœåŠ¡"></a>å¾®æœåŠ¡</h4><p>SOAã€åº·å¨å®šå¾‹</p>
<h5 id="ServiceMesh"><a href="#ServiceMesh" class="headerlink" title="ServiceMesh"></a>ServiceMesh</h5><h5 id="Docker-amp-Kubernets"><a href="#Docker-amp-Kubernets" class="headerlink" title="Docker &amp; Kubernets"></a>Docker &amp; Kubernets</h5><h5 id="Spring-Boot"><a href="#Spring-Boot" class="headerlink" title="Spring Boot"></a>Spring Boot</h5><h5 id="Spring-Cloud"><a href="#Spring-Cloud" class="headerlink" title="Spring Cloud"></a>Spring Cloud</h5><h4 id="é«˜å¹¶å‘"><a href="#é«˜å¹¶å‘" class="headerlink" title="é«˜å¹¶å‘"></a>é«˜å¹¶å‘</h4><h5 id="åˆ†åº“åˆ†è¡¨"><a href="#åˆ†åº“åˆ†è¡¨" class="headerlink" title="åˆ†åº“åˆ†è¡¨"></a>åˆ†åº“åˆ†è¡¨</h5><h5 id="åˆ†åº“åˆ†è¡¨-1"><a href="#åˆ†åº“åˆ†è¡¨-1" class="headerlink" title="åˆ†åº“åˆ†è¡¨"></a>åˆ†åº“åˆ†è¡¨</h5><h5 id="CDN-æŠ€æœ¯"><a href="#CDN-æŠ€æœ¯" class="headerlink" title="CDN æŠ€æœ¯"></a>CDN æŠ€æœ¯</h5><h5 id="æ¶ˆæ¯é˜Ÿåˆ—"><a href="#æ¶ˆæ¯é˜Ÿåˆ—" class="headerlink" title="æ¶ˆæ¯é˜Ÿåˆ—"></a>æ¶ˆæ¯é˜Ÿåˆ—</h5><p>ActiveMQã€RabbitMQã€Kafka</p>
<h4 id="ç›‘æ§"><a href="#ç›‘æ§" class="headerlink" title="ç›‘æ§"></a>ç›‘æ§</h4><h5 id="ç›‘æ§ä»€ä¹ˆ"><a href="#ç›‘æ§ä»€ä¹ˆ" class="headerlink" title="ç›‘æ§ä»€ä¹ˆ"></a>ç›‘æ§ä»€ä¹ˆ</h5><p>CPUã€å†…å­˜ã€ç£ç›˜ I/Oã€ç½‘ç»œ I/O ç­‰</p>
<h5 id="ç›‘æ§æ‰‹æ®µ"><a href="#ç›‘æ§æ‰‹æ®µ" class="headerlink" title="ç›‘æ§æ‰‹æ®µ"></a>ç›‘æ§æ‰‹æ®µ</h5><p>è¿›ç¨‹ç›‘æ§ã€è¯­ä¹‰ç›‘æ§ã€æœºå™¨èµ„æºç›‘æ§ã€æ•°æ®æ³¢åŠ¨</p>
<h5 id="ç›‘æ§æ•°æ®é‡‡é›†"><a href="#ç›‘æ§æ•°æ®é‡‡é›†" class="headerlink" title="ç›‘æ§æ•°æ®é‡‡é›†"></a>ç›‘æ§æ•°æ®é‡‡é›†</h5><p>æ—¥å¿—ã€åŸ‹ç‚¹</p>
<h5 id="Dapper"><a href="#Dapper" class="headerlink" title="Dapper"></a>Dapper</h5><h5 id="è´Ÿè½½å‡è¡¡"><a href="#è´Ÿè½½å‡è¡¡" class="headerlink" title="è´Ÿè½½å‡è¡¡"></a>è´Ÿè½½å‡è¡¡</h5><p>tomcat è´Ÿè½½å‡è¡¡ã€Nginx è´Ÿè½½å‡è¡¡</p>
<h5 id="DNS"><a href="#DNS" class="headerlink" title="DNS"></a>DNS</h5><p>DNS åŸç†ã€DNS çš„è®¾è®¡</p>
<h5 id="CDN"><a href="#CDN" class="headerlink" title="CDN"></a>CDN</h5><h5 id="æ•°æ®ä¸€è‡´æ€§"><a href="#æ•°æ®ä¸€è‡´æ€§" class="headerlink" title="æ•°æ®ä¸€è‡´æ€§"></a>æ•°æ®ä¸€è‡´æ€§</h5><h3 id="äº”ã€-æ‰©å±•ç¯‡"><a href="#äº”ã€-æ‰©å±•ç¯‡" class="headerlink" title="äº”ã€ æ‰©å±•ç¯‡"></a>äº”ã€ æ‰©å±•ç¯‡</h3><h4 id="äº‘è®¡ç®—"><a href="#äº‘è®¡ç®—" class="headerlink" title="äº‘è®¡ç®—"></a>äº‘è®¡ç®—</h4><p>IaaSã€SaaSã€PaaSã€è™šæ‹ŸåŒ–æŠ€æœ¯ã€openstackã€Serverlsess</p>
<h5 id="æœç´¢å¼•æ“"><a href="#æœç´¢å¼•æ“" class="headerlink" title="æœç´¢å¼•æ“"></a>æœç´¢å¼•æ“</h5><p>Solrã€Luceneã€Nutchã€Elasticsearch</p>
<h5 id="æƒé™ç®¡ç†"><a href="#æƒé™ç®¡ç†" class="headerlink" title="æƒé™ç®¡ç†"></a>æƒé™ç®¡ç†</h5><p>Shiro</p>
<h5 id="åŒºå—é“¾"><a href="#åŒºå—é“¾" class="headerlink" title="åŒºå—é“¾"></a>åŒºå—é“¾</h5><p>å“ˆå¸Œç®—æ³•ã€Merkle æ ‘ã€å…¬é’¥å¯†ç ç®—æ³•ã€å…±è¯†ç®—æ³•ã€Raft åè®®ã€Paxos ç®—æ³•ä¸ Raft ç®—æ³•ã€æ‹œå åº­é—®é¢˜ä¸ç®—æ³•ã€æ¶ˆæ¯è®¤è¯ç ä¸æ•°å­—ç­¾å</p>
<h5 id="æ¯”ç‰¹å¸"><a href="#æ¯”ç‰¹å¸" class="headerlink" title="æ¯”ç‰¹å¸"></a>æ¯”ç‰¹å¸</h5><p>æŒ–çŸ¿ã€å…±è¯†æœºåˆ¶ã€é—ªç”µç½‘ç»œã€ä¾§é“¾ã€çƒ­ç‚¹é—®é¢˜ã€åˆ†å‰</p>
<h5 id="ä»¥å¤ªåŠ"><a href="#ä»¥å¤ªåŠ" class="headerlink" title="ä»¥å¤ªåŠ"></a>ä»¥å¤ªåŠ</h5><p>è¶…çº§è´¦æœ¬<br>äººå·¥æ™ºèƒ½<br>æ•°å­¦åŸºç¡€ã€æœºå™¨å­¦ä¹ ã€äººå·¥ç¥ç»ç½‘ç»œã€æ·±åº¦å­¦ä¹ ã€åº”ç”¨åœºæ™¯ã€‚</p>
<h5 id="å¸¸ç”¨æ¡†æ¶"><a href="#å¸¸ç”¨æ¡†æ¶" class="headerlink" title="å¸¸ç”¨æ¡†æ¶"></a>å¸¸ç”¨æ¡†æ¶</h5><p>TensorFlowã€DeepLearning4J</p>
<h5 id="å…¶ä»–è¯­è¨€"><a href="#å…¶ä»–è¯­è¨€" class="headerlink" title="å…¶ä»–è¯­è¨€"></a>å…¶ä»–è¯­è¨€</h5><p>Groovyã€Pythonã€Goã€NodeJsã€Swiftã€Rust</p>
<h3 id="å…­ã€-æ¨èä¹¦ç±"><a href="#å…­ã€-æ¨èä¹¦ç±" class="headerlink" title="å…­ã€ æ¨èä¹¦ç±"></a>å…­ã€ æ¨èä¹¦ç±</h3><p>ã€Šæ·±å…¥ç†è§£ Java è™šæ‹Ÿæœºã€‹ ã€Š Effective Java ã€‹ ã€Šæ·±å…¥åˆ†æ Java Web æŠ€æœ¯å†…å¹•ã€‹ ã€Šå¤§å‹ç½‘ç«™æŠ€æœ¯æ¶æ„ã€‹ ã€Šä»£ç æ•´æ´ä¹‹é“ã€‹ ã€Š Head First è®¾è®¡æ¨¡å¼ã€‹ ã€Š maven å®æˆ˜ã€‹ ã€ŠåŒºå—é“¾åŸç†ã€è®¾è®¡ä¸åº”ç”¨ã€‹ ã€Š Java å¹¶å‘ç¼–ç¨‹å®æˆ˜ã€‹ ã€Šé¸Ÿå“¥çš„ Linux ç§æˆ¿èœã€‹ ã€Šä» Paxos åˆ° Zookeeper ã€‹ ã€Šæ¶æ„å³æœªæ¥ã€‹</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/06/01/Guavaåˆæ¢/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="leonyoung">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://res.cloudinary.com/leon824/image/upload/v1505793001/IMG_3957_uwrsum.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="èŠ±è°¢èŠ±å¼€">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/01/Guavaåˆæ¢/" itemprop="url">Guava Cacheåˆæ¢</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">ç™¼è¡¨æ–¼</span>
              
              <time title="å‰µå»ºæ–¼" itemprop="dateCreated datePublished" datetime="2018-06-01T15:22:37+08:00">
                2018-06-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†é¡æ–¼</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="ç¼“å­˜çš„ç±»åˆ«ã€åº”ç”¨åœºæ™¯"><a href="#ç¼“å­˜çš„ç±»åˆ«ã€åº”ç”¨åœºæ™¯" class="headerlink" title="ç¼“å­˜çš„ç±»åˆ«ã€åº”ç”¨åœºæ™¯"></a>ç¼“å­˜çš„ç±»åˆ«ã€åº”ç”¨åœºæ™¯</h3><blockquote>
<p>&emsp;&emsp;é«˜é€Ÿç¼“å­˜ç®€ç§°ç¼“å­˜ï¼ŒåŸå§‹æ„ä¹‰æ˜¯æŒ‡è®¿é—®é€Ÿåº¦æ¯”ä¸€èˆ¬éšæœºå­˜å–å­˜å‚¨å™¨ï¼ˆRAMï¼‰å¿«çš„ä¸€ç§RAMï¼Œé€šå¸¸å®ƒä¸åƒç³»ç»Ÿä¸»å­˜é‚£æ ·ä½¿ç”¨DRAMæŠ€æœ¯ï¼Œè€Œä½¿ç”¨æ˜‚è´µä½†è¾ƒå¿«é€Ÿçš„SRAMæŠ€æœ¯ã€‚å½“CPUå¤„ç†æ•°æ®æ—¶ï¼Œå®ƒä¼šå…ˆåˆ°Cacheä¸­å»å¯»æ‰¾ï¼Œå¦‚æœæ•°æ®å› ä¹‹å‰çš„æ“ä½œå·²ç»è¯»å–è€Œè¢«æš‚å­˜å…¶ä¸­ï¼Œå°±ä¸éœ€è¦å†ä»éšæœºå­˜å–å­˜å‚¨å™¨ï¼ˆMain memoryï¼‰ä¸­è¯»å–æ•°æ®â€”â€”ç”±äºCPUçš„è¿è¡Œé€Ÿåº¦ä¸€èˆ¬æ¯”ä¸»å†…å­˜çš„è¯»å–é€Ÿåº¦å¿«ï¼Œä¸»å­˜å‚¨å™¨å‘¨æœŸï¼ˆè®¿é—®ä¸»å­˜å‚¨å™¨æ‰€éœ€è¦çš„æ—¶é—´ï¼‰ä¸ºæ•°ä¸ªæ—¶é’Ÿå‘¨æœŸã€‚å› æ­¤è‹¥è¦è®¿é—®ä¸»å†…å­˜çš„è¯ï¼Œå°±å¿…é¡»ç­‰å¾…æ•°ä¸ªCPUå‘¨æœŸä»è€Œé€ æˆæµªè´¹ã€‚</p>
<p>&emsp;&emsp; ç°åœ¨çš„ç¼“å­˜æ¦‚å¿µä¸ä»…ä»…æ˜¯CPUå’Œä¸»å­˜ä¹‹é—´æœ‰Cacheï¼Œè€Œä¸”åœ¨å†…å­˜å’Œç¡¬ç›˜ä¹‹é—´ä¹Ÿæœ‰ç¼“å­˜ï¼ˆ<strong>ç£ç›˜ç¼“å­˜</strong>ï¼‰ï¼Œä¹ƒè‡³åœ¨ç¡¬ç›˜ä¸ç½‘ç»œä¹‹é—´ä¹Ÿæœ‰æŸç§æ„ä¹‰ä¸Šçš„Cacheâ”€â”€ç§°ä¸ºInternetä¸´æ—¶æ–‡ä»¶å¤¹æˆ–ç½‘ç»œå†…å®¹ç¼“å­˜ç­‰ã€‚å‡¡æ˜¯ä½äºé€Ÿåº¦ç›¸å·®è¾ƒå¤§çš„ä¸¤ç§ç¡¬ä»¶ä¹‹é—´ï¼Œç”¨äºåè°ƒä¸¤è€…æ•°æ®ä¼ è¾“é€Ÿåº¦å·®å¼‚çš„ç»“æ„ï¼Œå‡å¯ç§°ä¹‹ä¸ºCacheã€‚</p>
</blockquote>
<p>æ‘˜å½•è‡ª<a href="https://zh.wikipedia.org/wiki/%E7%BC%93%E5%AD%98" target="_blank" rel="external">ç»´åŸºç™¾ç§‘</a></p>
<p>&emsp;&emsp;&ensp;åœ¨è¿™é‡Œæˆ‘ä»¬è®¨è®ºçš„æ˜¯ç£ç›˜ç¼“å­˜ï¼Œå½“æˆ‘ä»¬åœ¨å®é™…å¼€å‘ä¸­é‡åˆ°æŸ¥è¯¢è¿œè¿œæ¯”æ›´æ–°ã€æ’å…¥æ“ä½œæ›´å¤šçš„æ—¶å€™å°±å¯ä»¥è€ƒè™‘ä½¿ç”¨ç¼“å­˜ï¼Œç”¨ç©ºé—´æ¥æ¢å–æ—¶é—´çš„ç­–ç•¥ã€‚</p>
<h4 id="JVMç¼“å­˜"><a href="#JVMç¼“å­˜" class="headerlink" title="JVMç¼“å­˜"></a>JVMç¼“å­˜</h4><p>æˆ‘ä»¬å¹³å¸¸ä½¿ç”¨çš„Mapã€Listéƒ½å±äº JVMç¼“å­˜ï¼Œä½¿ç”¨JVMç¼“å­˜çš„ä¼˜åŠ¿åœ¨äºç®€å•ï¼Œä½†æ˜¯ä¹Ÿå­˜åœ¨ä¸€äº›é—®é¢˜</p>
<ul>
<li>åªèƒ½æ˜¾å¼çš„å†™å…¥ã€æ¸…ç†æ•°æ®</li>
<li>ä¸èƒ½æŒ‰ç…§ä¸€å®šçš„è§„åˆ™æ·˜æ±°æ•°æ®ï¼Œå¦‚ï¼ˆLRUï¼‰ã€å…ˆè¿›å…ˆå‡ºç®—æ³•ï¼ˆFIFOï¼‰ã€æœ€è¿‘æœ€å°‘ä½¿ç”¨ç®—æ³•ï¼ˆLFUï¼‰ã€éæœ€è¿‘ä½¿ç”¨ç®—æ³•ï¼ˆNMRUï¼‰</li>
</ul>
<p>è€Œæœ¬æ–‡æåˆ°çš„Guava Cacheæœ‰å¦‚ä¸‹çš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li>å½“ç¼“å­˜çš„æ•°æ®å·²ç»è¶…è¿‡é¢„å…ˆè®¾ç½®çš„æœ€å¤§å€¼æ—¶ï¼Œä½¿ç”¨LRUç®—æ³•ç§»é™¤ä¸€äº›æ•°æ®;<br>ç”±äºGuavaCahceæ˜¯åŸºäºJVMçš„ç¼“å­˜æ–¹å¼ï¼Œæ‰€ä»¥å®ƒç¼“å­˜çš„å¤§å°å¯¹äºæˆ‘ä»¬è‡ªå·±åº”ç”¨çš„æœ¬èº«æœ‰å¾ˆå¤§çš„å½±å“ï¼Œæ‰€ä»¥åœ¨å¿…è¦çš„æ—¶å€™éœ€è¦å¯¹å®ƒè¿›è¡Œéƒ¨åˆ†æ§åˆ¶å’Œæ·˜æ±°ï¼Œåœ¨Guavaä¸­é‡‡ç”¨LRUç®—æ³•ã€‚</li>
<li><p>å…·å¤‡æ ¹æ®entryèŠ‚ç‚¹ä¸Šæ¬¡è¢«è®¿é—®æˆ–è€…å†™å…¥çš„æ—¶é—´æ¥è®¡ç®—è¿‡æœŸæœºåˆ¶ï¼›<br>ä¾‹å¦‚åœ¨åˆå§‹åŒ–loadingCacheå¯¹è±¡çš„æ—¶å€™æˆ‘ä»¬å¯ä»¥æŒ‡å®šå†™å…¥çš„èŠ‚ç‚¹ç»è¿‡å¤šé•¿æ—¶é—´æ²¡æœ‰æ›´æ–°æ“ä½œï¼Œå°±ä¼šè¢«æ·˜æ±°ï¼ˆexpireAfterWriteï¼‰</p>
</li>
<li><p>ç¼“å­˜çš„keyè¢«å°è£…åœ¨WeakReferenceå¼•ç”¨å†…;<br>åŒæ ·ä¸ºäº†è®©ç¼“å­˜ä¸ä¼šå½±å“åˆ°è‡ªå·±çš„åº”ç”¨ï¼ŒGuavaå¼•å…¥äº†è½¯ã€å¼±å¼•ç”¨ï¼›å½“ç¼“å­˜å¤ªå¤§ï¼Œæˆ–è€…ç¼“å­˜åœ¨GCçš„æ—¶å€™æ— æ³•è¢«å›æ”¶æ‰ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥ç›´æ¥å°†è¿™éƒ¨åˆ†æ•°æ®å›æ”¶æ‰ã€‚</p>
</li>
<li><p>ç§»é™¤entryèŠ‚ç‚¹ï¼Œå¯ä»¥è§¦å‘ç›‘å¬å™¨é€šçŸ¥äº‹ä»¶ï¼›<br>ä¸€èˆ¬åœ¨Guava Cacheä¸­åˆ é™¤entryå¯¹äºæˆ‘ä»¬æ˜¯é€æ˜çš„ï¼Œä½†æ˜¯Guavaä¸ºæˆ‘ä»¬æä¾›äº†removeLinstenerï¼Œè¿™æ ·æˆ‘ä»¬åœ¨åˆ é™¤entryçš„æ—¶å€™å¯¹æˆ‘ä»¬å¯è§ã€‚</p>
</li>
<li><p>ç»Ÿè®¡ç¼“å­˜ä½¿ç”¨è¿‡ç¨‹ä¸­å‘½ä¸­ç‡/å¼‚å¸¸ç‡/æœªå‘½ä¸­ç‡ç­‰æ•°æ®ã€‚</p>
</li>
</ul>
<p>&emsp;&emsp;&ensp;åŒæ—¶ï¼Œ<em>Guava Cache</em>å’Œ<em>ConcurrentHashMap</em> çš„æ ¸å¿ƒæ•°æ®ç»“æ„ä¸€è‡´ï¼Œå®é™…ä¸ŠGuavaçš„æ ¸å¿ƒç±»LocalCacheå®ç°äº†ConcurrentMapï¼Œæ‰€ä»¥Guava Cache Cacheå’ŒConcurrentHashMapæ˜¯æœ‰<strong>â€œä¸€æ ·çš„è¡€ç»Ÿâ€</strong>ï¼Œä½†æ˜¯åœ¨å…·ä½“åŠŸèƒ½ä¸Šè¿˜æœ‰æœ‰ä¸€äº›åŒºåˆ«ï¼Œ<em>ConcurrentHashMap</em> ä¼šä¸€è‡´ä¿å­˜æ‰€æœ‰æ·»åŠ çš„å…ƒç´ ï¼Œç›´åˆ°æ˜¾å¼çš„ç§»é™¤ï¼Œè€Œ<em>Guava Cache</em>åˆ™åœ¨åˆ›å»ºå¯¹è±¡çš„æ—¶å€™å°±éœ€è¦è®¾ç½®è‡ªåŠ¨å›æ”¶å…ƒç´ çš„æ–¹å¼ã€‚</p>
<h4 id="åˆ†å¸ƒå¼ç¼“å­˜"><a href="#åˆ†å¸ƒå¼ç¼“å­˜" class="headerlink" title="åˆ†å¸ƒå¼ç¼“å­˜"></a>åˆ†å¸ƒå¼ç¼“å­˜</h4><p>ä¸Šé¢çš„å‡ ç§æ”¾ç¼“æ–¹å¼éƒ½åªèƒ½æ˜¯åœ¨å•èŠ‚ç‚¹ä¸­ä½¿ç”¨ï¼Œè€Œå¯¹äºåœ¨åˆ†å¸ƒå¼çš„ç¯å¢ƒä¸‹åˆ™éœ€è¦ä½¿ç”¨<strong>Redisã€Memcached</strong>è¿™æ ·çš„ç¼“å­˜ä¸­é—´ä»¶äº†ã€‚</p>
<h3 id="å¦‚ä½•ä½¿ç”¨Guava-Cache"><a href="#å¦‚ä½•ä½¿ç”¨Guava-Cache" class="headerlink" title="å¦‚ä½•ä½¿ç”¨Guava Cache"></a>å¦‚ä½•ä½¿ç”¨Guava Cache</h3><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦åœ¨pomæ–‡ä»¶åŠ å…¥ç›¸å…³çš„ä¾èµ–</p>
<pre><code><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.google.guava<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>guava<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>21.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">     <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div></pre></td></tr></table></figure>
</code></pre><p>ç„¶åæˆ‘ä»¬å¯ä»¥åˆå§‹åŒ–ä¸€ä¸ªLoadingCacheå¯¹è±¡</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item-0"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"link1.html"</span>&gt;</span>first item<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item-1"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"link2.html"</span>&gt;</span>second item<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item-inactive"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"link3.html"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"bold"</span>&gt;</span>third item<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item-1"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"link4.html"</span>&gt;</span>fourth item<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item-0"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"link5.html"</span>&gt;</span>fifth item<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">     <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line"> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">private LoadingCache&lt;String, String&gt; loadingCache ;</div><div class="line">private void init() throws InterruptedException &#123;</div><div class="line">        loadingCache = CacheBuilder.newBuilder()</div><div class="line">                // è‹¥åœ¨2ç§’ä»¥å†…æ²¡æœ‰è¢«æ›´æ–°å°±ä¼šexpire</div><div class="line">                .expireAfterWrite(2, TimeUnit.SECONDS)</div><div class="line">                //å½“entriesæ¥è¿‘maximumSizeçš„æ—¶å€™å°±ä¼šé©±èµ¶å‡ºä¸€ä¸ªæœ€è¿‘æœ€å°‘ç”¨çš„entry</div><div class="line">                .maximumSize(1000)</div><div class="line">                .build(new CacheLoader&lt;String, String&gt;() &#123;</div><div class="line">                    @Override</div><div class="line">                    public String load(String key) &#123;</div><div class="line">                        return &quot;kobe&quot;;</div><div class="line">                    &#125;</div><div class="line">                &#125;);</div><div class="line">        for (int i = 10; i &lt; 15; i++) &#123;</div><div class="line">            QUEUE.put(&quot;jordan&quot; + i);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">private void testCache() &#123;</div><div class="line">    try &#123;</div><div class="line">        TimeUnit.SECONDS.sleep(3);</div><div class="line">        logger.info(&quot;å½“å‰ç¼“å­˜å€¼ : &#123;&#125;,ç¼“å­˜å¤§å° : &#123;&#125;&quot;, loadingCache.get(KEY), loadingCache.size());</div><div class="line">        loadingCache.get(key);</div><div class="line">    &#125; catch (ExecutionException e ) &#123;</div><div class="line">        logger.error(&quot;Exception&quot;, e);</div><div class="line">    &#125; catch (InterruptedException e) &#123;</div><div class="line">        e.printStackTrace();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸Šè¾¹åˆå§‹åŒ–æ˜¯ç»™å®š2ç§’é’Ÿå†…è‹¥æ²¡æœ‰è¢«æ›´æ–°å°±å¤±æ•ˆï¼Œè€Œæˆ‘ä»¬è°ƒç”¨testCacheæ–¹æ³•ä¸­å…ˆsleepäº†3ç§’ï¼Œæ‰€ä»¥æ­¤æ—¶ç¼“å­˜ä¸­çš„å€¼ä¸€å®šæ˜¯å¤±æ•ˆéƒ½æ¸…é™¤æ‰äº†ã€‚ä¸‹é¢æˆ‘ä»¬å¯ä»¥é€šè¿‡debugä¸€æ­¥ä¸€æ­¥çœ‹çœ‹loadingCache.get(key)è¿™ä¸ªæ–¹æ³•åˆ°åº•æ˜¯æ€æ ·è·å–åˆ°å¯¹åº”çš„å€¼çš„ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function">V <span class="title">get</span><span class="params">(K key, CacheLoader&lt;? <span class="keyword">super</span> K, V&gt; loader)</span> <span class="keyword">throws</span> ExecutionException </span>&#123;</div><div class="line">   <span class="keyword">int</span> hash = hash(checkNotNull(key));</div><div class="line">   <span class="keyword">return</span> segmentFor(hash).get(key, hash, loader);</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
<p>é¦–å…ˆå¯ä»¥çœ‹åˆ°å°†keyå“ˆå¸Œä¸€æ¬¡ï¼Œé€šè¿‡hashå’Œ<strong>segmentShift</strong>ã€<strong>segmentMask</strong>åšä½è¿ç®—å¾—åˆ°å¯¹åº”çš„ä¸‹æ ‡ã€‚åœ¨è¿™ä¸€ç‚¹å’Œ<em>ConcurrentHashMap</em> æ˜¯ä¸€è‡´çš„ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="function">V <span class="title">get</span><span class="params">(K key, <span class="keyword">int</span> hash, CacheLoader&lt;? <span class="keyword">super</span> K, V&gt; loader)</span> <span class="keyword">throws</span> ExecutionException </span>&#123;</div><div class="line">      checkNotNull(key);</div><div class="line">      checkNotNull(loader);</div><div class="line">      <span class="keyword">try</span> &#123;</div><div class="line">        <span class="keyword">if</span> (count != <span class="number">0</span>) &#123; <span class="comment">// read-volatile</span></div><div class="line">          <span class="comment">// don't call getLiveEntry, which would ignore loading values</span></div><div class="line">          ReferenceEntry&lt;K, V&gt; e = getEntry(key, hash);</div><div class="line">          <span class="keyword">if</span> (e != <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="keyword">long</span> now = map.ticker.read();</div><div class="line">            <span class="comment">// è·å–æ²¡æœ‰å¤±æ•ˆã€è¿‡æœŸçš„entry</span></div><div class="line">           V value = getLiveValue(e, now);</div><div class="line">            <span class="keyword">if</span> (value != <span class="keyword">null</span>) &#123;</div><div class="line">              recordRead(e, now);</div><div class="line">              statsCounter.recordHits(<span class="number">1</span>);</div><div class="line">              <span class="keyword">return</span> scheduleRefresh(e, key, hash, value, now, loader);</div><div class="line">            &#125;</div><div class="line">            ValueReference&lt;K, V&gt; valueReference = e.getValueReference();</div><div class="line">            <span class="keyword">if</span> (valueReference.isLoading()) &#123;</div><div class="line">              <span class="keyword">return</span> waitForLoadingValue(e, key, valueReference);</div><div class="line">            &#125;</div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line">       ...</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>åœ¨ä¸Šé¢æ–¹æ³•é‡Œè¾¹æ¯”è¾ƒå…³é”®çš„æ˜¯<em>V value = getLiveValue(e, now);</em>è¿™è¡Œï¼Œå»è·å–ä»ç„¶æœ‰æ•ˆçš„valueï¼Œç»§ç»­è¿½è¸ª</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="function">V <span class="title">getLiveValue</span><span class="params">(ReferenceEntry&lt;K, V&gt; entry, <span class="keyword">long</span> now)</span> </span>&#123;</div><div class="line">      <span class="keyword">if</span> (entry.getKey() == <span class="keyword">null</span>) &#123;</div><div class="line">        tryDrainReferenceQueues();</div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">      &#125;</div><div class="line">      V value = entry.getValueReference().get();</div><div class="line">      <span class="keyword">if</span> (value == <span class="keyword">null</span>) &#123;</div><div class="line">        tryDrainReferenceQueues();</div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">if</span> (map.isExpired(entry, now)) &#123;</div><div class="line">        tryExpireEntries(now);</div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">return</span> value;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>ä»<em>if (map.isExpired(entry, now))</em>è¿™è¡Œå¯ä»¥çœ‹åˆ°æ˜¯å¦è¿‡æœŸæ˜¯é€šè¿‡æ—¶é—´æ¥åˆ¤æ–­çš„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">boolean isExpired(ReferenceEntry&lt;K, V&gt; entry, long now) &#123;</div><div class="line">    checkNotNull(entry);</div><div class="line">    if (expiresAfterAccess() &amp;&amp; (now - entry.getAccessTime() &gt;= expireAfterAccessNanos)) &#123;</div><div class="line">      return true;</div><div class="line">    &#125;</div><div class="line">    if (expiresAfterWrite() &amp;&amp; (now - entry.getWriteTime() &gt;= expireAfterWriteNanos)) &#123;</div><div class="line">      return true;</div><div class="line">    &#125;</div><div class="line">    return false;</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<h3 id="å»ºé€ è€…æ¨¡å¼"><a href="#å»ºé€ è€…æ¨¡å¼" class="headerlink" title="å»ºé€ è€…æ¨¡å¼"></a>å»ºé€ è€…æ¨¡å¼</h3><p>ä¸Šè¾¹æˆ‘ä»¬åœ¨åˆå§‹åŒ–loadingCacheå¯¹è±¡æ—¶ï¼Œè‡ªä¸»é€‰æ‹©æ€§çš„åˆå§‹åŒ–äº†è‡ªå·±çš„å‚æ•°ã€‚é‡‡ç”¨å»ºé€ è€…æ¨¡å¼èµ‹äºˆçš„çµæ´»æ€§å¯¹äºåˆå§‹åŒ–å‚æ•°è¾ƒå¤šã€è‡ªå®šä¹‰ç¨‹åº¦é«˜çš„å¯¹è±¡æ—¶ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚ guava cacheä¸ºæˆ‘ä»¬æä¾›äº†ä¸‹é¢è¿™äº›åˆå§‹åŒ–æ–¹æ³•ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> CacheBuilder&lt;K, V&gt; <span class="title">maximumSize</span><span class="params">(<span class="keyword">long</span> size)</span></span></div><div class="line"><span class="function"><span class="keyword">public</span> CacheBuilder&lt;K, V&gt; <span class="title">initialCapacity</span><span class="params">(<span class="keyword">int</span> initialCapacity)</span></span></div><div class="line"><span class="function"><span class="keyword">public</span> CacheBuilder&lt;K, V&gt; <span class="title">maximumWeight</span><span class="params">(<span class="keyword">long</span> weight)</span></span></div><div class="line"><span class="function"><span class="keyword">public</span> CacheBuilder&lt;K, V&gt; <span class="title">refreshAfterWrite</span><span class="params">(<span class="keyword">long</span> duration, TimeUnit unit)</span></span></div><div class="line"><span class="function">CacheBuilder&lt;K, V&gt; <span class="title">setValueStrength</span><span class="params">(Strength strength)</span></span></div><div class="line"><span class="function"><span class="keyword">public</span> CacheBuilder&lt;K, V&gt; <span class="title">softValues</span><span class="params">()</span></span></div><div class="line"><span class="function">	....</span></div></pre></td></tr></table></figure>
<p>å‚è€ƒï¼š</p>
<p><a href="https://crossoverjie.top/2018/06/13/guava/guava-cache/" target="_blank" rel="external">Guava æºç åˆ†æï¼ˆCache åŸç†ï¼‰</a></p>
<p><a href="https://www.jianshu.com/p/2502e8301ec7" target="_blank" rel="external">guava Cacheæºç åˆ†æï¼ˆäºŒï¼‰</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/01/å¦‚ä½•åœ¨ubuntu16.04ä¸­æ­å»ºredisé›†ç¾¤/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="leonyoung">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://res.cloudinary.com/leon824/image/upload/v1505793001/IMG_3957_uwrsum.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="èŠ±è°¢èŠ±å¼€">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/01/å¦‚ä½•åœ¨ubuntu16.04ä¸­æ­å»ºredisé›†ç¾¤/" itemprop="url">å¦‚ä½•åœ¨ubuntu16.04ä¸­æ­å»ºredisé›†ç¾¤</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">ç™¼è¡¨æ–¼</span>
              
              <time title="å‰µå»ºæ–¼" itemprop="dateCreated datePublished" datetime="2018-04-01T13:22:47+08:00">
                2018-04-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†é¡æ–¼</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ä¸­é—´ä»¶/" itemprop="url" rel="index">
                    <span itemprop="name">ä¸­é—´ä»¶</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="å¦‚ä½•åœ¨ubuntu16-04ä¸­æ­å»ºredisé›†ç¾¤"><a href="#å¦‚ä½•åœ¨ubuntu16-04ä¸­æ­å»ºredisé›†ç¾¤" class="headerlink" title="å¦‚ä½•åœ¨ubuntu16.04ä¸­æ­å»ºredisé›†ç¾¤"></a>å¦‚ä½•åœ¨ubuntu16.04ä¸­æ­å»ºredisé›†ç¾¤</h2><blockquote>
<p>è¦æƒ³æ­å»ºä¸€ä¸ªæœ€ç®€å•çš„Redisé›†ç¾¤ï¼Œé‚£ä¹ˆè‡³å°‘éœ€è¦6ä¸ªèŠ‚ç‚¹ï¼š3ä¸ªMasterå’Œ3ä¸ªSlaveã€‚</p>
<h3 id="åœ¨ubuntu16-04ä¸­å®‰è£…redis"><a href="#åœ¨ubuntu16-04ä¸­å®‰è£…redis" class="headerlink" title="åœ¨ubuntu16.04ä¸­å®‰è£…redis"></a>åœ¨ubuntu16.04ä¸­å®‰è£…redis</h3></blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">//ä¸‹è½½</div><div class="line">axel -n 5 http://download.redis.io/releases/redis-4.0.9.tar.gz</div><div class="line"></div><div class="line">//è§£å‹</div><div class="line">tar -zxvf redis-4.0.9.tar.gz</div><div class="line"></div><div class="line">ç¼–è¯‘</div><div class="line">make</div><div class="line"></div><div class="line">//ä¸ºäº†æ–¹ä¾¿å¯åŠ¨redisï¼Œåœ¨profileä¸­æ·»åŠ PATH</div><div class="line"><span class="meta">#</span>SET REDIS_HOME</div><div class="line">export REDIS_HOME=/opt/local/software/redis-4.0.9</div><div class="line">export PATH=$PATH:$REDIS_HOME/src</div></pre></td></tr></table></figure>
<p>ç„¶åå°è¯•å¯åŠ¨redisæ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸï¼Œè‹¥å‡ºç°ä¸‹é¢çš„å†…å®¹è¯´æ˜å®‰è£…æˆåŠŸã€‚</p>
<p><img src="http://res.cloudinary.com/leon824/image/upload/v1522566992/redis1_cklmlm.png" width="100%" height="100%"></p>
<h3 id="é…ç½®redisé›†ç¾¤"><a href="#é…ç½®redisé›†ç¾¤" class="headerlink" title="é…ç½®redisé›†ç¾¤"></a>é…ç½®redisé›†ç¾¤</h3><p>ç”±äºç”µè„‘é…ç½®æœ‰é™ï¼Œä¸å¤§å¯èƒ½å®‰è£…é‚£ä¹ˆå¤šè™šæ‹Ÿæœºã€‚å¯ä»¥åœ¨ä¸€å°è™šæ‹Ÿæœºä¸­å¼€å¯å¤šä¸ªrediså®ä¾‹ï¼Œå°†è¿™å¤šä¸ªå®ä¾‹ç»„å»ºæˆä¸€ä¸ªredisé›†ç¾¤ã€‚é¦–å…ˆåˆ›å»ºå…­ä¸ªæ–‡ä»¶å¤¹ï¼Œå°†redis-confæ–‡ä»¶copyåˆ°æ¯ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ã€‚</p>
<p><img src="http://res.cloudinary.com/leon824/image/upload/v1522566990/redis2_yejm3q.png" width="100%" height="60%"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">cp ../redis-4.0.9/redis.conf ./8001</div><div class="line">cp ../redis-4.0.9/redis.conf ./8002</div><div class="line">cp ../redis-4.0.9/redis.conf ./8003</div><div class="line">cp ../redis-4.0.9/redis.conf ./8004</div><div class="line">cp ../redis-4.0.9/redis.conf ./8005</div><div class="line">cp ../redis-4.0.9/redis.conf ./8006</div></pre></td></tr></table></figure>
<h4 id="redisé…ç½®æ–‡ä»¶"><a href="#redisé…ç½®æ–‡ä»¶" class="headerlink" title="redisé…ç½®æ–‡ä»¶"></a>redisé…ç½®æ–‡ä»¶</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"># redis æä¾›æœåŠ¡æ—¶ç»‘å®šçš„æœ¬æœºç½‘ç»œåœ°å€ï¼Œå¯ä»¥æ˜¯å¤šä¸ªæ»¡è¶³å¤šå—ç½‘å¡åˆ†åˆ«å¯¹å¤–ç½‘å†…ç½‘çš„è®¿é—®, æŒ‰éœ€è¦æ”¹</div><div class="line">bind 127.0.0.1</div><div class="line"># æä¾›æœåŠ¡çš„ç«¯å£, ä¾›å®¢æˆ·ç«¯è¿æ¥</div><div class="line">port 8001</div><div class="line"># å¯åŠ¨redisæœåŠ¡æ—¶,è¿›ç¨‹pidå­˜å‚¨ä½ç½®</div><div class="line">pidfile /opt/local/software/redis-node/8001/redis.pid</div><div class="line"># redis æ—¥å¿—æ–‡ä»¶æ‰€åœ¨</div><div class="line">logfile &quot;/opt/local/software/redis-node/8001/log.txt&quot;</div><div class="line"># æŒä¹…åŒ–æ–‡ä»¶å­˜å‚¨ç›®å½•</div><div class="line">dir /opt/local/software/redis-node/8001</div><div class="line"># å¼€å¯é›†ç¾¤æ¨¡å¼</div><div class="line">cluster-enabled yes</div><div class="line"># é›†ç¾¤æ¨¡å¼ä¸‹çš„èŠ‚ç‚¹é…ç½®ä¿¡æ¯</div><div class="line">cluster-config-file nodes.conf</div><div class="line"># é›†ç¾¤ä¸­å„èŠ‚ç‚¹é—´è¿æ¥è¶…æ—¶æ—¶é—´</div><div class="line">cluster-node-timeout 5000</div><div class="line"># å…è®¸æ•°æ®æŒä¹…åŒ–è¿½åŠ </div><div class="line">appendonly yes</div></pre></td></tr></table></figure>
<p>ç„¶åæ ¹æ®ä¸Šé¢çš„é…ç½®æ–‡ä»¶å°†æ¯ä¸€ä¸ªrediså®ä¾‹çš„ç«¯å£å·ã€ç›®å½•ã€æ—¥å¿—æ–‡ä»¶ç­‰ç­‰æŒ‰ç…§å…·ä½“çš„æƒ…å†µè®¾ç½®ã€‚</p>
<h4 id="å¯åŠ¨redis"><a href="#å¯åŠ¨redis" class="headerlink" title="å¯åŠ¨redis"></a>å¯åŠ¨redis</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">redis-server 8001/redis.conf</div><div class="line">redis-server 8002/redis.conf</div><div class="line">redis-server 8003/redis.conf</div><div class="line">redis-server 8004/redis.conf</div><div class="line">redis-server 8005/redis.conf</div><div class="line">redis-server 8006/redis.conf</div></pre></td></tr></table></figure>
<p>å¯åŠ¨å®Œæˆä¹‹åå…ˆæŸ¥çœ‹ä¸€ä¸‹å„ä¸ªèŠ‚ç‚¹æ˜¯å¦å¯åŠ¨æˆåŠŸ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">leon at leon_ubuntu in /opt/local/software/redis-node </div><div class="line">$ ps aux | grep redis</div><div class="line">leon      15499  0.0  0.1  50908  5580 pts/19   Sl+  14:22   0:02 redis-server 127.0.0.1:8001 [cluster]</div><div class="line">leon      15506  0.0  0.1  50908  5580 pts/4    Sl+  14:22   0:02 redis-server 127.0.0.1:8002 [cluster]</div><div class="line">leon      15511  0.0  0.1  50908  5536 pts/18   Sl+  14:23   0:02 redis-server 127.0.0.1:8003 [cluster]</div><div class="line">leon      15516  0.0  0.1  50908  5320 pts/21   Sl+  14:23   0:02 redis-server 127.0.0.1:8004 [cluster]</div><div class="line">leon      15521  0.0  0.1  50908  5436 pts/20   Sl+  14:23   0:02 redis-server 127.0.0.1:8005 [cluster]</div><div class="line">leon      15526  0.0  0.1  50908  5464 pts/22   Sl+  14:23   0:02 redis-server 127.0.0.1:8006 [cluster]</div><div class="line">leon      15536  0.0  0.0  14352  2624 pts/23   S+   14:23   0:00 redis-cli -c -p 8001</div><div class="line">leon      15886  0.0  0.0  14224   936 pts/25   S+   15:05   0:00 grep --color=auto --exclude-dir=.bzr --exclude-dir=CVS --exclude-dir=.git --exclude-dir=.hg --exclude-dir=.svn redis</div></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„å‡ ä¸ªèŠ‚ç‚¹éƒ½å·²ç»å¯åŠ¨æˆåŠŸäº†ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ç»„å»ºæˆä¸ºé›†ç¾¤ï¼Œè¦æƒ³ç»„å»ºä¸€ä¸ªé›†ç¾¤è¿˜éœ€è¦ä½¿ç”¨redis-trib.rbå·¥å…·å°†ä¸Šé¢å…­ä¸ªèŠ‚ç‚¹è¿æ¥èµ·æ¥ã€‚ä½†æ˜¯å®ƒéœ€è¦åœ¨rubyçš„ç¯å¢ƒä¸‹è¿è¡Œå¹¶ä¸”åœ¨è¿™ä¸ªç¯å¢ƒä¸‹å®‰è£…å¯¹åº”çš„redisæ’ä»¶ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo gem install redis</div></pre></td></tr></table></figure></p>
<p>å®‰è£…å®Œæˆä¹‹åæ‰§è¡Œä¸‹é¢çš„æŒ‡ä»¤å°†rediså®ä¾‹ç»„å»ºæˆä¸€ä¸ªé›†ç¾¤<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">redis-trib.rb create --replicas 1 127.0.0.1:8001 127.0.0.1:8002 127.0.0.1:8003 127.0.0.1:8004 127.0.0.1:8005 127.0.0.1:8006</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line">leon at leon_ubuntu in /opt/local/software/redis-4.0.9/src </div><div class="line">$ redis-trib.rb create --replicas 1 127.0.0.1:8001 127.0.0.1:8002 127.0.0.1:8003 127.0.0.1:8004 127.0.0.1:8005 127.0.0.1:8006</div><div class="line">&gt;&gt;&gt; Creating cluster</div><div class="line">&gt;&gt;&gt; Performing hash slots allocation on 6 nodes...</div><div class="line">Using 3 masters:</div><div class="line">127.0.0.1:8001</div><div class="line">127.0.0.1:8002</div><div class="line">127.0.0.1:8003</div><div class="line">Adding replica 127.0.0.1:8005 to 127.0.0.1:8001</div><div class="line">Adding replica 127.0.0.1:8006 to 127.0.0.1:8002</div><div class="line">Adding replica 127.0.0.1:8004 to 127.0.0.1:8003</div><div class="line">&gt;&gt;&gt; Trying to optimize slaves allocation for anti-affinity</div><div class="line">[WARNING] Some slaves are in the same host as their master</div><div class="line">M: 1bc512b4d4b5d0c73a72d97e7d70ea307db7ae96 127.0.0.1:8001</div><div class="line">   slots:0-5460 (5461 slots) master</div><div class="line">M: b9b6ff12c2a788a708a5fc754ee6e9add83ef089 127.0.0.1:8002</div><div class="line">   slots:5461-10922 (5462 slots) master</div><div class="line">M: 01742676bd6bb86313c44365df28328a383a007f 127.0.0.1:8003</div><div class="line">   slots:10923-16383 (5461 slots) master</div><div class="line">S: 5d3d629269a52017f0e1fb5d043f5797319aa306 127.0.0.1:8004</div><div class="line">   replicates 1bc512b4d4b5d0c73a72d97e7d70ea307db7ae96</div><div class="line">S: ab65c3dd627b885d60e7f01d69acc7fbd1db50b0 127.0.0.1:8005</div><div class="line">   replicates b9b6ff12c2a788a708a5fc754ee6e9add83ef089</div><div class="line">S: 2487d2d01333914e7d407a7fe89ddfa2f12884a9 127.0.0.1:8006</div><div class="line">   replicates 01742676bd6bb86313c44365df28328a383a007f</div><div class="line">Can I set the above configuration? (type &apos;yes&apos; to accept): yes</div><div class="line">&gt;&gt;&gt; Nodes configuration updated</div><div class="line">&gt;&gt;&gt; Assign a different config epoch to each node</div><div class="line">&gt;&gt;&gt; Sending CLUSTER MEET messages to join the cluster</div><div class="line">Waiting for the cluster to join..</div><div class="line">&gt;&gt;&gt; Performing Cluster Check (using node 127.0.0.1:8001)</div><div class="line">M: 1bc512b4d4b5d0c73a72d97e7d70ea307db7ae96 127.0.0.1:8001</div><div class="line">   slots:0-5460 (5461 slots) master</div><div class="line">   1 additional replica(s)</div><div class="line">M: b9b6ff12c2a788a708a5fc754ee6e9add83ef089 127.0.0.1:8002</div><div class="line">   slots:5461-10922 (5462 slots) master</div><div class="line">   1 additional replica(s)</div><div class="line">S: 2487d2d01333914e7d407a7fe89ddfa2f12884a9 127.0.0.1:8006</div><div class="line">   slots: (0 slots) slave</div><div class="line">   replicates 01742676bd6bb86313c44365df28328a383a007f</div><div class="line">S: 5d3d629269a52017f0e1fb5d043f5797319aa306 127.0.0.1:8004</div><div class="line">   slots: (0 slots) slave</div><div class="line">   replicates 1bc512b4d4b5d0c73a72d97e7d70ea307db7ae96</div><div class="line">M: 01742676bd6bb86313c44365df28328a383a007f 127.0.0.1:8003</div><div class="line">   slots:10923-16383 (5461 slots) master</div><div class="line">   1 additional replica(s)</div><div class="line">S: ab65c3dd627b885d60e7f01d69acc7fbd1db50b0 127.0.0.1:8005</div><div class="line">   slots: (0 slots) slave</div><div class="line">   replicates b9b6ff12c2a788a708a5fc754ee6e9add83ef089</div><div class="line">[OK] All nodes agree about slots configuration.</div><div class="line">&gt;&gt;&gt; Check for open slots...</div><div class="line">&gt;&gt;&gt; Check slots coverage...</div><div class="line">[OK] All 16384 slots covered.</div></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„æ—¥å¿—æ‰“å°çœ‹å‡ºå·²ç»æˆåŠŸå°†6ä¸ªèŠ‚ç‚¹å…¨éƒ¨ç»„å»ºæˆä¸€ä¸ªredisé›†ç¾¤äº†ï¼ŒåŒæ—¶å°†[8001,8002,8003]ä½œä¸ºmasterï¼Œ[8004ï¼Œ8005ï¼Œ8006]ä¸ºå‰é¢ä¸‰ä¸ªçš„å¤åˆ¶èŠ‚ç‚¹ã€‚</p>
<p>è‡³æ­¤redisé›†ç¾¤æ­å»ºå®Œæˆã€‚</p>
<p>å‚è€ƒï¼š</p>
<p><a href="https://www.jianshu.com/p/0dc64585a2a9" target="_blank" rel="external">ubuntuå®‰è£…redisé›†ç¾¤
</a></p>
<p><a href="https://www.howtoing.com/how-to-configure-a-redis-cluster-on-ubuntu-14-04" target="_blank" rel="external">å¦‚ä½•åœ¨Ubuntu 14.04é…ç½®çš„Redisé›†ç¾¤</a></p>
<p><a href="https://www.linuxidc.com/Linux/2017-03/141683.htm" target="_blank" rel="external">Linuxä¸‹Redisé›†ç¾¤å®‰è£…éƒ¨ç½²åŠä½¿ç”¨è¯¦è§£</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/17/æµ…æjavaè¯­è¨€ä¸­é”æœºåˆ¶/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="leonyoung">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://res.cloudinary.com/leon824/image/upload/v1505793001/IMG_3957_uwrsum.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="èŠ±è°¢èŠ±å¼€">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/17/æµ…æjavaè¯­è¨€ä¸­é”æœºåˆ¶/" itemprop="url">æµ…æjavaè¯­è¨€ä¸­é”æœºåˆ¶</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">ç™¼è¡¨æ–¼</span>
              
              <time title="å‰µå»ºæ–¼" itemprop="dateCreated datePublished" datetime="2018-03-17T15:24:47+08:00">
                2018-03-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†é¡æ–¼</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="æµ…æjavaè¯­è¨€ä¸­é”æœºåˆ¶"><a href="#æµ…æjavaè¯­è¨€ä¸­é”æœºåˆ¶" class="headerlink" title="æµ…æjavaè¯­è¨€ä¸­é”æœºåˆ¶"></a>æµ…æjavaè¯­è¨€ä¸­é”æœºåˆ¶</h1><blockquote>
<p>&emsp;&emsp;å¤šä»»åŠ¡å¹¶å‘å·²ç»æ˜¯è®¡ç®—æœºä¸­ä¸å¯ç¼ºå°‘çš„ä¸€éƒ¨åˆ†äº†ï¼Œå¾ˆå¤šæ—¶å€™è®©è®¡ç®—æœºåŒä¸€æ—¶åˆ»åšå‡ ä»¶äº‹ï¼Œä¸ä»…ä»…æ˜¯å› ä¸ºè¿ç®—èƒ½åŠ›æé«˜äº†ï¼Œè¿˜æœ‰ä¸€ä¸ªé‡è¦åŸå› å°±æ˜¯cpuçš„è¿ç®—é€Ÿåº¦å’Œå­˜å‚¨ã€é€šä¿¡å­ç³»ç»Ÿé€Ÿåº¦å·®å¼‚å¤ªå¤§ã€‚æ‰€ä»¥ä¸å¾—ä¸â€œå‹æ¦¨â€è¿ç®—èƒ½åŠ›ã€‚<br> è€Œå‹æ¦¨è¿ç®—èƒ½åŠ›å°±ä¸å¾—ä¸ç”¨åˆ°å¤šçº¿ç¨‹ï¼Œåœ¨å•çº¿ç¨‹çš„æƒ…å†µä¸‹è¿ç®—ç¯å¢ƒè¾ƒä¸ºç®€å•ï¼Œè€Œåˆ°äº†å¤šçº¿ç¨‹æƒ…å†µä¸‹åˆ™ä¼šäº§ç”Ÿå¾ˆå¤šæ„æƒ³ä¸åˆ°çš„ç»“æœã€‚è¦ä¿è¯åœ¨å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹å„ä¸ªçº¿ç¨‹â€œç›¸å®‰æ— äº‹â€çš„è¿è¡Œï¼Œåˆ™å¿…é¡»ç”¨åˆ°é”æœºåˆ¶ã€‚</p>
</blockquote>
<h2 id="javaå†…å­˜æ¨¡å‹"><a href="#javaå†…å­˜æ¨¡å‹" class="headerlink" title="javaå†…å­˜æ¨¡å‹"></a>javaå†…å­˜æ¨¡å‹</h2><p>åœ¨è®²é”æœºåˆ¶ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»å…ˆäº†è§£jvmçš„å†…å­˜æ¨¡å‹ã€‚ æ¨¡å‹å›¾å¦‚ä¸‹</p>
<p><img src="http://res.cloudinary.com/leon824/image/upload/v1517238864/jvmModel_umknx3.png" width="90%" height="90%"></p>
<p>&emsp;&emsp; javaçº¿ç¨‹è¯»å†™æ•°æ®æ˜¯ç›´æ¥è¯»å†™å·¥ä½œå†…å­˜ä¸­çš„æ•°æ®ï¼Œå·¥ä½œå†…å­˜å¯èƒ½å¹¶éæ˜¯ç‰©ç†å†…å­˜ï¼Œä¸ºäº†æ€§èƒ½å¾ˆå¤§å¯èƒ½æ˜¯é«˜é€Ÿç¼“å­˜å’Œå¯„å­˜å™¨ã€‚çº¿ç¨‹é—´é€šä¿¡å¿…é¡»é€šè¿‡å†…å†…å­˜æ¥å®ç°ã€‚å‡è®¾åˆå§‹å€¼x = 0ï¼Œ ç„¶åçº¿ç¨‹Aå°†xå€¼ä¿®æ”¹ä¸º1ï¼Œ é‚£ä¹ˆBè¦çŸ¥é“æ­¤æ—¶Aä¿®æ”¹è¿‡åçš„å€¼å°±å¿…é¡»æ˜¯Açº¿ç¨‹å…ˆå°†å€¼ä»å·¥ä½œå†…å­˜ä¸­å†™å…¥åˆ°ä¸»å†…å­˜ï¼Œç„¶åçº¿ç¨‹Bå†ä»ä¸»å†…å­˜ä¸­è¯»å–xçš„å€¼ï¼Œå¦‚æ­¤å®Œæˆçº¿ç¨‹é—´çš„é€šä¿¡â€“å…±äº«å†…å­˜çš„æ–¹å¼ã€‚</p>
<p>JVMå†…å­˜æ¨¡å‹å›´ç»•ä¸‰ä¸ªç‚¹è¿›è¡Œï¼š åŸå­æ€§ã€å¯è§æ€§ã€æœ‰åºæ€§ã€‚</p>
<p>åŸå­æ€§ï¼šä¸å¯åˆ†å‰²ï¼Œjavaä¸­çš„åŸºæœ¬ç±»å‹çš„è¯»å†™åŸºæœ¬å¯ä»¥è®¤ä¸ºæ˜¯åŸå­æ“ä½œï¼Œå¦‚æœè¦åœ¨æ›´å¤§èŒƒå›´å†…ä¿è¯åŸå­æ€§ï¼Œå¯ä»¥æ˜¯ç”¨synchronizedæ¥ä¿è¯åŸå­æ€§ã€‚</p>
<p>å¯è§æ€§ï¼šå½“ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹å…±äº«å˜é‡çš„å€¼ï¼Œå…¶ä»–çº¿ç¨‹èƒ½å¤Ÿç«‹å³å¾—çŸ¥è¿™ä¸ªå˜åŒ–ã€‚volatileã€synchronizedã€finaléƒ½èƒ½å¤Ÿä¿è¯å†…å­˜å¯è§æ€§ã€‚volatileèƒ½å¤Ÿä¿è¯ä¸€ä¸ªè¢«ä¿®æ”¹ä¹‹åç«‹å³åŒæ­¥åˆ°ä¸»å†…å­˜ä¸­ï¼Œç„¶åå…¶ä»–çº¿ç¨‹ä½¿ç”¨åˆ°è¢«volatileä¿®é¥°çš„å˜é‡æ—¶ï¼Œå¿…é¡»å…ˆä»ä¸»å†…å­˜ä¸­åŒæ­¥åˆ°å·¥ä½œå†…å­˜ä¸­ã€‚synchronizedä¿è¯å¯è§æ€§æ˜¯ä¸€ä¸ªçº¿ç¨‹unlockæ—¶ï¼Œå¿…é¡»å°†ä¿®æ”¹çš„å€¼åŒæ­¥åˆ°ä¸»å†…å­˜ä¸­ï¼Œä¸‹ä¸€ä¸ªè·å–åˆ°lockçš„çº¿ç¨‹å¿…é¡»å…ˆåŒæ­¥ä¸»å†…å­˜æ•°æ®ï¼Œä»è€Œä¿è¯å¯è§æ€§ã€‚</p>
<p>æœ‰åºæ€§ï¼šå¦‚æœåœ¨æœ¬çº¿ç¨‹å†…è§‚å¯Ÿï¼Œæ‰€æœ‰æ“ä½œéƒ½æ˜¯æœ‰åºçš„ï¼›å¦‚æœåœ¨å¦å¤–ä¸€ä¸ªçº¿ç¨‹ä¸­è§‚å¯Ÿå¦ä¸€ä¸ªçº¿ç¨‹ï¼Œæ‰€æœ‰æ“ä½œéƒ½æ˜¯æ— åºçš„ã€‚ å‰é¢åŠå¥æ„æ€æ˜¯åœ¨åŒä¸€ä¸ªçº¿ç¨‹å†…è¡¨ç°ä¸ºä¸²è¡Œçš„è¯­ä¹‰ï¼ŒååŠå¥æ˜¯â€œæŒ‡ä»¤é‡æ’åºâ€ç°è±¡å’Œâ€œå·¥ä½œå†…å­˜ä¸ä¸»å†…å­˜ä¹‹é—´å»¶è¿Ÿâ€ç°è±¡ã€‚</p>
<p>å…ˆè¡Œå‘ç”Ÿï¼šæŒ‡çš„æ˜¯å¦‚æœAå…ˆè¡Œå‘ç”ŸäºBï¼Œé‚£ä¹ˆæ“ä½œAçš„å½±å“èƒ½å¤Ÿè¢«æ“ä½œBè§‚å¯Ÿåˆ°ï¼Œâ€œå½±å“â€åŒ…æ‹¬ä¿®æ”¹äº†å…±äº«å†…å­˜å˜é‡çš„å€¼ã€å‘é€çš„æ¶ˆæ¯ã€è°ƒç”¨æ–¹æ³•ç­‰ã€‚ç”±äºä¼˜åŒ–é‡æ’åºçš„åŸå› ï¼Œæ“ä½œä¹‹é—´çš„æ—¶é—´ä¸Šå…ˆåæ‰§è¡Œå’Œâ€œå…ˆè¡Œå‘ç”Ÿâ€å¹¶æ²¡æœ‰å…³ç³»ã€‚</p>
<h2 id="volatile"><a href="#volatile" class="headerlink" title="volatile"></a>volatile</h2><p>  éœ€è¦æ³¨æ„çš„æ˜¯volatileå¹¶ä¸æ˜¯é”ï¼Œå®ƒæ˜¯jvmæä¾›çš„æœ€è½»é‡çº§çš„åŒæ­¥æœºåˆ¶ã€‚å¤§å¤šæ•°äººå¯¹volatileçš„åŸç†å’Œä½¿ç”¨å¹¶ä¸æ¸…æ¥šã€‚volatileä¸»è¦å…·å¤‡ä¸¤ä¸ªç‰¹æ€§ï¼š</p>
<ul>
<li>ä¿è¯å†…å­˜å¯è§æ€§</li>
<li>ç¦æ­¢æŒ‡ä»¤é‡æ’åº </li>
</ul>
<h3 id="å†…å­˜å¯è§æ€§"><a href="#å†…å­˜å¯è§æ€§" class="headerlink" title="å†…å­˜å¯è§æ€§"></a>å†…å­˜å¯è§æ€§</h3><p>&emsp;&emsp; è¢«volatileä¿®é¥°çš„å˜é‡ï¼Œè¢«çº¿ç¨‹ä¿®æ”¹ä¹‹åä¼šç«‹å³ä»å·¥ä½œå†…å­˜ä¸­åŒæ­¥åˆ°ä¸»å†…å­˜ä¸­ï¼Œçº¿ç¨‹è‹¥è¦è¯»è¢«volatileä¿®é¥°çš„å˜é‡åˆ™å¿…é¡»å…ˆä»ä¸»å†…å­˜ä¸­åŒæ­¥æœ€æ–°çš„å€¼ï¼Œè¿™æ ·å°±ä¿è¯äº†çº¿ç¨‹ä¹‹é—´å˜é‡çš„åŒæ­¥ã€‚ä½†æ˜¯çº¿ç¨‹ä¹‹é—´å˜é‡çš„å€¼å¹¶éç«‹å³åŒæ­¥çš„ï¼Œå„ä¸ªçº¿ç¨‹ä¹‹é—´çš„å€¼å¯èƒ½å­˜åœ¨ä¸ä¸€è‡´çš„æƒ…å†µï¼Œä½†æ˜¯ç”±äºæ¯ä¸€æ¬¡è¯»çš„æ—¶å€™éƒ½ä»ä¸»å†…å­˜ä¸­æ›´æ–°ï¼Œå› æ­¤ä¹Ÿä¸è®¤ä¸ºå­˜æœ‰ä¸ä¸€è‡´çš„æƒ…å†µã€‚</p>
<p>ä½†æ˜¯ç”±äºvolatileåªèƒ½ä¿è¯å¯è§æ€§ï¼Œå¹¶ä¸ä¿è¯åŸå­æ€§ï¼Œæ‰€ä»¥åœ¨ä¸ç¬¦åˆä¸‹é¢çš„ä¸¤ç§æƒ…å†µè¿˜æ˜¯éœ€è¦é€šè¿‡<strong>åŠ é”</strong>æ¥ä¿è¯åŸå­æ€§ã€‚</p>
<ul>
<li><p>è¿ç®—ç»“æœå¹¶ä¸ä¾èµ–å½“å‰å€¼</p>
<p>  ä¾‹å¦‚ï¼š a++ ã€ b += 3</p>
</li>
<li><p>å˜é‡ä¸éœ€è¦å‚åŠ å…¶ä»–çŠ¶æ€å˜é‡å…±åŒå‚ä¸ä¸å˜çº¦æŸã€‚</p>
<p>   ä¾‹å¦‚ï¼š low &lt; up</p>
</li>
</ul>
<h3 id="ç¦æ­¢æŒ‡ä»¤é‡æ’åº"><a href="#ç¦æ­¢æŒ‡ä»¤é‡æ’åº" class="headerlink" title="ç¦æ­¢æŒ‡ä»¤é‡æ’åº"></a>ç¦æ­¢æŒ‡ä»¤é‡æ’åº</h3><p> &emsp;&emsp; ç°ä»£cpuä¸ºäº†æé«˜æ‰§è¡Œæ•ˆç‡ï¼Œä¸€ä¸ªæŒ‡ä»¤çš„æ‰§è¡Œè¢«åˆ†æˆï¼šå–æŒ‡ã€è¯‘ç ã€è®¿å­˜ã€æ‰§è¡Œã€å†™å›ã€ç­‰è‹¥å¹²ä¸ªé˜¶æ®µã€‚ç„¶åï¼Œå¤šæ¡æŒ‡ä»¤å¯ä»¥åŒæ—¶å­˜åœ¨äºæµæ°´çº¿ä¸­ï¼ŒåŒæ—¶è¢«æ‰§è¡Œã€‚ä½†æ˜¯æ— è®ºæ€æ ·é‡æ’åºå¿…é¡»è¦æ»¡è¶³as-if-serialè¯­ä¹‰ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨å•çº¿ç¨‹çš„æƒ…å†µä¸‹ç¼–ç¨‹å¹¶ä¸éœ€è¦è€ƒè™‘ä»£ç æ‰§è¡Œé¡ºåºçš„é—®é¢˜ï¼Œå› ä¸ºæ— è®ºæ€æ ·æ’åºï¼Œæœ€åæ‰§è¡Œçš„ç»“æœæ€»æ˜¯å’Œé¡ºåºæ‰§è¡Œçš„ç»“æœä¸€è‡´ã€‚</p>
<p>&emsp;&emsp; ç¦æ­¢é‡æ’åºæ—¶å€™é€šè¿‡å†…å­˜å±éšœæ¥å®ç°çš„ï¼Œå³æ˜¯è¯´é‡æ’åºæ—¶ä¸èƒ½è®²åé¢çš„æŒ‡ä»¤é‡æ’åºåˆ°å†…å­˜å±éšœä¹‹å‰çš„ä½ç½®ã€‚è‹¥åªæœ‰ä¸€ä¸ªcpuè®¿é—®å†…å­˜æ—¶å¹¶ä¸éœ€è¦å†…å­˜å±éšœï¼Œè‹¥å¤šä¸ªcpuè®¿é—®å†…å­˜æ—¶ï¼Œå¹¶ä¸”ä¸€ä¸ªæ­£åœ¨è§‚å¯Ÿå¦å¤–ä¸€ä¸ªæ—¶ï¼Œå°±éœ€è¦å†…å­˜å±éšœæ¥ä¿è¯ä¸€è‡´æ€§ã€‚</p>
<p> &emsp;&emsp; ä¸‹é¢æ‘˜è‡ªã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹ï¼š<br>  â€œè§‚å¯ŸåŠ å…¥volatileå…³é”®å­—å’Œæ²¡æœ‰åŠ å…¥volatileå…³é”®å­—æ—¶æ‰€ç”Ÿæˆçš„æ±‡ç¼–ä»£ç å‘ç°ï¼ŒåŠ å…¥volatileå…³é”®å­—æ—¶ï¼Œä¼šå¤šå‡ºä¸€ä¸ªlockå‰ç¼€æŒ‡ä»¤â€<br>lockå‰ç¼€æŒ‡ä»¤å®é™…ä¸Šç›¸å½“äºä¸€ä¸ªå†…å­˜å±éšœï¼ˆä¹Ÿæˆå†…å­˜æ …æ ï¼‰ï¼Œå†…å­˜å±éšœä¼šæä¾›3ä¸ªåŠŸèƒ½ï¼š</p>
<ul>
<li><p>1ã€å®ƒç¡®ä¿æŒ‡ä»¤é‡æ’åºæ—¶ä¸ä¼šæŠŠå…¶åé¢çš„æŒ‡ä»¤æ’åˆ°å†…å­˜å±éšœä¹‹å‰çš„ä½ç½®ï¼Œä¹Ÿä¸ä¼šæŠŠå‰é¢çš„æŒ‡ä»¤æ’åˆ°å†…å­˜å±éšœçš„åé¢ï¼›å³åœ¨æ‰§è¡Œåˆ°å†…å­˜å±éšœè¿™å¥æŒ‡ä»¤æ—¶ï¼Œåœ¨å®ƒå‰é¢çš„æ“ä½œå·²ç»å…¨éƒ¨å®Œæˆï¼›</p>
</li>
<li><p>2ï¼‰å®ƒä¼šå¼ºåˆ¶å°†å¯¹ç¼“å­˜çš„ä¿®æ”¹æ“ä½œç«‹å³å†™å…¥ä¸»å­˜ï¼›</p>
</li>
<li><p>3ï¼‰å¦‚æœæ˜¯å†™æ“ä½œï¼Œå®ƒä¼šå¯¼è‡´å…¶ä»–CPUä¸­å¯¹åº”çš„ç¼“å­˜è¡Œæ— æ•ˆã€‚</p>
</li>
</ul>
<h2 id="synchronized"><a href="#synchronized" class="headerlink" title="synchronized"></a>synchronized</h2><blockquote>
<p>synchronizedæ˜¯æˆ‘ä»¬æœ€å¸¸ä½¿ç”¨çš„åŠ é”æ–¹å¼ï¼Œä¹Ÿæ˜¯å®˜æ–¹æ¨èçš„æ–¹å¼ã€‚</p>
</blockquote>
<p>&emsp;&emsp; synchronizedæœ€å¸¸ç”¨çš„äº’æ–¥æœ‰æ®µï¼Œsynchronizedç»è¿‡ç¼–è¯‘ä¹‹åï¼Œä¼šåœ¨åŒæ­¥å—å‰ååˆ†åˆ«å½¢æˆmonitorenterå’Œmonitorexitä¸¤ä¸ªå­—èŠ‚ç æŒ‡ä»¤ã€‚è¿™ä¸¤ä¸ªæŒ‡ä»¤éƒ½éœ€è¦æ˜ç¡®æŒ‡å®šä¸€ä¸ªå¼•ç”¨ç±»å‹çš„å¯¹è±¡å‚æ•°æ¥ç¡®å®šéœ€è¦é”å®šå’Œè§£é”çš„å¯¹è±¡ã€‚</p>
<p>&emsp;&emsp; æ ¹æ®è™šæ‹Ÿæœºçš„è§„èŒƒè¦æ±‚ï¼Œåœ¨æ‰§è¡Œ<em>monitorenter</em>æŒ‡ä»¤æ—¶ï¼Œé¦–å…ˆè¦å°è¯•è·å–å¯¹è±¡çš„é”ï¼Œå¦‚æœå¯¹è±¡æ²¡æœ‰è¢«é”å®šï¼Œæˆ–è€…å½“å‰çº¿ç¨‹å·²ç»æ‹¥æœ‰é‚£ä¸ªå¯¹è±¡çš„é”ï¼ŒæŠŠé”çš„è®¡æ•°å™¨åŠ 1ï¼Œç›¸åº”çš„ï¼Œå¦‚æœæ‰§è¡Œ<em>monitorexit</em>æŒ‡ä»¤å°±ä¼šå°†é”è®¡æ•°å™¨å‡1ï¼Œå½“è®¡æ•°å™¨ä¸º0æ—¶ï¼Œé”å°±è¢«é‡Šæ”¾ã€‚å¦‚æœè·å–å¯¹è±¡é”å¤±è´¥ï¼Œé‚£ä¹ˆå½“å‰çº¿ç¨‹å°±è¦ä¸€ç›´é˜»å¡ç­‰å¾…ï¼Œç›´åˆ°å¯¹è±¡é”è¢«å¦å¤–ä¸€ä¸ªçº¿ç¨‹é‡Šæ”¾ä¸ºæ­¢ã€‚åŒæ—¶Synchronizedé”æ˜¯å¯é‡å…¥çš„ï¼Œå‡è®¾å¯¹è±¡personæœ‰ä¸¤ä¸ªè¢«Synchronizedä¿®é¥°çš„åŒæ­¥æ–¹æ³•Mã€Nï¼Œå½“çº¿ç¨‹æ‰§è¡Œå®ŒMä¹‹åè¿˜å¯ä»¥æ¥ç€æ‰§è¡ŒNï¼Œæ‰€ä»¥è¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šé¿å…äº†æ­»é”ï¼Œ</p>
<p>å¦‚ä½•ä¿è¯å¯è§æ€§ï¼Ÿ</p>
<p>&emsp;&emsp; å½“ä¸€ä¸ªçº¿ç¨‹é‡Šæ”¾é”çš„æ—¶å€™ï¼Œå°†è‡ªå·±ä¿®æ”¹çš„æ•°æ®ä»å·¥ä½œå†…å­˜æ›´æ–°åˆ°ä¸»å†…å­˜ä¸­ï¼Œè·å–é”é‚£ä¸ªçº¿ç¨‹ä¹Ÿä¼šå…ˆå°†ä¸»å†…å­˜ä¸­çš„æ•°æ®åŒæ­¥åˆ°ä¸»æœºçš„å·¥ä½œå†…å­˜ä¸­ï¼Œå¦‚æ­¤å°±ä¿è¯äº†<strong>å†…å­˜å¯è§æ€§</strong>ã€‚</p>
<h2 id="ReentrantLock"><a href="#ReentrantLock" class="headerlink" title="ReentrantLock"></a>ReentrantLock</h2><blockquote>
<p> ReentrantLock ç±»å®ç°äº† Lockï¼Œå®ƒæ‹¥æœ‰ä¸ synchronized ç›¸åŒçš„å¹¶å‘æ€§å’Œå†…å­˜è¯­ä¹‰ï¼Œä½†æ˜¯æ·»åŠ äº†ç±»ä¼¼å…¬å¹³é”ã€è½®è¯¢é”ã€å®šæ—¶é”ç­‰å€™å’Œå¯ä¸­æ–­é”ç­‰å€™çš„ä¸€äº›ç‰¹æ€§ã€‚æ­¤å¤–ï¼Œå®ƒè¿˜æä¾›äº†åœ¨æ¿€çƒˆäº‰ç”¨æƒ…å†µä¸‹æ›´ä½³çš„æ€§èƒ½ã€‚</p>
</blockquote>
<p>&emsp;&emsp; ä½†ç›¸æ¯”synchronizedé”æ¥è¯´ï¼ŒLocké”ä½¿ç”¨éœ€è¦æ‰‹åŠ¨è·å–ã€æ‰‹åŠ¨é‡Šæ”¾ã€‚æˆ‘ä»¬åœ¨åˆ›å»ºLockå®ä¾‹çš„æ—¶å€™å¯ä»¥æŒ‡å®šä½¿ç”¨å…¬å¹³é”è¿˜æ˜¯éå…¬å¹³é”ï¼Œéå…¬å¹³é”æ€§èƒ½ä¼šæ›´å¥½ä¸€ä¸‹(å…¬å¹³é”éœ€è¦ç»´æŠ¤å…¬å¹³æ‰€éœ€è¦çš„è®°è´¦å’ŒåŒæ­¥)ï¼Œæ‰€ä»¥æˆ‘ä»¬é€šå¸¸æ—¶å€™æ—¶éƒ½æ˜¯ç”¨éå…¬å¹³é”ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">ReentrantLock</span><span class="params">(<span class="keyword">boolean</span> fair)</span> </span>&#123;</div><div class="line">       sync = fair ? <span class="keyword">new</span> FairSync() : <span class="keyword">new</span> NonfairSync();</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<p>è¿™é‡ŒFairSyncå’ŒNonfairSyncéƒ½ç»§æ‰¿äº†Syncã€‚è€Œå…¬å¹³é”å’Œéå…¬å¹³é”çš„åŒºåˆ«åœ¨äºè·å–é”çš„æ–¹å¼ã€‚<br>éå…¬å¹³é”ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">final</span> <span class="keyword">void</span> <span class="title">lock</span><span class="params">()</span> </span>&#123;</div><div class="line">				<span class="comment">// å…ˆåˆ¤æ–­æ­¤æ—¶é”æ˜¯å¦æœ‰å…¶ä»–çº¿ç¨‹æŒæœ‰ï¼Œæ²¡æœ‰çš„è¯é€šè¿‡CASæ›´æ–°é”çŠ¶æ€</span></div><div class="line">            <span class="keyword">if</span> (compareAndSetState(<span class="number">0</span>, <span class="number">1</span>)) </div><div class="line">                setExclusiveOwnerThread(Thread.currentThread());</div><div class="line">            <span class="keyword">else</span></div><div class="line">                acquire(<span class="number">1</span>);</div><div class="line">        &#125;</div></pre></td></tr></table></figure>
<h2 id="è‡ªæ—‹é”"><a href="#è‡ªæ—‹é”" class="headerlink" title="è‡ªæ—‹é”"></a>è‡ªæ—‹é”</h2><blockquote>
<p>Javaçš„çº¿ç¨‹æ˜¯æ˜ å°„åˆ°æ“ä½œç³»ç»Ÿçš„åŸç”Ÿçº¿ç¨‹ä¹‹ä¸Šçš„ï¼Œå¦‚æœè¦é˜»å¡æˆ–å”¤é†’ä¸€ä¸ªçº¿ç¨‹ï¼Œéƒ½éœ€è¦æ“ä½œç³»ç»Ÿæ¥å¸®å¿™å®Œæˆï¼Œè¿™å°±éœ€è¦ä»ç”¨æˆ·æ€è½¬æ¢åˆ°æ ¸å¿ƒæ€ä¸­ï¼Œå› æ­¤çŠ¶æ€è£…æ¢éœ€è¦è€—è´¹å¾ˆå¤šçš„å¤„ç†å™¨æ—¶é—´ï¼Œå¯¹äºä»£ç ç®€å•çš„åŒæ­¥å—çŠ¶æ€è½¬æ¢æ¶ˆè€—çš„æ—¶é—´æœ‰å¯èƒ½æ¯”ç”¨æˆ·ä»£ç æ‰§è¡Œçš„æ—¶é—´è¿˜è¦é•¿ã€‚</p>
</blockquote>
<p>&emsp;&emsp; é‚£ä¹ˆå°±å¯ä»¥é‡‡ç”¨è‡ªæ—‹é”çš„æ–¹å¼ï¼Œå‡è®¾è¿™ä¸ªæ—¶å€™æœ‰Açº¿ç¨‹æŒæœ‰é”ï¼ŒBçº¿ç¨‹ç­‰å¾…é”ï¼Œè‹¥æ˜¯Açº¿ç¨‹æŒæœ‰é”çš„æ—¶é—´å¹¶ä¸é•¿ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™Bçº¿ç¨‹ä¸ä¼šè¢«é˜»å¡è€Œæ˜¯é‡‡ç”¨â€œå¿™ç­‰â€çš„æ–¹å¼ç­‰å¾…é”è¢«é‡Šæ”¾ã€‚ä»è€Œé¿å…äº†æ“ä½œç³»ç»Ÿåˆ‡æ¢ç”¨æˆ·æ€ã€å†…æ ¸æ€çš„æ¶ˆè€—ã€‚</p>
<h3 id="å¸¦æ¥çš„é—®é¢˜ï¼š"><a href="#å¸¦æ¥çš„é—®é¢˜ï¼š" class="headerlink" title="å¸¦æ¥çš„é—®é¢˜ï¼š"></a>å¸¦æ¥çš„é—®é¢˜ï¼š</h3><p>1ã€å¯èƒ½å ç”¨å¤ªå¤šcpuèµ„æºï¼š</p>
<p>&emsp;&emsp; è‹¥æ˜¯Açº¿ç¨‹åœ¨çŸ­æ—¶é—´å†…å¹¶ä¸é‡Šæ”¾é”ï¼Œé‚£ä¹ˆè¿™ç§æ–¹å¼å¯èƒ½å ç”¨å¤ªå¤šcpuæ—¶é—´ï¼Œå¯¼è‡´cpuèµ„æºæµªè´¹ã€‚å› æ­¤jvmæœ‰ä¸€ä¸ªé»˜è®¤è‡ªæ—‹æ¬¡æ•°é™åˆ¶ï¼ˆé»˜è®¤æ˜¯10æ¬¡ï¼Œå¯ä»¥ä½¿ç”¨-XX:PreBlockSpinæ¥æ›´æ”¹ï¼‰ï¼Œè‹¥è¿˜æ˜¯æ²¡æœ‰è·å–åˆ°é”ï¼Œé‚£å°±åº”è¯¥ä½¿ç”¨ä¼ ç»Ÿçš„æ–¹å¼å»æŒ‚èµ·çº¿ç¨‹äº†ã€‚</p>
<p>2ã€æ­»é”é—®é¢˜<br> &emsp;&emsp; å‡è®¾æœ‰æœ‰ä¸€ä¸ªçº¿ç¨‹è¿è¡Œåœ¨ä¸€ä¸ªå¤„ç†å™¨ä¸Šï¼Œ è€Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹æƒ³è·å–è¿™ä¸ªå¤„ç†å™¨çš„é”ï¼Œ é‚£ä¹ˆä»–å°†ä¸€ç›´æŒæœ‰è¿™ä¸ªcpuè¿›è¡Œè‡ªæ—‹æ“ä½œï¼Œä½ çš„çº¿ç¨‹ä»£ç åˆ™æ°¸è¿œæ— æ³•è·å¾—æœºä¼šé‡Šæ”¾é”ï¼Œäºæ˜¯é™·å…¥æ­»é”ã€‚</p>
<h3 id="è‡ªé€‚åº”è‡ªæ—‹"><a href="#è‡ªé€‚åº”è‡ªæ—‹" class="headerlink" title="è‡ªé€‚åº”è‡ªæ—‹"></a>è‡ªé€‚åº”è‡ªæ—‹</h3><p>&emsp;&emsp;  åœ¨jdk1.6ä¸­å¼•å…¥äº†è‡ªé€‚åº”çš„è‡ªæ—‹é”ã€‚è‡ªé€‚åº”æ„å‘³ç€è‡ªæ—‹çš„æ—¶é—´ä¸åœ¨å›ºå®šäº†ï¼Œè€Œæ˜¯ç”±å‰ä¸€æ¬¡åœ¨åŒä¸€ä¸ªé”ä¸Šçš„è‡ªæ—‹æ—¶é—´åŠé”çš„æ‹¥æœ‰è€…çš„çŠ¶æ€æ¥å®ç°ã€‚å¦‚æœåœ¨åŒä¸€ä¸ªé”å¯¹è±¡åˆšåˆšæˆåŠŸè·å–åˆ°äº†é”ï¼Œå¹¶ä¸”æŒæœ‰é”çš„çº¿ç¨‹æ­£åœ¨è¿è¡Œä¸­ï¼Œé‚£ä¹ˆjvmä¹…è®¤ä¸ºè¿™æ¬¡ä¹Ÿèƒ½å¤Ÿè·å–æˆåŠŸï¼Œé‚£ä¹ˆä¹…å¯èƒ½å¤šå°è¯•å‡ æ¬¡æ¥è·å–ï¼Œæ¯”æ–¹è¯´50æ¬¡ã€‚è‹¥æ˜¯å¯¹äºæŸä¸€ä¸ªé”ï¼Œè‡ªé€‚åº”é”å¾ˆå°‘æˆåŠŸè¿‡ï¼Œé‚£ä¹ˆjvmå¯èƒ½å°±å¿½ç•¥æ‰è‡ªæ—‹çš„è¿‡ç¨‹è€Œç›´æ¥æŒ‚èµ·ã€‚</p>
<h2 id="é”æ¶ˆé™¤"><a href="#é”æ¶ˆé™¤" class="headerlink" title="é”æ¶ˆé™¤"></a>é”æ¶ˆé™¤</h2><blockquote>
<p>é”æ¶ˆé™¤æ˜¯Javaè™šæ‹Ÿæœºåœ¨JITç¼–è¯‘æ˜¯ï¼Œé€šè¿‡å¯¹è¿è¡Œä¸Šä¸‹æ–‡çš„æ‰«æï¼Œå»é™¤ä¸å¯èƒ½å­˜åœ¨å…±äº«èµ„æºç«äº‰çš„é”ï¼Œé€šè¿‡é”æ¶ˆé™¤ï¼Œå¯ä»¥èŠ‚çœæ¯«æ— æ„ä¹‰çš„è¯·æ±‚é”æ—¶é—´ã€‚</p>
</blockquote>
<p>&emsp;&emsp; åœ¨åŠ¨æ€ç¼–è¯‘åŒæ­¥å—çš„æ—¶å€™ï¼ŒJITç¼–è¯‘å™¨å¯ä»¥å€ŸåŠ©ä¸€ç§è¢«ç§°ä¸ºé€ƒé€¸åˆ†æï¼ˆEscape Analysisï¼‰çš„æŠ€æœ¯æ¥åˆ¤æ–­åŒæ­¥å—æ‰€ä½¿ç”¨çš„é”å¯¹è±¡æ˜¯å¦åªèƒ½å¤Ÿè¢«ä¸€ä¸ªçº¿ç¨‹è®¿é—®è€Œæ²¡æœ‰è¢«å‘å¸ƒåˆ°å…¶ä»–çº¿ç¨‹ã€‚å¦‚æœåŒæ­¥å—æ‰€ä½¿ç”¨çš„é”å¯¹è±¡é€šè¿‡è¿™ç§åˆ†æè¢«è¯å®åªèƒ½å¤Ÿè¢«ä¸€ä¸ªçº¿ç¨‹è®¿é—®ï¼Œé‚£ä¹ˆJITç¼–è¯‘å™¨åœ¨ç¼–è¯‘è¿™ä¸ªåŒæ­¥å—çš„æ—¶å€™å¹¶ä¸ç”Ÿæˆsynchronizedæ‰€è¡¨ç¤ºçš„é”çš„ç”³è¯·ä¸é‡Šæ”¾å¯¹åº”çš„æœºå™¨ç ï¼Œè€Œä»…ç”ŸæˆåŸä¸´ç•ŒåŒºä»£ç å¯¹åº”çš„æœºå™¨ç ï¼Œè¿™å°±é€ æˆäº†è¢«åŠ¨æ€ç¼–è¯‘çš„å­—èŠ‚ç å°±åƒæ˜¯ä¸åŒ…å«monitorenterï¼ˆç”³è¯·é”ï¼‰å’Œmonitorexitï¼ˆé‡Šæ”¾é”ï¼‰è¿™ä¸¤ä¸ªå­—èŠ‚ç æŒ‡ä»¤ä¸€æ ·ï¼Œå³æ¶ˆé™¤äº†é”çš„ä½¿ç”¨ã€‚è¿™ç§ç¼–è¯‘å™¨ä¼˜åŒ–å°±è¢«ç§°ä¸ºé”æ¶ˆé™¤ï¼ˆLock Elisionï¼‰ï¼Œå®ƒä½¿å¾—ç‰¹å®šæƒ…å†µä¸‹æˆ‘ä»¬å¯ä»¥å®Œå…¨æ¶ˆé™¤é”çš„å¼€é”€ã€‚</p>
<p>ç¤ºæ„å›¾ï¼š</p>
<p><img src="http://res.cloudinary.com/leon824/image/upload/v1517466723/jvmsuo_ber7ev.png" width="100%" height="100%"></p>
<h2 id="é”ç²—åŒ–"><a href="#é”ç²—åŒ–" class="headerlink" title="é”ç²—åŒ–"></a>é”ç²—åŒ–</h2><blockquote>
<p>é”ç²—åŒ–ï¼ˆLock Coarsening/Lock Mergingï¼‰æ˜¯JITç¼–è¯‘å™¨å¯¹å†…éƒ¨é”çš„å…·ä½“å®ç°æ‰€åšçš„ä¸€ç§ä¼˜åŒ–ã€‚</p>
</blockquote>
<p>&emsp;&emsp; ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬åŠ é”ä¼šå°½é‡é”ä½æ›´å°çš„ä»£ç å—ï¼Œ è¿™æ ·ä½¿å¾—éœ€è¦åŒæ­¥çš„æ“ä½œæ•°é‡å°½å¯èƒ½å°ï¼Œå¦‚æœå­˜åœ¨ç«äº‰é‚£ä¹ˆä¹Ÿèƒ½å°½å¿«æ‹¿åˆ°é”ã€‚åœ¨é€šå¸¸æƒ…å†µä¸‹è¿™éƒ½æ˜¯æ­£ç¡®çš„ï¼Œä½†æ˜¯å¦‚æœåå¤å¯¹åŒä¸€ä¸ªå¯¹è±¡åŠ é”ï¼Œç”šè‡³åŠ é”æ“ä½œå‡ºç°åœ¨äº†å¾ªç¯ä½“ä¸­ï¼Œé¢‘ç¹çš„è¿›è¡Œäº’æ–¥æ“ä½œä¹Ÿä¼šå¯¼è‡´ä¸å¿…è¦çš„æ€§èƒ½æŸè€—ã€‚<br>å¦‚æœè™šæ‹Ÿæœºæ¢æµ‹åˆ°æœ‰è¿™æ ·çš„æƒ…å†µçš„è¯ï¼Œä¼šæŠŠåŠ é”åŒæ­¥çš„èŒƒå›´æ‰©å±•åˆ°æ•´ä¸ªæ“ä½œåºåˆ—çš„å¤–éƒ¨ï¼Œè¿™æ ·çš„ä¸€ä¸ªé”èŒƒå›´æ‰©å±•çš„æ“ä½œå°±ç§°ä¹‹ä¸ºé”ç²—åŒ–ã€‚</p>
<h2 id="åå‘é”"><a href="#åå‘é”" class="headerlink" title="åå‘é”"></a>åå‘é”</h2><blockquote>
<p>å®ƒçš„ç›®çš„æ˜¯æ¶ˆé™¤æ•°æ®åœ¨æ— ç«äº‰æƒ…å†µä¸‹çš„åŒæ­¥åŸè¯­ï¼Œè¿›ä¸€æ­¥æé«˜ç¨‹åºæ€§èƒ½ã€‚å¦‚æœè¯´è½»é‡çº§é”æ˜¯åœ¨æ— ç«äº‰çš„æƒ…å†µä¸‹ä½¿ç”¨CASæ“ä½œå»æ¶ˆé™¤åŒæ­¥ä½¿ç”¨çš„äº’æ–¥é‡ï¼Œé‚£åå‘é”å°±æ˜¯åœ¨æ— ç«äº‰çš„æƒ…å†µä¸‹æŠŠæ•´ä¸ªåŒæ­¥éƒ½æ¶ˆé™¤æ‰ï¼Œè¿CASéƒ½ä¸åšã€‚</p>
</blockquote>
<p>&emsp;&emsp; åå‘é”ä¼šåå‘äºç¬¬ä¸€ä¸ªè·å¾—å®ƒçš„çº¿ç¨‹ï¼Œå¦‚æœåœ¨æ¥ä¸‹æ¥çš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œè¯¥é”æ²¡æœ‰è¢«å…¶ä»–çš„çº¿ç¨‹è·å–ï¼Œåˆ™æŒæœ‰åå‘é”çš„çº¿ç¨‹å°†æ°¸è¿œä¸éœ€è¦åŒæ­¥ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œé”ä¸ä»…ä¸å­˜åœ¨å¤šçº¿ç¨‹ç«äº‰ï¼Œè€Œä¸”æ€»æ˜¯ç”±åŒä¸€çº¿ç¨‹å¤šæ¬¡è·å¾—ï¼Œä¸ºäº†è®©çº¿ç¨‹è·å¾—é”çš„ä»£ä»·æ›´ä½è€Œå¼•å…¥äº†åå‘é”ã€‚</p>
<p>&emsp;&emsp; å½“é”å¯¹è±¡ç¬¬ä¸€æ¬¡è¢«çº¿ç¨‹è·å–çš„æ—¶å€™ï¼Œçº¿ç¨‹ä½¿ç”¨CASæ“ä½œæŠŠè¿™ä¸ªé”çš„çº¿ç¨‹IDè®°å½•å†å¯¹è±¡Mark Wordä¹‹ä¸­ï¼ŒåŒæ—¶ç½®åå‘æ ‡å¿—ä½1ã€‚ä»¥åè¯¥çº¿ç¨‹åœ¨è¿›å…¥å’Œé€€å‡ºåŒæ­¥å—æ—¶ä¸éœ€è¦è¿›è¡ŒCASæ“ä½œæ¥åŠ é”å’Œè§£é”ï¼Œåªéœ€è¦ç®€å•åœ°æµ‹è¯•ä¸€ä¸‹å¯¹è±¡å¤´çš„Mark Wordé‡Œæ˜¯å¦å­˜å‚¨ç€æŒ‡å‘å½“å‰çº¿ç¨‹çš„åå‘é”ã€‚å¦‚æœæµ‹è¯•æˆåŠŸï¼Œè¡¨ç¤ºçº¿ç¨‹å·²ç»è·å¾—äº†é”</p>
<p>å‚è€ƒï¼š</p>
<p>-ã€Šæ·±å…¥ç†è§£javaè™šæ‹Ÿæœºã€‹</p>
<p><a href="http://blog.csdn.net/u013256816/article/details/51008443" target="_blank" rel="external">http://blog.csdn.net/u013256816/article/details/51008443</a></p>
<p><a href="https://segmentfault.com/a/1190000009828216" target="_blank" rel="external">https://segmentfault.com/a/1190000009828216</a></p>
<p><a href="https://www.jianshu.com/p/dfbe0ebfec95" target="_blank" rel="external">https://www.jianshu.com/p/dfbe0ebfec95</a></p>
<p><a href="http://www.importnew.com/19472.html" target="_blank" rel="external">http://www.importnew.com/19472.html</a></p>
<p><a href="http://traxexer.iteye.com/blog/1846344" target="_blank" rel="external">http://traxexer.iteye.com/blog/1846344</a></p>
<p><a href="http://www.broadview.com.cn/article/789" target="_blank" rel="external">http://www.broadview.com.cn/article/789</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/17/å¦‚ä½•å°†github pagesæ˜ å°„åˆ°è‡ªå·±çš„åŸŸå/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="leonyoung">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://res.cloudinary.com/leon824/image/upload/v1505793001/IMG_3957_uwrsum.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="èŠ±è°¢èŠ±å¼€">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/17/å¦‚ä½•å°†github pagesæ˜ å°„åˆ°è‡ªå·±çš„åŸŸå/" itemprop="url">å¦‚ä½•å°†github pagesæ˜ å°„åˆ°åŸŸåä¸Š</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">ç™¼è¡¨æ–¼</span>
              
              <time title="å‰µå»ºæ–¼" itemprop="dateCreated datePublished" datetime="2018-03-17T10:47:17+08:00">
                2018-03-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†é¡æ–¼</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/åšå®¢/" itemprop="url" rel="index">
                    <span itemprop="name">åšå®¢</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>ä½¿ç”¨github pageså’Œhexoå¯ä»¥è½»æ¾æ­å»ºä¸€ä¸ªå±äºè‡ªå·±çš„åšå®¢ï¼Œä½†æ˜¯è¿™ä¸ªåšå®¢çš„åŸŸåæ˜¯ä¸€ä¸ª<strong>github.io</strong>ç»“å°¾çš„ã€‚çœ‹ç€ä¸çˆ½ï¼Œä¸‹é¢è®²ä¸€ä¸‹å…·ä½“çš„æ­¥éª¤ã€‚å…³äºå¦‚ä½•ä½¿ç”¨github pageså’Œhexoæ­å»ºåšå®¢ï¼Œç½‘ä¸Šæœ‰å¾ˆå¤šï¼Œè¿™é‡Œå°±ä¸ä»‹ç»äº†ã€‚</p>
</blockquote>
<p><strong>å°†username.github.ioè§£æåˆ°è‡ªå·±çš„åŸŸåä¸Šï¼Œé¦–å…ˆéœ€è¦å°†åŸŸåè§£æåˆ°github pagesçš„ipä¸Šï¼Œç„¶ååœ¨githubçš„settingsä¸­æ·»åŠ ä¸€ä¸ªCNAMEæ–‡ä»¶ã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹</strong></p>
<h3 id="æ³¨å†ŒåŸŸå"><a href="#æ³¨å†ŒåŸŸå" class="headerlink" title="æ³¨å†ŒåŸŸå"></a>æ³¨å†ŒåŸŸå</h3><pre><code>å¯ä»¥å»è…¾è®¯äº‘ä¸Šè¾¹ä¹°ä¸€ä¸ªåŸŸåï¼Œä¾¿å®œç‚¹çš„å°±è¡Œã€‚
</code></pre><p><img src="http://res.cloudinary.com/leon824/image/upload/v1521195447/github1_l9ffvx.png" width="100%" height="100%"></p>
<h3 id="è§£æåŸŸå"><a href="#è§£æåŸŸå" class="headerlink" title="è§£æåŸŸå"></a>è§£æåŸŸå</h3><pre><code>åŸŸåå…¶å®å°±æ˜¯ä¸€ä¸ªipçš„é‡å‘½åè€Œå·²ï¼Œæ‰€ä»¥è§£æå°±ç›¸å½“äºå°†åŸŸåç»‘å®šåˆ°ä¸€ä¸ªipï¼Œé‚£ä¹ˆä»¥åæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥ç”¨åŸŸåæ¥è®¿é—®é‚£ä¸ªipå¯¹åº”çš„æœåŠ¡å™¨çš„æœåŠ¡ã€‚

è¿™é‡Œç›´æ¥ä½¿ç”¨è…¾è®¯æä¾›çš„å¿«é€Ÿè§£ææ–¹æ³•,å°†githubæä¾›çš„ä¸¤ä¸ªipä¸­çš„ä¸€ä¸ªåŠ å…¥å°±è¡Œ
</code></pre><ul>
<li>192.30.252.153</li>
<li>192.30.252.154</li>
</ul>
<p><img src="http://res.cloudinary.com/leon824/image/upload/v1521195771/github2_wtaleu.png" width="100%" height="100%"></p>
<h3 id="åˆ›å»ºCNAMEæ–‡ä»¶"><a href="#åˆ›å»ºCNAMEæ–‡ä»¶" class="headerlink" title="åˆ›å»ºCNAMEæ–‡ä»¶"></a>åˆ›å»ºCNAMEæ–‡ä»¶</h3><p>  æˆ‘ä»¬æ‰“å¼€åœ¨githubä¸­çš„åšå®¢ç›®å½•ä¸­çš„settingsï¼Œå¡«å…¥è‡ªå·±çš„åŸŸåï¼Œç„¶åsaveã€‚å°±å¯ä»¥åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸­çœ‹åˆ°ä¸€ä¸ªCNAMEçš„æ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶å°±å·²ç»å¡«å…¥äº†æˆ‘ä»¬çš„åŸŸåï¼Œä½†æ˜¯å½“æˆ‘ä»¬é‡æ–°å‘å¸ƒä¹‹åè¿™ä¸ªCNAMEæ–‡ä»¶ä¼šè¢«è¦†ç›–ï¼Œæ‰€ä»¥éœ€è¦sourceç›®å½•ä¸‹åˆ›å»ºåŒæ ·çš„ä¸€ä¸ªCNAMEçš„æ–‡ä»¶ã€‚</p>
<p>  <img src="http://res.cloudinary.com/leon824/image/upload/v1521270864/github3_nqeg25.png" width="100%" height="100%"></p>
<p> æœ€åè®¿é—®è‡ªå·±çš„åŸŸåï¼Œå°±èƒ½ç›´æ¥è®¿é—®åˆ°åšå®¢äº†ã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/14/å®Œæ•´æè¿°ä¸€æ¬¡URLè®¿é—®åˆ°é¡µé¢åŠ è½½åˆ°åº•éƒ½ç»å†äº†äº›ä»€ä¹ˆ/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="leonyoung">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://res.cloudinary.com/leon824/image/upload/v1505793001/IMG_3957_uwrsum.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="èŠ±è°¢èŠ±å¼€">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/14/å®Œæ•´æè¿°ä¸€æ¬¡URLè®¿é—®åˆ°é¡µé¢åŠ è½½åˆ°åº•éƒ½ç»å†äº†äº›ä»€ä¹ˆ/" itemprop="url">ä»è¾“å…¥URLåˆ°é¡µé¢åŠ è½½å®Œæˆçš„è¿‡ç¨‹ä¸­éƒ½å‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…ï¼Ÿ</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">ç™¼è¡¨æ–¼</span>
              
              <time title="å‰µå»ºæ–¼" itemprop="dateCreated datePublished" datetime="2018-01-14T21:22:47+08:00">
                2018-01-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†é¡æ–¼</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ç½‘ç»œ/" itemprop="url" rel="index">
                    <span itemprop="name">ç½‘ç»œ</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="ä»è¾“å…¥URLåˆ°é¡µé¢åŠ è½½å®Œæˆçš„è¿‡ç¨‹ä¸­éƒ½å‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…ï¼Ÿ"><a href="#ä»è¾“å…¥URLåˆ°é¡µé¢åŠ è½½å®Œæˆçš„è¿‡ç¨‹ä¸­éƒ½å‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…ï¼Ÿ" class="headerlink" title="ä»è¾“å…¥URLåˆ°é¡µé¢åŠ è½½å®Œæˆçš„è¿‡ç¨‹ä¸­éƒ½å‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…ï¼Ÿ"></a>ä»è¾“å…¥URLåˆ°é¡µé¢åŠ è½½å®Œæˆçš„è¿‡ç¨‹ä¸­éƒ½å‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…ï¼Ÿ</h1><blockquote>
<p>&emsp;&emsp;å¹³æ—¶æˆ‘ä»¬æ€»æ˜¯ä¹ æƒ¯äº†è¾“å…¥ä¸€ä¸ªç½‘å€ï¼Œç„¶åå°±é™é™çš„ç­‰å¾…ç€å„ç§æ¼‚äº®çš„ç½‘é¡µå±•ç¤ºåœ¨æˆ‘ä»¬çš„é¢å‰ï¼Œä½†æ˜¯å¯èƒ½å¤§å¤šæ•°äººéƒ½æ²¡æœ‰å…³æ³¨è¿™å…¶ä¸­éƒ½ç»å†äº†å“ªäº›ä»€ä¹ˆã€‚ä¸‹é¢å¤§è‡´åšä¸€ä¸ªæ€»ç»“ã€‚</p>
</blockquote>
<h2 id="ä¸€ã€é¦–å…ˆç®€å•ä»‹ç»ä¸€ä¸‹OSIä¸ƒå±‚æ¨¡å‹ï¼š"><a href="#ä¸€ã€é¦–å…ˆç®€å•ä»‹ç»ä¸€ä¸‹OSIä¸ƒå±‚æ¨¡å‹ï¼š" class="headerlink" title="ä¸€ã€é¦–å…ˆç®€å•ä»‹ç»ä¸€ä¸‹OSIä¸ƒå±‚æ¨¡å‹ï¼š"></a>ä¸€ã€é¦–å…ˆç®€å•ä»‹ç»ä¸€ä¸‹OSIä¸ƒå±‚æ¨¡å‹ï¼š</h2><blockquote>
<p>&emsp;&emsp;å¼€æ”¾å¼ç³»ç»Ÿäº’è”é€šä¿¡å‚è€ƒæ¨¡å‹ï¼ˆè‹±è¯­ï¼šOpen System Interconnection Reference Modelï¼Œç¼©å†™ä¸º OSIï¼‰ï¼Œç®€ç§°ä¸ºOSIæ¨¡å‹ï¼ˆOSI modelï¼‰ï¼Œä¸€ç§æ¦‚å¿µæ¨¡å‹ï¼Œç”±å›½é™…æ ‡å‡†åŒ–ç»„ç»‡ï¼ˆISOï¼‰æå‡ºï¼Œä¸€ä¸ªè¯•å›¾ä½¿å„ç§è®¡ç®—æœºåœ¨ä¸–ç•ŒèŒƒå›´å†…äº’è¿ä¸ºç½‘ç»œçš„æ ‡å‡†æ¡†æ¶ã€‚</p>
</blockquote>
<p><img src="http://res.cloudinary.com/leon824/image/upload/v1516269244/20180118-2_fqphi5.png" alt=""></p>
<p>å…¶ä¸­å„å±‚çš„è¯¦ç»†å†…å®¹å¤§å®¶å¯ä»¥å‚è€ƒ<a href="https://zh.wikipedia.org/wiki/OSI%E6%A8%A1%E5%9E%8B" target="_blank" rel="external">ç»´åŸºç™¾ç§‘</a></p>
<ul>
<li>OSIæ˜¯ä¸€ä¸ªç†æƒ³çš„åˆ†å±‚æ¨¡å‹ï¼Œå¾ˆå°‘æœ‰å®Œå…¨éµå®ˆè¿™æ ·çš„åˆ†å±‚ï¼Œåªä¼šä½¿ç”¨å…¶ä¸­çš„å‡ å±‚è€Œå·²ã€‚</li>
</ul>
<h2 id="äºŒã€ä»è®¿é—®googleè¯´èµ·"><a href="#äºŒã€ä»è®¿é—®googleè¯´èµ·" class="headerlink" title="äºŒã€ä»è®¿é—®googleè¯´èµ·"></a>äºŒã€ä»è®¿é—®googleè¯´èµ·</h2><p><em>è¿™é‡Œå°±ä¸è®¨è®ºæˆ‘ä»¬ä¼Ÿå¤§çš„é˜²ç«é•¿åŸäº†ï¼Œä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜ï¼Œè¿™æ˜¯åŸºæœ¬æŠ€èƒ½</em></p>
<p><img src="http://res.cloudinary.com/leon824/image/upload/v1516268792/20180118-1_lxqlaf.png" alt=""></p>
<p>å½“ä½ å•å‡»å›è½¦é”®ï¼Œå°±æ„å‘³ç€ä½ éœ€è¦å‘googleçš„æœåŠ¡å™¨å‘é€ä¸€æ¬¡ç½‘é¡µè¯·æ±‚çš„æ•°æ®åŒ…ã€‚ä¸‹é¢ä»æ¶‰åŠåˆ°çš„åè®®æˆ–è€…æœåŠ¡è¯´èµ·ã€‚</p>
<h4 id="1ã€DNSåè®®"><a href="#1ã€DNSåè®®" class="headerlink" title="1ã€DNSåè®®"></a>1ã€DNSåè®®</h4><p>&emsp;&emsp;å½“æˆ‘ä»¬è¦è®¿é—®<a href="https://www.google.co.jp/æ—¶ï¼Œå¿…é¡»è¦çŸ¥é“ipåœ°å€ï¼Œä½†è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¹¶ä¸çŸ¥é“ipæ˜¯å¤šå°‘ã€‚DNSæœåŠ¡å°±å¯ä»¥å¸®æˆ‘ä»¬é€šè¿‡åŸŸåæ‰¾åˆ°ipåœ°å€ã€‚å®ƒæ˜¯ä¸€ä¸ªå­˜å‚¨ç€ipå’ŒåŸŸåæ˜ å°„çš„åˆ†å¸ƒå¼æ•°æ®åº“ã€‚GFWå…¶ä¸­å°±æœ‰é€šè¿‡dnsæ±¡æŸ“å’ŒdnsåŠ«æŒçš„æ–¹å¼ä½¿å¾—æˆ‘ä»¬æ— æ³•è®¿é—®åˆ°å›½å¤–çš„æŸäº›â€œfdâ€ç½‘ç«™ã€‚" target="_blank" rel="external">https://www.google.co.jp/æ—¶ï¼Œå¿…é¡»è¦çŸ¥é“ipåœ°å€ï¼Œä½†è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¹¶ä¸çŸ¥é“ipæ˜¯å¤šå°‘ã€‚DNSæœåŠ¡å°±å¯ä»¥å¸®æˆ‘ä»¬é€šè¿‡åŸŸåæ‰¾åˆ°ipåœ°å€ã€‚å®ƒæ˜¯ä¸€ä¸ªå­˜å‚¨ç€ipå’ŒåŸŸåæ˜ å°„çš„åˆ†å¸ƒå¼æ•°æ®åº“ã€‚GFWå…¶ä¸­å°±æœ‰é€šè¿‡dnsæ±¡æŸ“å’ŒdnsåŠ«æŒçš„æ–¹å¼ä½¿å¾—æˆ‘ä»¬æ— æ³•è®¿é—®åˆ°å›½å¤–çš„æŸäº›â€œfdâ€ç½‘ç«™ã€‚</a></p>
<p>  è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œipå’ŒåŸŸåå¹¶éä¸€å¯¹ä¸€çš„å…³ç³»ã€‚è€Œæ˜¯å¤šå¯¹å¤šï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªipå¯ä»¥ç»‘å®šå¤šä¸ªåŸŸåï¼Œä¸€ä¸ªåŸŸåä¹Ÿå¯ä»¥ç»‘å®šå¤šä¸ªipï¼Œä½†åŒä¸€æ—¶åˆ»åªèƒ½æ˜¯ä¸€å¯¹ä¸€çš„ã€‚</p>
<p>okï¼Œç°åœ¨æˆ‘ä»¬æœ‰äº†ipåœ°å€ã€‚</p>
<h4 id="2ã€-å­ç½‘æ©ç "><a href="#2ã€-å­ç½‘æ©ç " class="headerlink" title="2ã€ å­ç½‘æ©ç "></a>2ã€ å­ç½‘æ©ç </h4><p> &emsp;&emsp;å…¨ä¸–ç•Œè¿™ä¹ˆå¤šè®¡ç®—æœºï¼Œå½“ç„¶ä¸å¯èƒ½éƒ½åœ¨åŒä¸€ä¸ªå­ç½‘é‡Œã€‚é‚£è¿™ä¸ªæ—¶å€™å°±éœ€è¦ç¡®è®¤googleæœåŠ¡å™¨å’Œæˆ‘ä»¬æœ¬æœºæ˜¯å¦åœ¨åœ¨åŒä¸€ä¸ªå­ç½‘é‡Œï¼Œè¿™é‡Œç”¨åˆ°äº†å­ç½‘æ©ç ã€‚</p>
<p> &emsp;&emsp;å­ç½‘æ©ç å’Œipåœ°å€ä¸€æ ·ï¼Œéƒ½æ˜¯32ä½çš„äºŒè¿›åˆ¶æ•°ï¼Œé€šå¸¸ç”¨4æ®µå¼è¡¨ç¤ºï¼Œç½‘ç»œä½å…¨ä¸º1ï¼Œä¸»æœºä½å…¨ä¸º0ã€‚å°†æˆ‘ä»¬çš„ç›®æ ‡åœ°å€å’Œæœ¬æœºåœ°å€åˆ†åˆ«ä¸å­ç½‘æ©ç æŒ‰ä½åšandæ“ä½œã€‚å¦‚æœæœ€ç»ˆç»“æœç›¸åŒé‚£ä¹ˆåœ¨åŒä¸€å­ç½‘ä¸­ã€‚ä¸éœ€è¦å°†æ•°æ®åŒ…è½¬å‘åˆ°ç½‘å…³ã€‚å¦åˆ™ï¼Œå°†æ•°æ®åŒ…è½¬å‘åˆ°ç½‘å…³å¤„ç†ã€‚</p>
<p> ä¾‹å¦‚ï¼š</p>
<ul>
<li>DNS: 255.255.255.0</li>
<li>ä¸»æœºipï¼š10.20.0.121</li>
<li><p>googleï¼š216.239.34.10</p>
<p>æ˜æ˜¾ä¸åœ¨åŒä¸€ä¸ªå­ç½‘ä¸­</p>
</li>
</ul>
<h4 id="3ã€http-httpsåè®®"><a href="#3ã€http-httpsåè®®" class="headerlink" title="3ã€http/httpsåè®®"></a>3ã€http/httpsåè®®</h4><p>æµè§ˆå™¨è®¿é—®ç½‘é¡µä½¿ç”¨çš„æ˜¯httpåè®®ï¼Œåœ¨OSIåè®®ä¸­å±äºåº”ç”¨å±‚åè®®ã€‚<br> httpè¯·æ±‚çš„æŠ¥æ–‡æ ¼å¼ï¼š å¤´éƒ¨ï¼ˆrequest line + headerï¼‰ + æ•°æ®ï¼ˆdataï¼‰</p>
<p>å…¶ä¸­çš„è¯·æ±‚è¡Œï¼ˆrequest lineï¼‰åŒ…æ‹¬è¯·æ±‚æ–¹æ³•å­—æ®µã€URLå­—æ®µå’ŒHTTPåè®®çš„ç‰ˆæœ¬ä¸‰ä¸ªå­—æ®µç»„æˆ</p>
<p> GET/index.html HTTP/1.1<br> ç›®å‰å¤§å¤šæ•°HTTPè¯·æ±‚ä½¿ç”¨çš„æ˜¯é•¿è¿æ¥ï¼ˆHTTP/1.1é»˜è®¤keep-aliveä¸ºtrueï¼‰ï¼Œè€Œé•¿è¿æ¥æ„å‘³ç€ï¼Œä¸€ä¸ªTCPçš„socketåœ¨å½“å‰è¯·æ±‚ç»“æŸåï¼Œå¦‚æœæ²¡æœ‰æ–°çš„è¯·æ±‚åˆ°æ¥ï¼Œsocketä¸ä¼šç«‹é©¬é‡Šæ”¾ï¼Œè€Œæ˜¯ç­‰timeoutåå†é‡Šæ”¾ã€‚</p>
<p> è¯·æ±‚æ–¹æ³•å­—æ®µæœ‰ï¼šGETã€POSTã€HEADã€PUTã€DELETEã€TRACE, è¿™äº›å­—æ®µåœ¨REST fulé£æ ¼ä¸­èƒ½å¤Ÿè¢«å……åˆ†åˆ©ç”¨ï¼Œè€Œä¸åœ¨ä½¿ç”¨URLæ¥è¡¨è¾¾ç›®çš„åŠ¨ä½œã€‚</p>
<p>  <img src="http://res.cloudinary.com/leon824/image/upload/v1516271797/20180128-3_fntrcj.png" width="40%" height="40%"></p>
<p> ç±»ä¼¼ä¸‹é¢çš„å†…å®¹ï¼š</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">alt-svc:hq=":443"; ma=2592000; quic=51303431; quic=51303339; quic=51303338; quic=51303337; quic=51303335,quic=":443"; ma=2592000; v="41,39,38,37,35"</div><div class="line">cache-control:private, max-age=0</div><div class="line"><span class="attribute">content-encoding:br</span></div><div class="line">content-type:text/html; charset=UTF-8</div><div class="line">date:Thu, 18 Jan 2018 10:37:50 GMT</div><div class="line"><span class="attribute">expires:-1</span></div><div class="line">p3p:CP="This is not a P3P policy! See g.co/p3phelp for more info."</div><div class="line"><span class="attribute">server:gws</span></div><div class="line">set-cookie:1P_JAR=2018-01-18-10; expires=Sat, 17-Feb-2018 10:37:50 GMT; path=/; domain=.google.co.jp</div><div class="line">set-cookie:NID=*, 20-Jul-2018 10:37:50 GMT; path=/; domain=.google.co.jp; HttpOnly</div><div class="line"><span class="attribute">status:200</span></div><div class="line">strict-transport-security:max-age=3600</div><div class="line"><span class="attribute">x-frame-options:SAMEORIGIN</span></div><div class="line">x-xss-protection:1; mode=block</div><div class="line">Request Headers</div></pre></td></tr></table></figure>
<h4 id="4ã€tcpã€udpåè®®"><a href="#4ã€tcpã€udpåè®®" class="headerlink" title="4ã€tcpã€udpåè®®"></a>4ã€tcpã€udpåè®®</h4><p> tcpåè®®æ˜¯è¾“å…¥ä¼ è¾“å±‚çš„åè®®ï¼Œä¸»è¦ä½œç”¨æ˜¯å»ºç«‹ç«¯å£åˆ°ç«¯å£çš„é€šä¿¡ï¼ŒåŒæ—¶ä¿è¯æ•°æ®çš„æ­£ç¡®ä¼ è¾“å’Œå·®é”™å¤„ç†ã€‚</p>
<p> åŒæ—¶å’ŒtcpåŒå‡ºäºä¼ è¾“å±‚åè®®çš„è¿˜æœ‰udpï¼ˆç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼‰ï¼Œè¿™ä¸ªåè®®æ¯”è¾ƒç®€å•ï¼Œä¸ä¿è¯æ•°æ®çš„å¯é æ€§ï¼Œæ•°æ®ä¸€æ—¦å‘å‡ºæ— æ³•çŸ¥é“å¯¹æ–¹æ˜¯å¦æ”¶åˆ°ã€‚ä½†æ˜¯ä¼˜ç‚¹æ˜¯è¿‡ç¨‹ç®€å•ï¼ŒèŠ‚çœèµ„æºã€‚</p>
<p> æ— è®ºæ˜¯tcpè¿˜æ˜¯udpåè®®ï¼Œhttpçš„æ•°æ®åŒ…éƒ½æ˜¯åŠ å…¥åˆ°ä»–ä»¬çš„æ•°æ®æ®µä¸­ã€‚</p>
<p>   <img src="http://res.cloudinary.com/leon824/image/upload/v1516273282/20180118-4_zzq5ot.png" width="50%" height="80%"></p>
<p><strong>ä¸‰æ¬¡æ¡æ‰‹é—®é¢˜ï¼š</strong>æ‰€è°“ä¸‰æ¬¡æ¡æ‰‹ï¼ˆThree-Way Handshakeï¼‰å³å»ºç«‹TCPè¿æ¥ï¼Œå°±æ˜¯æŒ‡å»ºç«‹ä¸€ä¸ªTCPè¿æ¥æ—¶ï¼Œéœ€è¦å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯æ€»å…±å‘é€3ä¸ªåŒ…ä»¥ç¡®è®¤è¿æ¥çš„å»ºç«‹ã€‚åœ¨socketç¼–ç¨‹ä¸­ï¼Œè¿™ä¸€è¿‡ç¨‹ç”±å®¢æˆ·ç«¯æ‰§è¡Œconnectæ¥è§¦å‘ã€‚</p>
<p>  <img src="http://res.cloudinary.com/leon824/image/upload/v1516273442/20180118-5_kmqhvo.png" width="80%" height="80%"></p>
<p> ï¼ˆ1ï¼‰ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šClientå°†æ ‡å¿—ä½SYNç½®ä¸º1ï¼Œéšæœºäº§ç”Ÿä¸€ä¸ªå€¼seq=Jï¼Œå¹¶å°†è¯¥æ•°æ®åŒ…å‘é€ç»™Serverï¼ŒClientè¿›å…¥SYN_SENTçŠ¶æ€ï¼Œç­‰å¾…Serverç¡®è®¤ã€‚</p>
<p>ï¼ˆ2ï¼‰ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šServeræ”¶åˆ°æ•°æ®åŒ…åç”±æ ‡å¿—ä½SYN=1çŸ¥é“Clientè¯·æ±‚å»ºç«‹è¿æ¥ï¼ŒServerå°†æ ‡å¿—ä½SYNå’ŒACKéƒ½ç½®ä¸º1ï¼Œack=J+1ï¼Œéšæœºäº§ç”Ÿä¸€ä¸ªå€¼seq=Kï¼Œå¹¶å°†è¯¥æ•°æ®åŒ…å‘é€ç»™Clientä»¥ç¡®è®¤è¿æ¥è¯·æ±‚ï¼ŒServerè¿›å…¥SYN_RCVDçŠ¶æ€ã€‚</p>
<p>ï¼ˆ3ï¼‰ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šClientæ”¶åˆ°ç¡®è®¤åï¼Œæ£€æŸ¥ackæ˜¯å¦ä¸ºJ+1ï¼ŒACKæ˜¯å¦ä¸º1ï¼Œå¦‚æœæ­£ç¡®åˆ™å°†æ ‡å¿—ä½ACKç½®ä¸º1ï¼Œack=K+1ï¼Œå¹¶å°†è¯¥æ•°æ®åŒ…å‘é€ç»™Serverï¼ŒServeræ£€æŸ¥ackæ˜¯å¦ä¸ºK+1ï¼ŒACKæ˜¯å¦ä¸º1ï¼Œå¦‚æœæ­£ç¡®åˆ™è¿æ¥å»ºç«‹æˆåŠŸï¼ŒClientå’ŒServerè¿›å…¥ESTABLISHEDçŠ¶æ€ï¼Œå®Œæˆä¸‰æ¬¡æ¡æ‰‹ï¼ŒéšåClientä¸Serverä¹‹é—´å¯ä»¥å¼€å§‹ä¼ è¾“æ•°æ®äº†ã€‚</p>
<p>ç™½è¯ä¸€ç‚¹å°±æ˜¯ï¼š</p>
<ul>
<li>ä¸»æœºï¼š ä½ å¥½ï¼Œæˆ‘æƒ³è®¤è¯†ä½ </li>
<li>æœåŠ¡å™¨ï¼šå¥½çš„ï¼Œæˆ‘ä¹Ÿæƒ³è®¤è¯†ä½ </li>
<li>ä¸»æœºï¼šå¾ˆé«˜å…´è®¤è¯†ä½ </li>
</ul>
<p>é‚£ä¸ºä»€ä¹ˆä¸€å®šè¦ä¸‰æ¬¡æ¡æ‰‹è€Œä¸æ˜¯ä¸¤æ¬¡å‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬å‡è®¾æœ‰ä¸‹é¢çš„è¿™ç§æƒ…å†µï¼š</p>
<blockquote>
<p>&emsp;&emsp;å½“å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œä½†æ˜¯ç”±äºæ­¤æ—¶ç½‘ç»œæ‹¥å¡è¿™ä¸ªåŒ…æš‚æ—¶æ²¡æœ‰åˆ°è¾¾æœåŠ¡å™¨ï¼Œ å®¢æˆ·ç«¯ç­‰å¾…è¶…æ—¶ä¹‹ååˆé‡æ–°å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œæ­¤æ—¶æœåŠ¡å™¨ç«¯æ¥æ”¶åˆ°äº†ï¼Œå¹¶æ­£ç¡®åº”ç­”ï¼ŒåŒæ–¹å¼€å§‹é€šä¿¡ï¼Œé€šä¿¡ç»“æŸåé‡Šæ”¾socketè¿æ¥ã€‚<br>ä½†è¿™ä¸ªæ—¶å€™ï¼Œé‚£ä¸ªè¢«æ‹¥å¡çš„è¿æ¥æ­¤æ—¶åˆ°è¾¾äº†æœåŠ¡å™¨ï¼Œå¦‚ä½•tcpæ˜¯é‡‡ç”¨ä¸¤æ¬¡æ¡æ‰‹çš„æ–¹å¼ï¼Œé‚£ä¹ˆæ­¤æ—¶æœåŠ¡å™¨ä»¥ä¸ºå®¢æˆ·ç«¯åˆå‘èµ·äº†ä¸€ä¸ªè¿æ¥è¯·æ±‚ï¼Œç„¶åè¿”å›ç¡®è®¤è¯·æ±‚ï¼Œæ­¤æ—¶è¿æ¥å°±å·²ç»å»ºç«‹å¥½äº†ã€‚æœåŠ¡å™¨çŠ¶æ€ä¸ºESTABLISHEDï¼Œç­‰å¾…ç€å®¢æˆ·ç«¯å‘é€æ•°æ®ï¼Œä½†ç”±äºæ­¤æ—¶å®¢æˆ·ç«¯è¿›å…¥äº†closeçŠ¶æ€ï¼Œå°†å¯¼è‡´æœåŠ¡å™¨ç­‰å¾…ä¸‹å»ï¼Œæµªè´¹èµ„æºã€‚</p>
</blockquote>
<p><strong>å››æ¬¡æŒ¥æ‰‹ï¼š</strong><br> é¦–å…ˆéœ€è¦çŸ¥é“çš„æ˜¯tcpæ˜¯å…¨åŒå·¥é€šä¿¡çš„ï¼Œé‚£ä¹ˆå…³é—­å°±åªèƒ½ä¸€ä¸ªä¸€ä¸ªå…³é—­ã€‚<br> å½“å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éœ€è¦å…³é—­socketæ—¶ï¼ˆsocketç¿»è¯‘æˆå¥—æ¥å­—å¹¶ä¸æ°å½“ï¼ŒæŠŠå®ƒå½“åšâ€œæ’åº§â€ä¹Ÿè®¸æ›´å®¹æ˜“ç†è§£ï¼‰ï¼Œå…·ä½“çš„æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p> <img src="http://res.cloudinary.com/leon824/image/upload/v1516285581/20180118-6_rvpdmv.png" width="80%" height="80%"></p>
<ul>
<li>å‡è®¾è¿™ä¸ªæ—¶å€™clientå‘èµ·è¯·æ±‚ä¸­æ–­çš„è¯·æ±‚ï¼Œä¹Ÿå°±æ˜¯å‘é€FinæŠ¥æ–‡ï¼Œå‘Šè¯‰serverï¼šâ€œæˆ‘æ²¡æœ‰æ•°æ®å‘ç»™ä½ äº†ï¼Œä½†å¦‚æœä½ è¿˜æœ‰æ•°æ®è¦å‘ç»™æˆ‘ï¼Œé‚£å°±å…ˆä¸ç”¨å…³é—­socketï¼Œå‘é€å®Œæ¯•åœ¨å‘Šè¯‰æˆ‘â€ï¼Œæ­¤æ—¶clientå¤„äºFIN_WAIT1ã€‚</li>
<li>å½“serveræ¥æ”¶åˆ°äº†ä¹‹åå‘é€ackç»™clientï¼šâ€œä½ çš„è¯·æ±‚æˆ‘æ”¶åˆ°äº†ï¼Œä½†æ˜¯æˆ‘è¿˜æ²¡æœ‰å‡†å¤‡å¥½ï¼Œè¯·ç»§ç»­ç­‰æˆ‘æ¶ˆæ¯â€æ­¤æ—¶clientè¿›å…¥FIN_WAIT2çŠ¶æ€ã€‚</li>
<li>å½“serverç«¯ç¡®è®¤æ•°æ®å‘é€å®Œæ¯•äº†ï¼Œå°±å‘Šè¯‰clientï¼šâ€œå¥½äº†ï¼Œæˆ‘è¿™è¾¹æ•°æ®å‘å®Œäº†ï¼Œå‡†å¤‡å¥½å…³é—­è¿æ¥äº†â€ã€‚</li>
<li>ä½†æ˜¯è¿™ä¸ªæ—¶å€™clientå¹¶ä¸ç›¸ä¿¡ç½‘ç»œï¼Œæ€•serverç«¯ä¸çŸ¥é“è¦å…³é—­ï¼Œæ‰€ä»¥è¿›å…¥TIME_WAIT,å¦‚æœserverç«¯æ²¡æœ‰æ”¶åˆ°ackåˆ™å¯ä»¥é‡ä¼ ï¼Œserverç«¯æ”¶åˆ°ackåå°±çŸ¥é“å¯ä»¥æ–­å¼€äº†ï¼Œclientç­‰å¾…2MSL(æœ€å¤§æŠ¥æ–‡æ®µç”Ÿå­˜æ—¶é—´)ä¹‹åè¿˜æ²¡æœ‰æ”¶åˆ°å›å¤ï¼Œé‚£ä¹ˆä¹…è®¤ä¸ºserverç«¯æ­£å¸¸å…³é—­äº†ï¼Œclientä¹Ÿå¯ä»¥å…³é—­äº†ã€‚</li>
</ul>
<p>&emsp;&emsp;åœ¨è¿™é‡Œéœ€è¦æ³¨æ„æœ€åclientç­‰å¾…2MSL(æœ€å¤§æŠ¥æ–‡æ®µç”Ÿå­˜æ—¶é—´)ï¼Œè™½ç„¶æŒ‰é“ç†ï¼Œå››ä¸ªæŠ¥æ–‡éƒ½å‘é€å®Œæ¯•ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è¿›å…¥CLOSEçŠ¶æ€äº†ï¼Œä½†æ˜¯æˆ‘ä»¬å¿…é¡»å‡è±¡ç½‘ç»œæ˜¯ä¸å¯é çš„ï¼Œæœ‰å¯ä»¥æœ€åä¸€ä¸ªACKä¸¢å¤±ã€‚æ‰€ä»¥TIME_WAITçŠ¶æ€å°±æ˜¯ç”¨æ¥é‡å‘å¯èƒ½ä¸¢å¤±çš„ACKæŠ¥æ–‡ã€‚</p>
<h3 id="5ã€IPåè®®ï¼Œç½‘ç»œå±‚"><a href="#5ã€IPåè®®ï¼Œç½‘ç»œå±‚" class="headerlink" title="5ã€IPåè®®ï¼Œç½‘ç»œå±‚"></a>5ã€IPåè®®ï¼Œç½‘ç»œå±‚</h3><p> åœ¨ä¸ƒå±‚ç½‘ç»œåˆ†å±‚ä¸­ï¼Œç½‘ç»œå±‚æ˜¯æœ€å¤æ‚çš„ã€‚è´Ÿè´£ä¸»æœºåˆ°ä¸»æœºé—´çš„é€šä¿¡ï¼Œå…¶ä¸­ipåè®®æ˜¯æœ€é‡è¦çš„ã€‚</p>
<blockquote>
<p>è®¡ç®—æœºè‹¥åœ¨åŒä¸€ä¸ªå­ç½‘é‡Œè¾¹ï¼Œå®Œå…¨å¯ä»¥åªéœ€è¦macåœ°å€å°±å¯ä»¥é€šä¿¡ï¼Œä¸»æœºAæƒ³å’Œä¸»æœºBé€šä¿¡ï¼Œé‚£ä¹ˆåªéœ€è¦å°†è¯·æ±‚å¹¿æ’­åˆ°æ•´ä¸ªå­ç½‘ï¼Œç„¶åå„å°è®¡ç®—æœºæ‹¿å‡ºç›®çš„macåœ°å€å’Œè‡ªå·±çš„macåœ°å€ç›¸å¯¹æ¯”ï¼Œå¦‚æœç›¸åŒï¼Œä¸¤å°ä¸»æœºè¿›è¡Œé€šä¿¡ã€‚ä½†æ˜¯è®¡ç®—æœºéå¸ƒå…¨ä¸–ç•Œï¼Œä¸å¯èƒ½éƒ½åœ¨ä¸€ä¸ªå­ç½‘é‡Œè¾¹ï¼Œè‹¥åœ¨å…¶ä»–å­ç½‘é‡Œè¾¹æ€ä¹ˆåŠå‘¢ï¼Ÿ</p>
</blockquote>
<p>&emsp;&emsp;è¿™ä¸ªæ—¶å€™å°±å¿…é¡»ç”¨åˆ°ipåœ°å€äº†ã€‚ç”±äºipåœ°å€åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯ç½‘ç»œæ®µï¼Œä¸€éƒ¨åˆ†æ˜¯ä¸»æœºæ®µã€‚ç½‘ç»œæ®µå†³å®šå¤„äºå“ªä¸€ä¸ªå­ç½‘ï¼Œä¸»æœºæ®µå†³å®šæ˜¯å­ç½‘çš„é‚£ä¸€å°æœºå™¨ã€‚<br>å½“æˆ‘ä»¬è¦è®¿é—®googleçš„æœåŠ¡å™¨ipæ˜¯216.239.34.10æ—¶ï¼Œç”±äºä¸åœ¨åŒä¸€ä¸ªå­ç½‘ä¸­ï¼Œéœ€è¦å°†æ•°æ®æŠ¥è½¬å‘ç»™ç½‘å…³ï¼Œç„¶åå†é€šè¿‡å¤æ‚çš„è·¯ç”±ï¼Œæœ€ç»ˆåˆ°è¾¾æœåŠ¡å™¨ã€‚</p>
<p>ipæŠ¥æ–‡å°†tcpçš„æŠ¥æ–‡åµŒå…¥åœ¨æ•°æ®å—ä¸­</p>
<p><img src="http://res.cloudinary.com/leon824/image/upload/v1516288184/20180118-7_gihylp.png" width="60%" height="80%"></p>
<h3 id="6ã€ARPåè®®ã€ä»¥å¤ªç½‘åè®®"><a href="#6ã€ARPåè®®ã€ä»¥å¤ªç½‘åè®®" class="headerlink" title="6ã€ARPåè®®ã€ä»¥å¤ªç½‘åè®®"></a>6ã€ARPåè®®ã€ä»¥å¤ªç½‘åè®®</h3><blockquote>
<p> æœ€åï¼Œipæ•°æ®åŒ…åµŒå…¥åˆ°ä»¥å¤ªç½‘æ•°æ®æŠ¥ï¼Œä»¥å¤ªç½‘æ•°æ®åŒ…éœ€è¦è®¾ç½®é€šä¿¡åŒæ–¹çš„macåœ°å€ï¼Œå‘é€æ–¹ä¸ºæœ¬æœºçš„macåœ°å€ï¼Œæ¥æ”¶æ–¹ç½‘å¡216.239.34.1çš„macåœ°å€éœ€è¦ç”¨ARPåè®®å¾—åˆ°ã€‚</p>
</blockquote>
<p><img src="http://res.cloudinary.com/leon824/image/upload/v1516290169/20180118-8_kd50wc.png" width="60%" height="100%"></p>
<p>&emsp;&emsp;æˆ‘ä»¬éœ€è¦ä¸€ç§æœºåˆ¶ï¼Œèƒ½å¤Ÿä»IPåœ°å€å¾—åˆ°MACåœ°å€ã€‚<br>è¿™é‡Œåˆå¯ä»¥åˆ†æˆä¸¤ç§æƒ…å†µã€‚ç¬¬ä¸€ç§æƒ…å†µï¼Œå¦‚æœä¸¤å°ä¸»æœºä¸åœ¨åŒä¸€ä¸ªå­ç½‘ç»œï¼Œé‚£ä¹ˆäº‹å®ä¸Šæ²¡æœ‰åŠæ³•å¾—åˆ°å¯¹æ–¹çš„MACåœ°å€ï¼Œåªèƒ½æŠŠæ•°æ®åŒ…ä¼ é€åˆ°ä¸¤ä¸ªå­ç½‘ç»œè¿æ¥å¤„çš„â€ç½‘å…³â€ï¼ˆgatewayï¼‰ï¼Œè®©ç½‘å…³å»å¤„ç†ã€‚</p>
<p>&emsp;&emsp;ç¬¬äºŒç§æƒ…å†µï¼Œå¦‚æœä¸¤å°ä¸»æœºåœ¨åŒä¸€ä¸ªå­ç½‘ç»œï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç”¨ARPåè®®ï¼Œå¾—åˆ°å¯¹æ–¹çš„MACåœ°å€ã€‚ARPåè®®ä¹Ÿæ˜¯å‘å‡ºä¸€ä¸ªæ•°æ®åŒ…ï¼ˆåŒ…å«åœ¨ä»¥å¤ªç½‘æ•°æ®åŒ…ä¸­ï¼‰ï¼Œå…¶ä¸­åŒ…å«å®ƒæ‰€è¦æŸ¥è¯¢ä¸»æœºçš„IPåœ°å€ï¼Œåœ¨å¯¹æ–¹çš„MACåœ°å€è¿™ä¸€æ ï¼Œå¡«çš„æ˜¯FF:FF:FF:FF:FF:FFï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªâ€å¹¿æ’­â€åœ°å€ã€‚å®ƒæ‰€åœ¨å­ç½‘ç»œçš„æ¯ä¸€å°ä¸»æœºï¼Œéƒ½ä¼šæ”¶åˆ°è¿™ä¸ªæ•°æ®åŒ…ï¼Œä»ä¸­å–å‡ºIPåœ°å€ï¼Œä¸è‡ªèº«çš„IPåœ°å€è¿›è¡Œæ¯”è¾ƒã€‚å¦‚æœä¸¤è€…ç›¸åŒï¼Œéƒ½åšå‡ºå›å¤ï¼Œå‘å¯¹æ–¹æŠ¥å‘Šè‡ªå·±çš„MACåœ°å€ï¼Œå¦åˆ™å°±ä¸¢å¼ƒè¿™ä¸ªåŒ…ã€‚</p>
<p>æ€»ä¹‹ï¼Œæœ‰äº†ARPåè®®ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°åŒä¸€ä¸ªå­ç½‘ç»œå†…çš„ä¸»æœºMACåœ°å€ï¼Œå¯ä»¥æŠŠæ•°æ®åŒ…å‘é€åˆ°ä»»æ„ä¸€å°ä¸»æœºä¹‹ä¸Šäº†ã€‚</p>
<h3 id="7ã€æœåŠ¡å™¨å“åº”"><a href="#7ã€æœåŠ¡å™¨å“åº”" class="headerlink" title="7ã€æœåŠ¡å™¨å“åº”"></a>7ã€æœåŠ¡å™¨å“åº”</h3><p> ç»è¿‡å¤šä¸ªç½‘å…³çš„è½¬å‘ï¼ŒGoogleçš„æœåŠ¡å™¨216.239.34.10ï¼Œæ”¶åˆ°æ•°æ®åŒ…ä¹‹åé€šè¿‡è§£æï¼Œå–å‡ºå…¶ä¸­çš„è¯·æ±‚request lineï¼Œåšå‡ºå“åº”ï¼Œå°è£…æˆresponseè¿”å›ç»™æµè§ˆå™¨ã€‚</p>
<h3 id="8ã€æµè§ˆå™¨è§£ææ¸²æŸ“é¡µé¢"><a href="#8ã€æµè§ˆå™¨è§£ææ¸²æŸ“é¡µé¢" class="headerlink" title="8ã€æµè§ˆå™¨è§£ææ¸²æŸ“é¡µé¢"></a>8ã€æµè§ˆå™¨è§£ææ¸²æŸ“é¡µé¢</h3><p>æµè§ˆå™¨åœ¨æ”¶åˆ°HTML,CSS,JSæ–‡ä»¶åï¼Œå®ƒæ˜¯å¦‚ä½•æŠŠé¡µé¢å‘ˆç°åˆ°å±å¹•ä¸Šçš„ï¼Ÿä¸‹å›¾å¯¹åº”çš„å°±æ˜¯WebKitæ¸²æŸ“çš„è¿‡ç¨‹ã€‚<br><img src="http://res.cloudinary.com/leon824/image/upload/v1516290657/20180118-9_jr7agq.png" width="80%" height="100%"></p>
<blockquote>
<p>ç”±äºæ¶‰åŠåˆ°å¾ˆå¤šçš„å†…å®¹ï¼Œéš¾å…æœ‰åå·®çš„åœ°æ–¹ï¼Œè¿˜è¯·è§è°…ã€‚</p>
</blockquote>
<p>å‚è€ƒï¼š</p>
<ul>
<li><a href="https://zh.wikipedia.org/wiki/OSI%E6%A8%A1%E5%9E%8B" target="_blank" rel="external">https://zh.wikipedia.org/wiki/OSI%E6%A8%A1%E5%9E%8B</a></li>
<li><a href="http://blog.csdn.net/whuslei/article/details/6667471" target="_blank" rel="external">http://blog.csdn.net/whuslei/article/details/6667471</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2012/06/internet_protocol_suite_part_ii.html" target="_blank" rel="external">http://www.ruanyifeng.com/blog/2012/06/internet_protocol_suite_part_ii.html</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2012/05/internet_protocol_suite_part_i.html" target="_blank" rel="external">http://www.ruanyifeng.com/blog/2012/05/internet_protocol_suite_part_i.html</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/12/14/ç±»unixå¹³å°ä¸­å‡ ä¸ªå¤§æ€å™¨æŒ‡ä»¤/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="leonyoung">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://res.cloudinary.com/leon824/image/upload/v1505793001/IMG_3957_uwrsum.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="èŠ±è°¢èŠ±å¼€">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/14/ç±»unixå¹³å°ä¸­å‡ ä¸ªå¤§æ€å™¨æŒ‡ä»¤/" itemprop="url">ç±»unixå¹³å°ä¸­å‡ ä¸ªå¤§æ€å™¨æŒ‡ä»¤</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">ç™¼è¡¨æ–¼</span>
              
              <time title="å‰µå»ºæ–¼" itemprop="dateCreated datePublished" datetime="2017-12-14T21:22:47+08:00">
                2017-12-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†é¡æ–¼</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/macOS/" itemprop="url" rel="index">
                    <span itemprop="name">macOS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="ç±»unixå¹³å°ä¸­å‡ ä¸ªå¤§æ€å™¨æŒ‡ä»¤"><a href="#ç±»unixå¹³å°ä¸­å‡ ä¸ªå¤§æ€å™¨æŒ‡ä»¤" class="headerlink" title="ç±»unixå¹³å°ä¸­å‡ ä¸ªå¤§æ€å™¨æŒ‡ä»¤"></a>ç±»unixå¹³å°ä¸­å‡ ä¸ªå¤§æ€å™¨æŒ‡ä»¤</h2><blockquote>
<p>ä¸‹è¾¹ä»‹ç»å‡ ä¸ªâ€œå¾ˆå¼ºåŠ¿â€çš„å‘½ä»¤è¡ŒæŒ‡ä»¤ï¼Œèƒ½å¤§å¤§æé«˜æˆ‘ä»¬çš„å·¥ä½œç”Ÿäº§æ•ˆç‡ã€‚ä½¿ç”¨macOS Sierraä½œä¸ºæ¼”ç¤ºç¯å¢ƒã€‚</p>
</blockquote>
<h4 id="1ã€autojump"><a href="#1ã€autojump" class="headerlink" title="1ã€autojump"></a>1ã€autojump</h4><p>  é€šå¸¸æˆ‘ä»¬åœ¨ç±»unixæ“ä½œç³»ç»Ÿä¸­åˆ‡æ¢ç›®å½•éƒ½æ˜¯ä½¿ç”¨cdï¼Œä½¿ç”¨è¿™ä¸ªæŒ‡ä»¤å¦‚æœè¦åˆ‡æ¢åˆ°å¾ˆæ·±çš„ç›®å½•ï¼Œæ˜¯å¾ˆçƒ¦æ¼çš„ã€‚é‚£ä¹ˆè¿™ä¸ªæ—¶å€™autojumpå°±æ˜¯å¤§æ€å™¨ã€‚</p>
<p>1ã€ åœ¨macä¸­å®‰è£…autojumpæ¯”è¾ƒç®€å•ï¼š<br> <figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">brew install autojump</div></pre></td></tr></table></figure></p>
<p> ä½†æ˜¯éœ€è¦æ³¨æ„å®‰è£…å®Œå¹¶ä¸èƒ½ç›´æ¥ä½¿ç”¨ã€‚åœ¨æˆ‘ä»¬å®‰è£…çš„è¿‡ç¨‹ä¸­ä¼šæœ‰å¦‚ä¸‹çš„æç¤ºï¼š</p>
<p> <img src="https://res.cloudinary.com/leon824/image/upload/v1513176176/autojump_efiljd.png" width="100%" height="100%"><br> æˆ‘ä»¬åªéœ€è¦æŒ‰ç…§æ­¥éª¤æ“ä½œå°±å¥½ï¼š<br><br>ï¼ˆ1ï¼‰ å…ˆåœ¨~/.zshrcæ–‡ä»¶æˆ–è€…~/.bash_profileä¸­æ·»åŠ </p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[ -f /usr/local/etc/profile.d/autojump.sh ] &amp;&amp; . /usr/local/etc/profile.d/autojump.sh</div></pre></td></tr></table></figure>
<p> (2) ç„¶åsourceç›¸åº”çš„æ–‡ä»¶ï¼Œé‡æ–°æ‰“å¼€ä¸€ä¸ªçª—å£ã€‚å°±å¯ä»¥ä½¿ç”¨äº†ã€‚</p>
<h4 id="ç®€å•ä»‹ç»ä¸€ä¸‹autojumpçš„ç®€å•ä½¿ç”¨"><a href="#ç®€å•ä»‹ç»ä¸€ä¸‹autojumpçš„ç®€å•ä½¿ç”¨" class="headerlink" title="ç®€å•ä»‹ç»ä¸€ä¸‹autojumpçš„ç®€å•ä½¿ç”¨"></a>ç®€å•ä»‹ç»ä¸€ä¸‹autojumpçš„ç®€å•ä½¿ç”¨</h4><p>å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥æ‰‹åŠ¨æ·»åŠ ä¸€ä¸ªç›®å½•</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;</span> autojump -a [ç›®å½•]</div></pre></td></tr></table></figure>
<p>å¦‚æœä½ çªç„¶æƒ³è¦æŠŠå½“å‰ç›®å½•å˜æˆä½ çš„æœ€çˆ±å’Œä½¿ç”¨æœ€é¢‘ç¹çš„æ–‡ä»¶å¤¹ï¼Œä½ å¯ä»¥åœ¨è¯¥ç›®å½•é€šè¿‡å‘½ä»¤çš„å‚æ•° i æ¥æ‰‹å·¥å¢åŠ å®ƒçš„æƒé‡</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;</span> autojump -i [æƒé‡]</div></pre></td></tr></table></figure>
<p>è¿™å°†ä½¿å¾—è¯¥ç›®å½•æ›´å¯èƒ½è¢«é€‰æ‹©è·³è½¬ã€‚ç›¸åçš„ä¾‹å­æ˜¯åœ¨è¯¥ç›®å½•ä½¿ç”¨å‚æ•° d æ¥å‡å°‘æƒé‡ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;</span> autojump -d [æƒé‡]</div></pre></td></tr></table></figure>
<p>è¦è·Ÿè¸ªæ‰€æœ‰è¿™äº›æ”¹å˜ï¼Œè¾“å…¥ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;</span>  autojump -s</div></pre></td></tr></table></figure>
<h4 id="2ã€mycli"><a href="#2ã€mycli" class="headerlink" title="2ã€mycli"></a>2ã€mycli</h4><blockquote>
<p>&emsp;&emsp; å¯¹äºç¨‹åºå‘˜æ¥è¯´ï¼Œæ•°æ®åº“å†ç†Ÿæ‚‰ä¸è¿‡äº†ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬æ›´å–œæ¬¢ç”¨å‘½ä»¤è¡Œæ¥è®¿é—®æ•°æ®åº“ï¼Œä½†æ˜¯é»˜è®¤è‡ªå¸¦çš„mysqlå¯¹æ“ä½œå¹¶ä¸æ˜¯ååˆ†å‹å¥½ï¼Œä¸èƒ½è‡ªåŠ¨è¡¥å…¨ï¼Œæ²¡æœ‰è¯­æ³•é«˜äº®ã€‚<br>è¿™ä¸ªæ—¶å€™ä½¿ç”¨mycliå°±å†åˆé€‚ä¸è¿‡äº†ã€‚</p>
</blockquote>
<p>1ã€ å…ˆå®‰è£…ï¼Œä¾æ—§ä½¿ç”¨brewæ¥å®‰è£…ç®¡ç†<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">brew install mycli</div></pre></td></tr></table></figure></p>
<p> ç„¶åä½¿ç”¨mycli -u usernameè¿›å…¥æ•°æ®åº“ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯è¿™é‡Œä¸éœ€è¦-på‚æ•°ã€‚<br> å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p> <img src="https://res.cloudinary.com/leon824/image/upload/v1513176886/mycli_heofoa.png" width="100%" height="100%"></p>
<h4 id="3ã€screen"><a href="#3ã€screen" class="headerlink" title="3ã€screen"></a>3ã€screen</h4><blockquote>
<p>å½“æˆ‘ä»¬åœ¨é€šè¿‡sshè¿æ¥è¿œç«¯æœºå™¨æ‰§è¡Œä»»åŠ¡æ—¶ï¼Œå¦‚æœä»»åŠ¡æ‰§è¡Œæ—¶é—´ç›¸å¯¹æ¯”è¾ƒçŸ­è¿˜å¥½ï¼Œå¦‚æœæ˜¯æ‰§è¡Œhadoopçš„ä»»åŠ¡ï¼Œå¾ˆå¤šæ—¶å€™å›è¶…è¿‡å‡ ä¸ªå°æ—¶ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™å¦‚æœsshè¿æ¥ä¸­æ–­äº†ï¼Œé‚£ä¹ˆè¿™ä¸ªä»»åŠ¡ä¹Ÿä¼šå¤±è´¥ã€‚æ‰€ä»¥è¿™ä¸ªæ—¶å€™screenå°±æ´¾ä¸Šç”¨åœºäº†ã€‚</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;</span> brew install screen</div></pre></td></tr></table></figure>
<p>è¿›å…¥åå°æ‰§è¡Œï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;</span> screen</div></pre></td></tr></table></figure>
<p>å½“å¼€å§‹æ‰§è¡Œä»»åŠ¡ä¹‹åä½¿ç”¨å¦‚ä¸‹æŒ‡ä»¤é€€å‡ºï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;</span> control + A + D</div></pre></td></tr></table></figure>
<p>å°†æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡åˆ—ä¸¾å‡ºæ¥</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;</span> screen -ls</div></pre></td></tr></table></figure>
<p>æŸ¥çœ‹ä»»åŠ¡æ‰§è¡Œè¿›åº¦ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;</span> screen -r è¿›ç¨‹å·</div></pre></td></tr></table></figure>
<p>è¿˜åŒ…æ‹¬axelã€fasdã€m-cliç­‰ç­‰æœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥è‡ªå·±ç ”ç©¶ã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/27/è®°å½•ä¸€æ¬¡sparkè¸©å‘/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="leonyoung">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://res.cloudinary.com/leon824/image/upload/v1505793001/IMG_3957_uwrsum.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="èŠ±è°¢èŠ±å¼€">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/27/è®°å½•ä¸€æ¬¡sparkè¸©å‘/" itemprop="url">è®°å½•sparkä¸€æ¬¡è¸©å‘</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">ç™¼è¡¨æ–¼</span>
              
              <time title="å‰µå»ºæ–¼" itemprop="dateCreated datePublished" datetime="2017-11-27T18:06:17+08:00">
                2017-11-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†é¡æ–¼</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/spark/" itemprop="url" rel="index">
                    <span itemprop="name">spark</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Application-has-been-killed-Reason-Master-removed-our-application-FAILED"><a href="#Application-has-been-killed-Reason-Master-removed-our-application-FAILED" class="headerlink" title="Application has been killed. Reason: Master removed our application: FAILED"></a>Application has been killed. Reason: Master removed our application: FAILED</h2><p> sparkä»äº”æœˆä»½å¼€å§‹è·‘åˆ°11æœˆä»½ä¸€ç›´æ­£å¸¸ï¼Œä½†æ˜¯åœ¨æœ€è¿‘ä¸¤å¤©æŠ¥å¦‚ä¸‹çš„é”™è¯¯ã€‚</p>
<p><img src="http://res.cloudinary.com/leon824/image/upload/v1511777579/spark2_mkrjds.png" width="100%" height="100%"></p>
<p>æŸ¥çœ‹workerè¿è¡Œçš„logï¼Œå‘ç°ä¸‹é¢çš„é—®é¢˜ã€‚</p>
<p><img src="http://res.cloudinary.com/leon824/image/upload/v1511777840/spark3_g4xgox.png" width="100%" height="100%"></p>
<p>ç„¶åè¿›å…¥åˆ°/opt/soft/spark/workç›®å½•å‘ç°å½“å‰æœ‰31999ä¸ªæ–‡ä»¶ï¼Œ</p>
<p><img src="http://res.cloudinary.com/leon824/image/upload/v1511777578/spark1_mzgwvz.png" width="100%" height="100%"></p>
<p>è€Œåœ¨linuxæ–‡ä»¶ç³»ç»Ÿä¸­ä¸€ä¸ªæ–‡ä»¶å¤¹æœ€å¤šèƒ½å¤Ÿ32000ä¸ªå­æ–‡ä»¶ï¼ŒåŒ…æ‹¬ä¸€ä¸ªå½“å‰ç›®å½•ã€çˆ¶çº§ç›®å½•ï¼Œé‚£ä¹ˆæ“ä½œè¿™ä¸ªæ•°å°±æ— æ³•åœ¨è¿™ä¸ªç›®å½•ä¸­å†™å…¥æ–‡ä»¶ã€‚åœ¨linux å†…æ ¸ä¸­æœ‰ä¸‹é¢çš„å®šä¹‰ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">include/linux/ext2_fs.h:<span class="meta">#<span class="meta-keyword">define</span> EXT2_LINK_MAX           32000</span></div><div class="line">include/linux/ext3_fs.h:<span class="meta">#<span class="meta-keyword">define</span> EXT3_LINK_MAX           32000</span></div></pre></td></tr></table></figure>
<p>æ‰€ä»¥ï¼Œåªèƒ½å°†ç”Ÿæˆçš„å¤šä½™ä¸´æ—¶æ–‡ä»¶åˆ é™¤äº†ã€‚åŠ¨æ‰‹ingâ€¦.</p>
<p>åˆ é™¤ä¹‹åï¼Œé‡æ–°æäº¤sparkä»»åŠ¡ï¼Œæ²¡æœ‰é—®é¢˜ã€‚<br><img src="http://res.cloudinary.com/leon824/image/upload/v1511778332/spark4_vnexdx.png" width="100%" height="100%"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="https://res.cloudinary.com/leon824/image/upload/v1505793001/IMG_3957_uwrsum.jpg"
                alt="leonyoung" />
            
              <p class="site-author-name" itemprop="name">leonyoung</p>
              <p class="site-description motion-element" itemprop="description">äººä»¬å¸¸å¸¸å˜²ç¬‘â€œè³è‡‚å½“è½¦â€ ä½†æœ‰æ—¶å€™å•Šï¼Œä½ å¹¶ä¸æ˜¯é©¾è½¦çš„äºº æ­£å·§æ˜¯é‚£åªï¼ŒåæŠ—ä¸äº†çš„è³è‚ã€‚</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">17</span>
                  <span class="site-state-item-name">æ–‡ç« </span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">9</span>
                  <span class="site-state-item-name">åˆ†é¡</span>
                
              </div>
            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">leonyoung</span>

  
</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">ä¸»é¡Œ &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>


<span id="busuanzi_container_site_pv">
    æœ¬ç«™æ€»è®¿é—®é‡<span id="busuanzi_value_site_pv"></span>æ¬¡
</span>



        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  





   <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas> 
   <script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script> 
   <script type="text/javascript" src="/js/src/fireworks.js"></script>

</body>
</html>
